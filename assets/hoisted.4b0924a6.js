import"./hoisted.8838cc52.js";import"./hoisted.9f777d9a.js";import"./mee-js-sdk.es.4908cffa.js";const He=e=>typeof e=="object"&&e!=null&&e.nodeType===1,$e=(e,t)=>(!t||e!=="hidden")&&e!=="visible"&&e!=="clip",me=(e,t)=>{if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){const o=getComputedStyle(e,null);return $e(o.overflowY,t)||$e(o.overflowX,t)||(n=>{const s=(i=>{if(!i.ownerDocument||!i.ownerDocument.defaultView)return null;try{return i.ownerDocument.defaultView.frameElement}catch{return null}})(n);return!!s&&(s.clientHeight<n.scrollHeight||s.clientWidth<n.scrollWidth)})(e)}return!1},ee=(e,t,o,n,s,i,r,l)=>i<e&&r>t||i>e&&r<t?0:i<=e&&l<=o||r>=t&&l>=o?i-e-n:r>t&&l<o||i<e&&l>o?r-t+s:0,ze=e=>{const t=e.parentElement;return t??(e.getRootNode().host||null)},Me=(e,t)=>{var o,n,s,i;if(typeof document>"u")return[];const{scrollMode:r,block:l,inline:d,boundary:E,skipOverflowHiddenElements:Ge}=t,Ze=typeof E=="function"?E:M=>M!==E;if(!He(e))throw new TypeError("Invalid target");const Te=document.scrollingElement||document.documentElement,R=[];let u=e;for(;He(u)&&Ze(u);){if(u=ze(u),u===Te){R.push(u);break}u!=null&&u===document.body&&me(u)&&!me(document.documentElement)||u!=null&&me(u,Ge)&&R.push(u)}const B=(n=(o=window.visualViewport)==null?void 0:o.width)!=null?n:innerWidth,C=(i=(s=window.visualViewport)==null?void 0:s.height)!=null?i:innerHeight,{scrollX:O,scrollY:P}=window,{height:H,width:$,top:_,right:ce,bottom:re,left:D}=e.getBoundingClientRect();let m=l==="start"||l==="nearest"?_:l==="end"?re:_+H/2,f=d==="center"?D+$/2:d==="end"?ce:D;const de=[];for(let M=0;M<R.length;M++){const c=R[M],{height:U,width:V,top:j,right:ae,bottom:ue,left:F}=c.getBoundingClientRect();if(r==="if-needed"&&_>=0&&D>=0&&re<=C&&ce<=B&&_>=j&&re<=ue&&D>=F&&ce<=ae)return de;const X=getComputedStyle(c),G=parseInt(X.borderLeftWidth,10),Z=parseInt(X.borderTopWidth,10),z=parseInt(X.borderRightWidth,10),J=parseInt(X.borderBottomWidth,10);let p=0,y=0;const K="offsetWidth"in c?c.offsetWidth-c.clientWidth-G-z:0,Q="offsetHeight"in c?c.offsetHeight-c.clientHeight-Z-J:0,Be="offsetWidth"in c?c.offsetWidth===0?0:V/c.offsetWidth:0,Ce="offsetHeight"in c?c.offsetHeight===0?0:U/c.offsetHeight:0;if(Te===c)p=l==="start"?m:l==="end"?m-C:l==="nearest"?ee(P,P+C,C,Z,J,P+m,P+m+H,H):m-C/2,y=d==="start"?f:d==="center"?f-B/2:d==="end"?f-B:ee(O,O+B,B,G,z,O+f,O+f+$,$),p=Math.max(0,p+P),y=Math.max(0,y+O);else{p=l==="start"?m-j-Z:l==="end"?m-ue+J+Q:l==="nearest"?ee(j,ue,U,Z,J+Q,m,m+H,H):m-(j+U/2)+Q/2,y=d==="start"?f-F-G:d==="center"?f-(F+V/2)+K/2:d==="end"?f-ae+z+K:ee(F,ae,V,G,z+K,f,f+$,$);const{scrollLeft:Oe,scrollTop:Pe}=c;p=Math.max(0,Math.min(Pe+p/Ce,c.scrollHeight-U/Ce+Q)),y=Math.max(0,Math.min(Oe+y/Be,c.scrollWidth-V/Be+K)),m+=Pe-p,f+=Oe-y}de.push({el:c,top:p,left:y})}return de},Je=e=>e===!1?{block:"end",inline:"nearest"}:(t=>t===Object(t)&&Object.keys(t).length!==0)(e)?e:{block:"start",inline:"nearest"};function ge(e,t){if(!e.isConnected||!(n=>{let s=n;for(;s&&s.parentNode;){if(s.parentNode===document)return!0;s=s.parentNode instanceof ShadowRoot?s.parentNode.host:s.parentNode}return!1})(e))return;if((n=>typeof n=="object"&&typeof n.behavior=="function")(t))return t.behavior(Me(e,t));const o=typeof t=="boolean"||t==null?void 0:t.behavior;for(const{el:n,top:s,left:i}of Me(e,Je(t)))n.scroll({top:s,left:i,behavior:o})}window.onbeforeunload=function(){window.scrollTo(0,0)};const A=5,pe=6,Ke="today",Qe="env",We=document.getElementById("scroll-nav-bar");let v="today",g=0;const te=e=>e==="today"?"section":"en-section",W=(e,t)=>{if(we(te(e),t),v===e)Ne(te(e),t);else{v=e;const o=e==="today"?"scrollToToday":"scrollToEnv",n=new CustomEvent(o,{detail:t});window.dispatchEvent(n),setTimeout(()=>{Ne(te(e),t),we(te(e),t)},1e3)}};document.body.onkeydown=function(e){e.code==="ArrowLeft"&&(v==="env"&&g===0?W("today",A-1):g>0&&W(v,g-1)),e.code==="ArrowRight"&&(v==="today"&&g===A-1?W("env",0):(g<A-1&&v==="today"||g<pe-1&&v==="env")&&W(v,g+1))};const De=(e,t)=>{const o=document.createElement("div");o.id=`${e}-bit-progress-${t}`,o.className="bit-progress absolute top-0 left-0 h-6 sm:h-[6px]";const n=document.createElement("div");n.id=`${e}-bit-${t}`,n.className="bit overflow-hidden relative w-full first:rounded-l-full last:rounded-r-full nav-bar-bit h-6 sm:h-[6px]",n.append(o),We&&We.append(n);const s=document.getElementById(`${e}-bit-${t}`);s&&s.addEventListener("click",()=>{W(e,t)})};for(let e=0;e<A;e++)De(Ke,e);for(let e=0;e<pe;e++)De(Qe,e);const Ne=(e,t)=>{const o=document.getElementById(`${e}-${t}`);g=t,o&&ge(o,{behavior:s=>s.forEach(({el:i,top:r,left:l})=>{const d=e==="section"&&t===0?r-screen.height/2:r;i.scrollTop=d,i.scrollLeft=l})});const n=new CustomEvent("scrolledTo",{detail:{section:e,index:t}});window.dispatchEvent(n)};window.addEventListener("onCurrentIndexChanged",e=>{g=e.detail});window.addEventListener("needSyncStatusBar",e=>{const t=e.detail;we(t.section,t.index)});const we=(e,t)=>{setTimeout(()=>{for(let o=0;o<A;o++){const n=document.getElementById(`today-bit-progress-${o}`);n&&(e==="section"&&t<=o?n.style.width="0%":n.style.width="100%")}for(let o=0;o<pe;o++){const n=document.getElementById(`env-bit-progress-${o}`);n&&(e==="en-section"?t<=o?n.style.width="0%":n.style.width="100%":n.style.width="0%")}},200)};window.addEventListener("envSectionShown",()=>{v="env"});window.addEventListener("todaySectionShown",()=>{v="today"});const et=document.querySelectorAll(".today .section"),xe=document.querySelector(".scrollIconContainer"),ye=document.querySelector(".shadow"),Ee=document.getElementById("title"),tt=document.querySelector(".figuresContainer"),ot=document.querySelector(".grid"),nt=document.querySelectorAll(".floatGradient"),Se=document.getElementById("mainLogo"),ie=document.getElementById("envision"),st=document.getElementById("bleachAnimation");let a=0;const Ue=document.getElementById("en-section-0"),Ae=100,Ye=.02;let S=!1,ke=!1;const it=5,lt=5;let w=document.body.scrollTop||document.documentElement.scrollTop,T=!1;const N=document.getElementById("animation-control");let h=0,qe=0,Re;const ct=5,rt=15;let le=!1;const b=document.getElementById("animation-play-pause-btn");let Y=0,q=window.scrollY;const Ve=()=>{Y!==0&&clearInterval(Y),Y=setInterval(()=>{window.scrollY>=q&&(window.scrollTo(0,window.scrollY+ct),q=window.scrollY)},rt)},dt=3e3,at=5e3;let oe,ve,L=!1;I();function ut(){L&&Ve()}function I(){L&&(L=!1,clearInterval(ve)),oe!==null&&clearTimeout(oe),oe=setTimeout(function(){L||(Fe(),L=!0,ve=setInterval(ut,at))},dt)}function be(){clearTimeout(oe),clearInterval(Re),Re=0,clearInterval(Y),Y=0,clearInterval(ve),window.removeEventListener("wheel",I),window.removeEventListener("keypress",I),window.removeEventListener("scroll",be)}const Le=()=>{I(),window.addEventListener("wheel",I),window.addEventListener("keypress",I)};Le();const je=()=>{b&&(b.classList.remove("pause"),b.classList.add("play"),le=!1)},Fe=()=>{b&&(b.classList.add("pause"),b.classList.remove("play"),le=!0,Ve())};b?.addEventListener("click",()=>{le?(je(),be()):(Fe(),Le())});window.addEventListener("envSectionChanged",e=>{const t=e.detail,o=Number(t.slice(-1));le&&o===lt-1&&qe===0&&Le(),qe=o});window.addEventListener("atTheAppLinks",()=>{je(),be()});let fe;const mt={threshold:0,rootMargin:"-40% 0% -60%"},ft=new IntersectionObserver((e,t)=>{e.forEach(o=>{if(o.isIntersecting){if(o.target.id==="animationTrigger"&&a<=0&&!T&&(Ee?.classList.add("animate-fadeOut","titleBleach"),o.target.querySelector(".subtitle")?.classList.add("animate-fadeOut","titleBleach"),ot?.classList.add("animate-fadeOut","figuresBleach"),tt?.classList.add("animate-collapse3d","figuresBleach"),nt.forEach(i=>{i.removeAttribute("style"),i.classList.add("animate-fadeOut","figuresBleach")}),ye?.classList.add("bg-1"),!S)){S=!0,N?.classList.add("opacity-0");let i=setInterval(()=>{if(a<1)a=a+Ye,document.documentElement.style.setProperty("--bleachProgress",a.toString());else{setTimeout(()=>{S=!1;const d=new CustomEvent("needSyncStatusBar",{detail:{section:"en-section",index:0}});window.dispatchEvent(d);const E=new CustomEvent("scrolledTo",{detail:{section:"en-section",index:0}});window.dispatchEvent(E),N?.classList.remove("opacity-0"),fe=Date.now()},1e3),clearInterval(i),Ie(0);const r=new CustomEvent("onCurrentIndexChanged",{detail:0});window.dispatchEvent(r);const l=new CustomEvent("envSectionShown");window.dispatchEvent(l)}},Ae)}const n=5e3,s=Date.now()-fe>n;if(console.log("g",Date.now()-fe),o.target.id==="animationTrigger"&&a>0&&!T&&s&&(ie?.classList.add("hidden"),Se?.classList.remove("logo--contrast"),Ue?.classList.add("opacity-0"),!S)){S=!0,N?.classList.add("opacity-0");const i=new CustomEvent("todaySectionShown");window.dispatchEvent(i);let r=setInterval(()=>{a>0?(a=a-Ye,document.documentElement.style.setProperty("--bleachProgress",a.toString())):(setTimeout(()=>{S=!1;const l=document.getElementById("section-4");if(l&&!h){ge(l);const d=new CustomEvent("needSyncStatusBar",{detail:{section:"section",index:4}});window.dispatchEvent(d);const E=new CustomEvent("scrolledTo",{detail:{section:"section",index:4}});window.dispatchEvent(E)}N?.classList.remove("opacity-0"),q=window.scrollY},1e3),clearInterval(r),L=!1)},Ae)}if(o.target.id!=="section-negative"){h=Number(o.target.id.slice(-1));const i=new CustomEvent("onCurrentIndexChanged",{detail:h});window.dispatchEvent(i)}w=document.body.scrollTop||document.documentElement.scrollTop}for(let n=0;n<it;n++){const s=document.getElementById(`subtitle-${n}`);h===n?(s?.classList.remove("animate-fadeOut","hidden"),s?.classList.add("animate-riseIn")):(s?.classList.remove("animate-riseIn"),s?.classList.add("animate-fadeOut"))}})},mt);et.forEach(e=>{ft.observe(e)});document.addEventListener("scroll",()=>{S||requestAnimationFrame(ht),st&&a===0&&(ie?.classList.add("hidden"),Se?.classList.remove("logo--contrast")),!ke&&window.scrollY>400&&(xe?.classList.add("opacity-0"),ke=!0,setTimeout(()=>{xe?.classList.add("hidden")},400))},{passive:!0});const ht=()=>{document.documentElement.style.setProperty("--scroll",(window.scrollY/(document.body.offsetHeight-window.innerHeight)).toString())};function Ie(e){if(T=!0,N?.classList.contains("white")){const o=document.querySelector("#flash-protector");o?.classList.remove("hidden"),o?.classList.add("fixed","animate-fadeOut"),setTimeout(()=>{o?.classList.remove("fixed","animate-fadeOut"),o?.classList.add("hidden")},400)}ie?.classList.remove("hidden"),Se?.classList.add("logo--contrast"),e===0&&Ue?.classList.remove("opacity-0"),Ee?.classList.add("animate-fadeOut","titleBleach"),ye?.classList.add("bg-1"),a=1,document.documentElement.style.setProperty("--bleachProgress","1");const t=new CustomEvent("envSectionShown");window.dispatchEvent(t),setTimeout(()=>{T=!1},2e3)}function wt(e){T=!0,Ee?.classList.remove("animate-fadeOut","titleBleach"),ye?.classList.remove("bg-1"),ie?.classList.add("hidden"),a=0,document.documentElement.style.setProperty("--bleachProgress","0");const t=new CustomEvent("todaySectionShown");window.dispatchEvent(t),setTimeout(()=>{w=document.body.scrollTop||document.documentElement.scrollTop,k=w,T=!1},2e3),q=window.scrollY}function vt(){Ie(5);const e=document.getElementById("en-section-5");e&&ge(e),document.getElementById("animation-control")?.classList.add("opacity-0");const o=new CustomEvent("needSyncStatusBar",{detail:{section:"en-section",index:5}});window.dispatchEvent(o)}window.addEventListener("scrollToEnv",e=>{Ie(e.detail)});window.addEventListener("scrollToToday",e=>{wt(e.detail)});window.addEventListener("scrolledTo",e=>{const t=e.detail;t.section==="section"&&(h=t.index,w=document.body.scrollTop||document.documentElement.scrollTop,k=w,ne=w,x=h),q=window.scrollY});const gt=document.getElementById("sroll-to-end");gt?.addEventListener("click",vt);window.addEventListener("scroll",Xe);const _e=document.getElementById("section-0");let ne=w,k=w,x=h,he=0,se="down";Xe();function Xe(){if(a>=1)return;const e=_e&&_e.clientHeight;if(!e)return;const t=document.body.scrollTop||document.documentElement.scrollTop;if(ne!==w&&x!==h&&(ne=w,k=w,se==="up"&&(k=ne-e)),x!==h){const i=document.getElementById(`today-bit-progress-${x}`);se==="down"?i&&(i.style.width="100%"):i&&(i.style.width="0%"),x=h}const n=(t-k)*100/e,s=document.getElementById(`today-bit-progress-${h}`);s&&n<=100&&(s.style.width=n+"%")}window.addEventListener("scroll",function(){let e=window.pageYOffset||document.documentElement.scrollTop;e>he?se="down":e<he&&(se="up"),he=e<=0?0:e},!1);const pt=document.querySelectorAll(".envision .section"),yt={threshold:.8},Et=new IntersectionObserver((e,t)=>{e.forEach(o=>{o.isIntersecting&&(o.target.classList.remove("opacity-0"),o.target.querySelector(".subtitle")?.classList.remove("animate-fadeOut-short","opacity-0"),o.target.querySelector(".subtitle")?.classList.add("animate-riseIn-short","animation-delay-600"),o.target.querySelector(".title")?.classList.remove("animate-fadeOut","opacity-0"),o.target.querySelector(".title")?.classList.add("animate-riseIn"))})},yt);pt.forEach(e=>{Et.observe(e)});const St=document.querySelectorAll(".floatIcon"),bt=1200;St.forEach(e=>{e.style.animationDelay=bt+Math.floor(Math.random()*4200)+"ms"});
