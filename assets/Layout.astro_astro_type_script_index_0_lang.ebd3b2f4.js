var ir=Object.defineProperty,or=(e,t,n)=>t in e?ir(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ht=(e,t,n)=>(or(e,typeof t!="symbol"?t+"":t,n),n),P=crypto;const Z=e=>e instanceof CryptoKey,ar=async(e,t)=>{const n=`SHA-${e.slice(-3)}`;return new Uint8Array(await P.subtle.digest(n,t))};var sr=ar;const $=new TextEncoder,ne=new TextDecoder,Me=2**32;function se(...e){const t=e.reduce((c,{length:f})=>c+f,0),n=new Uint8Array(t);let o=0;return e.forEach(c=>{n.set(c,o),o+=c.length}),n}function cr(e,t){return se($.encode(e),new Uint8Array([0]),t)}function xe(e,t,n){if(t<0||t>=Me)throw new RangeError(`value must be >= 0 and <= ${Me-1}. Received ${t}`);e.set([t>>>24,t>>>16,t>>>8,t&255],n)}function ur(e){const t=Math.floor(e/Me),n=e%Me,o=new Uint8Array(8);return xe(o,t,0),xe(o,n,4),o}function Qe(e){const t=new Uint8Array(4);return xe(t,e),t}function He(e){return se(Qe(e.length),e)}async function lr(e,t,n){const o=Math.ceil((t>>3)/32),c=new Uint8Array(o*32);for(let f=0;f<o;f++){const g=new Uint8Array(4+e.length+n.length);g.set(Qe(f+1)),g.set(e,4),g.set(n,4+e.length),c.set(await sr("sha256",g),f*32)}return c.slice(0,t>>3)}const It=e=>{let t=e;typeof t=="string"&&(t=$.encode(t));const n=32768,o=[];for(let c=0;c<t.length;c+=n)o.push(String.fromCharCode.apply(null,t.subarray(c,c+n)));return btoa(o.join(""))},Ae=e=>It(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),dr=e=>{const t=atob(e),n=new Uint8Array(t.length);for(let o=0;o<t.length;o++)n[o]=t.charCodeAt(o);return n},B=e=>{let t=e;t instanceof Uint8Array&&(t=ne.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return dr(t)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}};class ie extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(t){var n;super(t),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,(n=Error.captureStackTrace)===null||n===void 0||n.call(Error,this,this.constructor)}}class j extends ie{static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}constructor(t,n="unspecified",o="unspecified"){super(t),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=n,this.reason=o}}class yt extends ie{static get code(){return"ERR_JWT_EXPIRED"}constructor(t,n="unspecified",o="unspecified"){super(t),this.code="ERR_JWT_EXPIRED",this.claim=n,this.reason=o}}class Je extends ie{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}}class K extends ie{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}}class Le extends ie{constructor(){super(...arguments),this.code="ERR_JWE_DECRYPTION_FAILED",this.message="decryption operation failed"}static get code(){return"ERR_JWE_DECRYPTION_FAILED"}}class C extends ie{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}static get code(){return"ERR_JWE_INVALID"}}class U extends ie{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}static get code(){return"ERR_JWS_INVALID"}}class X extends ie{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}class pr extends ie{constructor(){super(...arguments),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED",this.message="signature verification failed"}static get code(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}var fr=P.getRandomValues.bind(P);function hr(e){switch(e){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new K(`Unsupported JWE Algorithm: ${e}`)}}const yr=(e,t)=>{if(t.length<<3!==hr(e))throw new C("Invalid Initialization Vector length")};var gr=yr;const mr=(e,t)=>{const n=e.byteLength<<3;if(n!==t)throw new C(`Invalid Content Encryption Key length. Expected ${t} bits, got ${n} bits`)};var gt=mr;const vr=(e,t)=>{if(!(e instanceof Uint8Array))throw new TypeError("First argument must be a buffer");if(!(t instanceof Uint8Array))throw new TypeError("Second argument must be a buffer");if(e.length!==t.length)throw new TypeError("Input buffers must have the same length");const n=e.length;let o=0,c=-1;for(;++c<n;)o|=e[c]^t[c];return o===0};var wr=vr;function me(){return typeof WebSocketPair<"u"||typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"||typeof EdgeRuntime<"u"&&EdgeRuntime==="vercel"}function L(e,t="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`)}function re(e,t){return e.name===t}function be(e){return parseInt(e.name.slice(4),10)}function Er(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}function Dt(e,t){if(t.length&&!t.some(n=>e.usages.includes(n))){let n="CryptoKey does not support this operation, its usages must include ";if(t.length>2){const o=t.pop();n+=`one of ${t.join(", ")}, or ${o}.`}else t.length===2?n+=`one of ${t[0]} or ${t[1]}.`:n+=`${t[0]}.`;throw new TypeError(n)}}function Sr(e,t,...n){switch(t){case"HS256":case"HS384":case"HS512":{if(!re(e.algorithm,"HMAC"))throw L("HMAC");const o=parseInt(t.slice(2),10);if(be(e.algorithm.hash)!==o)throw L(`SHA-${o}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!re(e.algorithm,"RSASSA-PKCS1-v1_5"))throw L("RSASSA-PKCS1-v1_5");const o=parseInt(t.slice(2),10);if(be(e.algorithm.hash)!==o)throw L(`SHA-${o}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!re(e.algorithm,"RSA-PSS"))throw L("RSA-PSS");const o=parseInt(t.slice(2),10);if(be(e.algorithm.hash)!==o)throw L(`SHA-${o}`,"algorithm.hash");break}case"EdDSA":{if(e.algorithm.name!=="Ed25519"&&e.algorithm.name!=="Ed448"){if(me()){if(re(e.algorithm,"NODE-ED25519"))break;throw L("Ed25519, Ed448, or NODE-ED25519")}throw L("Ed25519 or Ed448")}break}case"ES256":case"ES384":case"ES512":{if(!re(e.algorithm,"ECDSA"))throw L("ECDSA");const o=Er(t);if(e.algorithm.namedCurve!==o)throw L(o,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}Dt(e,n)}function fe(e,t,...n){switch(t){case"A128GCM":case"A192GCM":case"A256GCM":{if(!re(e.algorithm,"AES-GCM"))throw L("AES-GCM");const o=parseInt(t.slice(1,4),10);if(e.algorithm.length!==o)throw L(o,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!re(e.algorithm,"AES-KW"))throw L("AES-KW");const o=parseInt(t.slice(1,4),10);if(e.algorithm.length!==o)throw L(o,"algorithm.length");break}case"ECDH":{switch(e.algorithm.name){case"ECDH":case"X25519":case"X448":break;default:throw L("ECDH, X25519, or X448")}break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!re(e.algorithm,"PBKDF2"))throw L("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!re(e.algorithm,"RSA-OAEP"))throw L("RSA-OAEP");const o=parseInt(t.slice(9),10)||1;if(be(e.algorithm.hash)!==o)throw L(`SHA-${o}`,"algorithm.hash");break}default:throw new TypeError("CryptoKey does not support this operation")}Dt(e,n)}function Pt(e,t,...n){if(n.length>2){const o=n.pop();e+=`one of type ${n.join(", ")}, or ${o}.`}else n.length===2?e+=`one of type ${n[0]} or ${n[1]}.`:e+=`of type ${n[0]}.`;return t==null?e+=` Received ${t}`:typeof t=="function"&&t.name?e+=` Received function ${t.name}`:typeof t=="object"&&t!=null&&t.constructor&&t.constructor.name&&(e+=` Received an instance of ${t.constructor.name}`),e}var V=(e,...t)=>Pt("Key must be ",e,...t);function Nt(e,t,...n){return Pt(`Key for the ${e} algorithm must be `,t,...n)}var Tt=e=>Z(e);const x=["CryptoKey"];async function Ar(e,t,n,o,c,f){if(!(t instanceof Uint8Array))throw new TypeError(V(t,"Uint8Array"));const g=parseInt(e.slice(1,4),10),E=await P.subtle.importKey("raw",t.subarray(g>>3),"AES-CBC",!1,["decrypt"]),S=await P.subtle.importKey("raw",t.subarray(0,g>>3),{hash:`SHA-${g<<1}`,name:"HMAC"},!1,["sign"]),v=se(f,o,n,ur(f.length<<3)),u=new Uint8Array((await P.subtle.sign("HMAC",S,v)).slice(0,g>>3));let p;try{p=wr(c,u)}catch{}if(!p)throw new Le;let m;try{m=new Uint8Array(await P.subtle.decrypt({iv:o,name:"AES-CBC"},E,n))}catch{}if(!m)throw new Le;return m}async function br(e,t,n,o,c,f){let g;t instanceof Uint8Array?g=await P.subtle.importKey("raw",t,"AES-GCM",!1,["decrypt"]):(fe(t,e,"decrypt"),g=t);try{return new Uint8Array(await P.subtle.decrypt({additionalData:f,iv:o,name:"AES-GCM",tagLength:128},g,se(n,c)))}catch{throw new Le}}const _r=async(e,t,n,o,c,f)=>{if(!Z(t)&&!(t instanceof Uint8Array))throw new TypeError(V(t,...x,"Uint8Array"));switch(gr(e,o),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return t instanceof Uint8Array&&gt(t,parseInt(e.slice(-3),10)),Ar(e,t,n,o,c,f);case"A128GCM":case"A192GCM":case"A256GCM":return t instanceof Uint8Array&&gt(t,parseInt(e.slice(1,4),10)),br(e,t,n,o,c,f);default:throw new K("Unsupported JWE Content Encryption Algorithm")}};var Ot=_r;const Mr=async()=>{throw new K('JWE "zip" (Compression Algorithm) Header Parameter is not supported by your javascript runtime. You need to use the `inflateRaw` decrypt option to provide Inflate Raw implementation.')},Cr=(...e)=>{const t=e.filter(Boolean);if(t.length===0||t.length===1)return!0;let n;for(const o of t){const c=Object.keys(o);if(!n||n.size===0){n=new Set(c);continue}for(const f of c){if(n.has(f))return!1;n.add(f)}}return!0};var Ve=Cr;function Ir(e){return typeof e=="object"&&e!==null}function ee(e){if(!Ir(e)||Object.prototype.toString.call(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}const Dr=[{hash:"SHA-256",name:"HMAC"},!0,["sign"]];var Kt=Dr;function Pr(e,t){if(e.algorithm.length!==parseInt(t.slice(1,4),10))throw new TypeError(`Invalid key size for alg: ${t}`)}function Nr(e,t,n){if(Z(e))return fe(e,t,n),e;if(e instanceof Uint8Array)return P.subtle.importKey("raw",e,"AES-KW",!0,[n]);throw new TypeError(V(e,...x,"Uint8Array"))}const Be=async(e,t,n)=>{const o=await Nr(t,e,"unwrapKey");Pr(o,e);const c=await P.subtle.unwrapKey("raw",n,o,"AES-KW",...Kt);return new Uint8Array(await P.subtle.exportKey("raw",c))};async function Tr(e,t,n,o,c=new Uint8Array(0),f=new Uint8Array(0)){if(!Z(e))throw new TypeError(V(e,...x));if(fe(e,"ECDH"),!Z(t))throw new TypeError(V(t,...x));fe(t,"ECDH","deriveBits");const g=se(He($.encode(n)),He(c),He(f),Qe(o));let E;e.algorithm.name==="X25519"?E=256:e.algorithm.name==="X448"?E=448:E=Math.ceil(parseInt(e.algorithm.namedCurve.substr(-3),10)/8)<<3;const S=new Uint8Array(await P.subtle.deriveBits({name:e.algorithm.name,public:e},t,E));return lr(S,o,g)}function Or(e){if(!Z(e))throw new TypeError(V(e,...x));return["P-256","P-384","P-521"].includes(e.algorithm.namedCurve)||e.algorithm.name==="X25519"||e.algorithm.name==="X448"}function Kr(e){if(!(e instanceof Uint8Array)||e.length<8)throw new C("PBES2 Salt Input must be 8 or more octets")}function Wr(e,t){if(e instanceof Uint8Array)return P.subtle.importKey("raw",e,"PBKDF2",!1,["deriveBits"]);if(Z(e))return fe(e,t,"deriveBits","deriveKey"),e;throw new TypeError(V(e,...x,"Uint8Array"))}async function Hr(e,t,n,o){Kr(e);const c=cr(t,e),f=parseInt(t.slice(13,16),10),g={hash:`SHA-${t.slice(8,11)}`,iterations:n,name:"PBKDF2",salt:c},E={length:f,name:"AES-KW"},S=await Wr(o,t);if(S.usages.includes("deriveBits"))return new Uint8Array(await P.subtle.deriveBits(g,S,f));if(S.usages.includes("deriveKey"))return P.subtle.deriveKey(g,S,E,!1,["wrapKey","unwrapKey"]);throw new TypeError('PBKDF2 key "usages" must include "deriveBits" or "deriveKey"')}const Rr=async(e,t,n,o,c)=>{const f=await Hr(c,e,o,t);return Be(e.slice(-6),f,n)};function mt(e){switch(e){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new K(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}var Ye=(e,t)=>{if(e.startsWith("RS")||e.startsWith("PS")){const{modulusLength:n}=t.algorithm;if(typeof n!="number"||n<2048)throw new TypeError(`${e} requires key modulusLength to be 2048 bits or larger`)}};const Ur=async(e,t,n)=>{if(!Z(t))throw new TypeError(V(t,...x));if(fe(t,e,"decrypt","unwrapKey"),Ye(e,t),t.usages.includes("decrypt"))return new Uint8Array(await P.subtle.decrypt(mt(e),t,n));if(t.usages.includes("unwrapKey")){const o=await P.subtle.unwrapKey("raw",n,t,mt(e),...Kt);return new Uint8Array(await P.subtle.exportKey("raw",o))}throw new TypeError('RSA-OAEP key "usages" must include "decrypt" or "unwrapKey" for this operation')};function Wt(e){switch(e){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new K(`Unsupported JWE Algorithm: ${e}`)}}var xr=e=>fr(new Uint8Array(Wt(e)>>3)),Jr=(e,t)=>{const n=(e.match(/.{1,64}/g)||[]).join(`
`);return`-----BEGIN ${t}-----
${n}
-----END ${t}-----`};const Lr=async(e,t,n)=>{if(!Z(n))throw new TypeError(V(n,...x));if(!n.extractable)throw new TypeError("CryptoKey is not extractable");if(n.type!==e)throw new TypeError(`key is not a ${e} key`);return Jr(It(new Uint8Array(await P.subtle.exportKey(t,n))),`${e.toUpperCase()} KEY`)},Br=e=>Lr("private","pkcs8",e),ae=(e,t,n=0)=>{n===0&&(t.unshift(t.length),t.unshift(6));let o=e.indexOf(t[0],n);if(o===-1)return!1;const c=e.subarray(o,o+t.length);return c.length!==t.length?!1:c.every((f,g)=>f===t[g])||ae(e,t,o+1)},vt=e=>{switch(!0){case ae(e,[42,134,72,206,61,3,1,7]):return"P-256";case ae(e,[43,129,4,0,34]):return"P-384";case ae(e,[43,129,4,0,35]):return"P-521";case ae(e,[43,101,110]):return"X25519";case ae(e,[43,101,111]):return"X448";case ae(e,[43,101,112]):return"Ed25519";case ae(e,[43,101,113]):return"Ed448";default:throw new K("Invalid or unsupported EC Key Curve or OKP Key Sub Type")}},zr=async(e,t,n,o,c)=>{var f,g;let E,S;const v=new Uint8Array(atob(n.replace(e,"")).split("").map(p=>p.charCodeAt(0))),u=t==="spki";switch(o){case"PS256":case"PS384":case"PS512":E={name:"RSA-PSS",hash:`SHA-${o.slice(-3)}`},S=u?["verify"]:["sign"];break;case"RS256":case"RS384":case"RS512":E={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${o.slice(-3)}`},S=u?["verify"]:["sign"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":E={name:"RSA-OAEP",hash:`SHA-${parseInt(o.slice(-3),10)||1}`},S=u?["encrypt","wrapKey"]:["decrypt","unwrapKey"];break;case"ES256":E={name:"ECDSA",namedCurve:"P-256"},S=u?["verify"]:["sign"];break;case"ES384":E={name:"ECDSA",namedCurve:"P-384"},S=u?["verify"]:["sign"];break;case"ES512":E={name:"ECDSA",namedCurve:"P-521"},S=u?["verify"]:["sign"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{const p=vt(v);E=p.startsWith("P-")?{name:"ECDH",namedCurve:p}:{name:p},S=u?[]:["deriveBits"];break}case"EdDSA":E={name:vt(v)},S=u?["verify"]:["sign"];break;default:throw new K('Invalid or unsupported "alg" (Algorithm) value')}try{return await P.subtle.importKey(t,v,E,(f=c?.extractable)!==null&&f!==void 0?f:!1,S)}catch(p){if(E.name==="Ed25519"&&p?.name==="NotSupportedError"&&me())return E={name:"NODE-ED25519",namedCurve:"NODE-ED25519"},await P.subtle.importKey(t,v,E,(g=c?.extractable)!==null&&g!==void 0?g:!1,S);throw p}},$r=(e,t,n)=>zr(/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\s)/g,"pkcs8",e,t,n);function qr(e){let t,n;switch(e.kty){case"oct":{switch(e.alg){case"HS256":case"HS384":case"HS512":t={name:"HMAC",hash:`SHA-${e.alg.slice(-3)}`},n=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":throw new K(`${e.alg} keys cannot be imported as CryptoKey instances`);case"A128GCM":case"A192GCM":case"A256GCM":case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":t={name:"AES-GCM"},n=["encrypt","decrypt"];break;case"A128KW":case"A192KW":case"A256KW":t={name:"AES-KW"},n=["wrapKey","unwrapKey"];break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":t={name:"PBKDF2"},n=["deriveBits"];break;default:throw new K('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"RSA":{switch(e.alg){case"PS256":case"PS384":case"PS512":t={name:"RSA-PSS",hash:`SHA-${e.alg.slice(-3)}`},n=e.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":t={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.alg.slice(-3)}`},n=e.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":t={name:"RSA-OAEP",hash:`SHA-${parseInt(e.alg.slice(-3),10)||1}`},n=e.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new K('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(e.alg){case"ES256":t={name:"ECDSA",namedCurve:"P-256"},n=e.d?["sign"]:["verify"];break;case"ES384":t={name:"ECDSA",namedCurve:"P-384"},n=e.d?["sign"]:["verify"];break;case"ES512":t={name:"ECDSA",namedCurve:"P-521"},n=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:"ECDH",namedCurve:e.crv},n=e.d?["deriveBits"]:[];break;default:throw new K('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"OKP":{switch(e.alg){case"EdDSA":t={name:e.crv},n=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:e.crv},n=e.d?["deriveBits"]:[];break;default:throw new K('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new K('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:t,keyUsages:n}}const kr=async e=>{var t,n;if(!e.alg)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');const{algorithm:o,keyUsages:c}=qr(e),f=[o,(t=e.ext)!==null&&t!==void 0?t:!1,(n=e.key_ops)!==null&&n!==void 0?n:c];if(o.name==="PBKDF2")return P.subtle.importKey("raw",B(e.k),...f);const g={...e};delete g.alg,delete g.use;try{return await P.subtle.importKey("jwk",g,...f)}catch(E){if(o.name==="Ed25519"&&E?.name==="NotSupportedError"&&me())return f[0]={name:"NODE-ED25519",namedCurve:"NODE-ED25519"},await P.subtle.importKey("jwk",g,...f);throw E}};var wt=kr;async function Fr(e,t,n){if(typeof e!="string"||e.indexOf("-----BEGIN PRIVATE KEY-----")!==0)throw new TypeError('"pkcs8" must be PKCS#8 formatted string');return $r(e,t,n)}async function Ht(e,t,n){var o;if(!ee(e))throw new TypeError("JWK must be an object");switch(t||(t=e.alg),e.kty){case"oct":if(typeof e.k!="string"||!e.k)throw new TypeError('missing "k" (Key Value) Parameter value');return n??(n=e.ext!==!0),n?wt({...e,alg:t,ext:(o=e.ext)!==null&&o!==void 0?o:!1}):B(e.k);case"RSA":if(e.oth!==void 0)throw new K('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return wt({...e,alg:t});default:throw new K('Unsupported "kty" (Key Type) Parameter value')}}const Gr=(e,t)=>{if(!(t instanceof Uint8Array)){if(!Tt(t))throw new TypeError(Nt(e,t,...x,"Uint8Array"));if(t.type!=="secret")throw new TypeError(`${x.join(" or ")} instances for symmetric algorithms must be of type "secret"`)}},Qr=(e,t,n)=>{if(!Tt(t))throw new TypeError(Nt(e,t,...x));if(t.type==="secret")throw new TypeError(`${x.join(" or ")} instances for asymmetric algorithms must not be of type "secret"`);if(n==="sign"&&t.type==="public")throw new TypeError(`${x.join(" or ")} instances for asymmetric algorithm signing must be of type "private"`);if(n==="decrypt"&&t.type==="public")throw new TypeError(`${x.join(" or ")} instances for asymmetric algorithm decryption must be of type "private"`);if(t.algorithm&&n==="verify"&&t.type==="private")throw new TypeError(`${x.join(" or ")} instances for asymmetric algorithm verifying must be of type "public"`);if(t.algorithm&&n==="encrypt"&&t.type==="private")throw new TypeError(`${x.join(" or ")} instances for asymmetric algorithm encryption must be of type "public"`)},Vr=(e,t,n)=>{e.startsWith("HS")||e==="dir"||e.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(e)?Gr(e,t):Qr(e,t,n)};var Ze=Vr;async function Yr(e,t,n,o,c){const f=e.slice(0,7);return Ot(f,t,n,o,c,new Uint8Array(0))}async function Zr(e,t,n,o,c){switch(Ze(e,t,"decrypt"),e){case"dir":{if(n!==void 0)throw new C("Encountered unexpected JWE Encrypted Key");return t}case"ECDH-ES":if(n!==void 0)throw new C("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!ee(o.epk))throw new C('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(!Or(t))throw new K("ECDH with the provided key is not allowed or not supported by your javascript runtime");const f=await Ht(o.epk,e);let g,E;if(o.apu!==void 0){if(typeof o.apu!="string")throw new C('JOSE Header "apu" (Agreement PartyUInfo) invalid');g=B(o.apu)}if(o.apv!==void 0){if(typeof o.apv!="string")throw new C('JOSE Header "apv" (Agreement PartyVInfo) invalid');E=B(o.apv)}const S=await Tr(f,t,e==="ECDH-ES"?o.enc:e,e==="ECDH-ES"?Wt(o.enc):parseInt(e.slice(-5,-2),10),g,E);if(e==="ECDH-ES")return S;if(n===void 0)throw new C("JWE Encrypted Key missing");return Be(e.slice(-6),S,n)}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(n===void 0)throw new C("JWE Encrypted Key missing");return Ur(e,t,n)}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{if(n===void 0)throw new C("JWE Encrypted Key missing");if(typeof o.p2c!="number")throw new C('JOSE Header "p2c" (PBES2 Count) missing or invalid');const f=c?.maxPBES2Count||1e4;if(o.p2c>f)throw new C('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if(typeof o.p2s!="string")throw new C('JOSE Header "p2s" (PBES2 Salt) missing or invalid');return Rr(e,t,n,o.p2c,B(o.p2s))}case"A128KW":case"A192KW":case"A256KW":{if(n===void 0)throw new C("JWE Encrypted Key missing");return Be(e,t,n)}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{if(n===void 0)throw new C("JWE Encrypted Key missing");if(typeof o.iv!="string")throw new C('JOSE Header "iv" (Initialization Vector) missing or invalid');if(typeof o.tag!="string")throw new C('JOSE Header "tag" (Authentication Tag) missing or invalid');const f=B(o.iv),g=B(o.tag);return Yr(e,t,n,f,g)}default:throw new K('Invalid or unsupported "alg" (JWE Algorithm) header value')}}function je(e,t,n,o,c){if(c.crit!==void 0&&o.crit===void 0)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!o||o.crit===void 0)return new Set;if(!Array.isArray(o.crit)||o.crit.length===0||o.crit.some(g=>typeof g!="string"||g.length===0))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let f;n!==void 0?f=new Map([...Object.entries(n),...t.entries()]):f=t;for(const g of o.crit){if(!f.has(g))throw new K(`Extension Header Parameter "${g}" is not recognized`);if(c[g]===void 0)throw new e(`Extension Header Parameter "${g}" is missing`);if(f.get(g)&&o[g]===void 0)throw new e(`Extension Header Parameter "${g}" MUST be integrity protected`)}return new Set(o.crit)}const jr=(e,t)=>{if(t!==void 0&&(!Array.isArray(t)||t.some(n=>typeof n!="string")))throw new TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)};var ze=jr;async function Xr(e,t,n){var o;if(!ee(e))throw new C("Flattened JWE must be an object");if(e.protected===void 0&&e.header===void 0&&e.unprotected===void 0)throw new C("JOSE Header missing");if(typeof e.iv!="string")throw new C("JWE Initialization Vector missing or incorrect type");if(typeof e.ciphertext!="string")throw new C("JWE Ciphertext missing or incorrect type");if(typeof e.tag!="string")throw new C("JWE Authentication Tag missing or incorrect type");if(e.protected!==void 0&&typeof e.protected!="string")throw new C("JWE Protected Header incorrect type");if(e.encrypted_key!==void 0&&typeof e.encrypted_key!="string")throw new C("JWE Encrypted Key incorrect type");if(e.aad!==void 0&&typeof e.aad!="string")throw new C("JWE AAD incorrect type");if(e.header!==void 0&&!ee(e.header))throw new C("JWE Shared Unprotected Header incorrect type");if(e.unprotected!==void 0&&!ee(e.unprotected))throw new C("JWE Per-Recipient Unprotected Header incorrect type");let c;if(e.protected)try{const H=B(e.protected);c=JSON.parse(ne.decode(H))}catch{throw new C("JWE Protected Header is invalid")}if(!Ve(c,e.header,e.unprotected))throw new C("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");const f={...c,...e.header,...e.unprotected};if(je(C,new Map,n?.crit,c,f),f.zip!==void 0){if(!c||!c.zip)throw new C('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if(f.zip!=="DEF")throw new K('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}const{alg:g,enc:E}=f;if(typeof g!="string"||!g)throw new C("missing JWE Algorithm (alg) in JWE Header");if(typeof E!="string"||!E)throw new C("missing JWE Encryption Algorithm (enc) in JWE Header");const S=n&&ze("keyManagementAlgorithms",n.keyManagementAlgorithms),v=n&&ze("contentEncryptionAlgorithms",n.contentEncryptionAlgorithms);if(S&&!S.has(g))throw new Je('"alg" (Algorithm) Header Parameter not allowed');if(v&&!v.has(E))throw new Je('"enc" (Encryption Algorithm) Header Parameter not allowed');let u;e.encrypted_key!==void 0&&(u=B(e.encrypted_key));let p=!1;typeof t=="function"&&(t=await t(c,e),p=!0);let m;try{m=await Zr(g,t,u,f,n)}catch(H){if(H instanceof TypeError||H instanceof C||H instanceof K)throw H;m=xr(E)}const T=B(e.iv),_=B(e.tag),D=$.encode((o=e.protected)!==null&&o!==void 0?o:"");let W;e.aad!==void 0?W=se(D,$.encode("."),$.encode(e.aad)):W=D;let R=await Ot(E,m,B(e.ciphertext),T,_,W);f.zip==="DEF"&&(R=await(n?.inflateRaw||Mr)(R));const O={plaintext:R};return e.protected!==void 0&&(O.protectedHeader=c),e.aad!==void 0&&(O.additionalAuthenticatedData=B(e.aad)),e.unprotected!==void 0&&(O.sharedUnprotectedHeader=e.unprotected),e.header!==void 0&&(O.unprotectedHeader=e.header),p?{...O,key:t}:O}async function en(e,t,n){if(e instanceof Uint8Array&&(e=ne.decode(e)),typeof e!="string")throw new C("Compact JWE must be a string or Uint8Array");const{0:o,1:c,2:f,3:g,4:E,length:S}=e.split(".");if(S!==5)throw new C("Invalid Compact JWE");const v=await Xr({ciphertext:g,iv:f||void 0,protected:o||void 0,tag:E||void 0,encrypted_key:c||void 0},t,n),u={plaintext:v.plaintext,protectedHeader:v.protectedHeader};return typeof t=="function"?{...u,key:v.key}:u}const tn=async e=>{if(e instanceof Uint8Array)return{kty:"oct",k:Ae(e)};if(!Z(e))throw new TypeError(V(e,...x,"Uint8Array"));if(!e.extractable)throw new TypeError("non-extractable CryptoKey cannot be exported as a JWK");const{ext:t,key_ops:n,alg:o,use:c,...f}=await P.subtle.exportKey("jwk",e);return f};var rn=tn;async function nn(e){return Br(e)}async function Xe(e){return rn(e)}function Rt(e,t){const n=`SHA-${e.slice(-3)}`;switch(e){case"HS256":case"HS384":case"HS512":return{hash:n,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:n,name:"RSA-PSS",saltLength:e.slice(-3)>>3};case"RS256":case"RS384":case"RS512":return{hash:n,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:n,name:"ECDSA",namedCurve:t.namedCurve};case"EdDSA":return me()&&t.name==="NODE-ED25519"?{name:"NODE-ED25519",namedCurve:"NODE-ED25519"}:{name:t.name};default:throw new K(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}function Ut(e,t,n){if(Z(t))return Sr(t,e,n),t;if(t instanceof Uint8Array){if(!e.startsWith("HS"))throw new TypeError(V(t,...x));return P.subtle.importKey("raw",t,{hash:`SHA-${e.slice(-3)}`,name:"HMAC"},!1,[n])}throw new TypeError(V(t,...x,"Uint8Array"))}const on=async(e,t,n,o)=>{const c=await Ut(e,t,"verify");Ye(e,c);const f=Rt(e,c.algorithm);try{return await P.subtle.verify(f,c,n,o)}catch{return!1}};var an=on;async function sn(e,t,n){var o;if(!ee(e))throw new U("Flattened JWS must be an object");if(e.protected===void 0&&e.header===void 0)throw new U('Flattened JWS must have either of the "protected" or "header" members');if(e.protected!==void 0&&typeof e.protected!="string")throw new U("JWS Protected Header incorrect type");if(e.payload===void 0)throw new U("JWS Payload missing");if(typeof e.signature!="string")throw new U("JWS Signature missing or incorrect type");if(e.header!==void 0&&!ee(e.header))throw new U("JWS Unprotected Header incorrect type");let c={};if(e.protected)try{const W=B(e.protected);c=JSON.parse(ne.decode(W))}catch{throw new U("JWS Protected Header is invalid")}if(!Ve(c,e.header))throw new U("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const f={...c,...e.header},g=je(U,new Map([["b64",!0]]),n?.crit,c,f);let E=!0;if(g.has("b64")&&(E=c.b64,typeof E!="boolean"))throw new U('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:S}=f;if(typeof S!="string"||!S)throw new U('JWS "alg" (Algorithm) Header Parameter missing or invalid');const v=n&&ze("algorithms",n.algorithms);if(v&&!v.has(S))throw new Je('"alg" (Algorithm) Header Parameter not allowed');if(E){if(typeof e.payload!="string")throw new U("JWS Payload must be a string")}else if(typeof e.payload!="string"&&!(e.payload instanceof Uint8Array))throw new U("JWS Payload must be a string or an Uint8Array instance");let u=!1;typeof t=="function"&&(t=await t(c,e),u=!0),Ze(S,t,"verify");const p=se($.encode((o=e.protected)!==null&&o!==void 0?o:""),$.encode("."),typeof e.payload=="string"?$.encode(e.payload):e.payload),m=B(e.signature);if(!await an(S,t,m,p))throw new pr;let _;E?_=B(e.payload):typeof e.payload=="string"?_=$.encode(e.payload):_=e.payload;const D={payload:_};return e.protected!==void 0&&(D.protectedHeader=c),e.header!==void 0&&(D.unprotectedHeader=e.header),u?{...D,key:t}:D}async function cn(e,t,n){if(e instanceof Uint8Array&&(e=ne.decode(e)),typeof e!="string")throw new U("Compact JWS must be a string or Uint8Array");const{0:o,1:c,2:f,length:g}=e.split(".");if(g!==3)throw new U("Invalid Compact JWS");const E=await sn({payload:c,protected:o,signature:f},t,n),S={payload:E.payload,protectedHeader:E.protectedHeader};return typeof t=="function"?{...S,key:E.key}:S}var _e=e=>Math.floor(e.getTime()/1e3);const xt=60,Jt=xt*60,et=Jt*24,un=et*7,ln=et*365.25,dn=/^(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)$/i;var Ce=e=>{const t=dn.exec(e);if(!t)throw new TypeError("Invalid time period format");const n=parseFloat(t[1]);switch(t[2].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":return Math.round(n);case"minute":case"minutes":case"min":case"mins":case"m":return Math.round(n*xt);case"hour":case"hours":case"hr":case"hrs":case"h":return Math.round(n*Jt);case"day":case"days":case"d":return Math.round(n*et);case"week":case"weeks":case"w":return Math.round(n*un);default:return Math.round(n*ln)}};const Et=e=>e.toLowerCase().replace(/^application\//,""),pn=(e,t)=>typeof e=="string"?t.includes(e):Array.isArray(e)?t.some(Set.prototype.has.bind(new Set(e))):!1;var fn=(e,t,n={})=>{const{typ:o}=n;if(o&&(typeof e.typ!="string"||Et(e.typ)!==Et(o)))throw new j('unexpected "typ" JWT header value',"typ","check_failed");let c;try{c=JSON.parse(ne.decode(t))}catch{}if(!ee(c))throw new X("JWT Claims Set must be a top-level JSON object");const{requiredClaims:f=[],issuer:g,subject:E,audience:S,maxTokenAge:v}=n;v!==void 0&&f.push("iat"),S!==void 0&&f.push("aud"),E!==void 0&&f.push("sub"),g!==void 0&&f.push("iss");for(const T of new Set(f.reverse()))if(!(T in c))throw new j(`missing required "${T}" claim`,T,"missing");if(g&&!(Array.isArray(g)?g:[g]).includes(c.iss))throw new j('unexpected "iss" claim value',"iss","check_failed");if(E&&c.sub!==E)throw new j('unexpected "sub" claim value',"sub","check_failed");if(S&&!pn(c.aud,typeof S=="string"?[S]:S))throw new j('unexpected "aud" claim value',"aud","check_failed");let u;switch(typeof n.clockTolerance){case"string":u=Ce(n.clockTolerance);break;case"number":u=n.clockTolerance;break;case"undefined":u=0;break;default:throw new TypeError("Invalid clockTolerance option type")}const{currentDate:p}=n,m=_e(p||new Date);if((c.iat!==void 0||v)&&typeof c.iat!="number")throw new j('"iat" claim must be a number',"iat","invalid");if(c.nbf!==void 0){if(typeof c.nbf!="number")throw new j('"nbf" claim must be a number',"nbf","invalid");if(c.nbf>m+u)throw new j('"nbf" claim timestamp check failed',"nbf","check_failed")}if(c.exp!==void 0){if(typeof c.exp!="number")throw new j('"exp" claim must be a number',"exp","invalid");if(c.exp<=m-u)throw new yt('"exp" claim timestamp check failed',"exp","check_failed")}if(v){const T=m-c.iat,_=typeof v=="number"?v:Ce(v);if(T-u>_)throw new yt('"iat" claim timestamp check failed (too far in the past)',"iat","check_failed");if(T<0-u)throw new j('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}return c};async function hn(e,t,n){var o;const c=await cn(e,t,n);if(!((o=c.protectedHeader.crit)===null||o===void 0)&&o.includes("b64")&&c.protectedHeader.b64===!1)throw new X("JWTs MUST NOT use unencoded payload");const g={payload:fn(c.protectedHeader,c.payload,n),protectedHeader:c.protectedHeader};return typeof t=="function"?{...g,key:c.key}:g}const yn=async(e,t,n)=>{const o=await Ut(e,t,"sign");Ye(e,o);const c=await P.subtle.sign(Rt(e,o.algorithm),o,n);return new Uint8Array(c)};var gn=yn;class mn{constructor(t){if(!(t instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");this._payload=t}setProtectedHeader(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setUnprotectedHeader(t){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=t,this}async sign(t,n){if(!this._protectedHeader&&!this._unprotectedHeader)throw new U("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!Ve(this._protectedHeader,this._unprotectedHeader))throw new U("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const o={...this._protectedHeader,...this._unprotectedHeader},c=je(U,new Map([["b64",!0]]),n?.crit,this._protectedHeader,o);let f=!0;if(c.has("b64")&&(f=this._protectedHeader.b64,typeof f!="boolean"))throw new U('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:g}=o;if(typeof g!="string"||!g)throw new U('JWS "alg" (Algorithm) Header Parameter missing or invalid');Ze(g,t,"sign");let E=this._payload;f&&(E=$.encode(Ae(E)));let S;this._protectedHeader?S=$.encode(Ae(JSON.stringify(this._protectedHeader))):S=$.encode("");const v=se(S,$.encode("."),E),u=await gn(g,t,v),p={signature:Ae(u),payload:""};return f&&(p.payload=ne.decode(E)),this._unprotectedHeader&&(p.header=this._unprotectedHeader),this._protectedHeader&&(p.protected=ne.decode(S)),p}}class vn{constructor(t){this._flattened=new mn(t)}setProtectedHeader(t){return this._flattened.setProtectedHeader(t),this}async sign(t,n){const o=await this._flattened.sign(t,n);if(o.payload===void 0)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${o.protected}.${o.payload}.${o.signature}`}}class wn{constructor(t){if(!ee(t))throw new TypeError("JWT Claims Set MUST be an object");this._payload=t}setIssuer(t){return this._payload={...this._payload,iss:t},this}setSubject(t){return this._payload={...this._payload,sub:t},this}setAudience(t){return this._payload={...this._payload,aud:t},this}setJti(t){return this._payload={...this._payload,jti:t},this}setNotBefore(t){return typeof t=="number"?this._payload={...this._payload,nbf:t}:this._payload={...this._payload,nbf:_e(new Date)+Ce(t)},this}setExpirationTime(t){return typeof t=="number"?this._payload={...this._payload,exp:t}:this._payload={...this._payload,exp:_e(new Date)+Ce(t)},this}setIssuedAt(t){return typeof t>"u"?this._payload={...this._payload,iat:_e(new Date)}:this._payload={...this._payload,iat:t},this}}class En extends wn{setProtectedHeader(t){return this._protectedHeader=t,this}async sign(t,n){var o;const c=new vn($.encode(JSON.stringify(this._payload)));if(c.setProtectedHeader(this._protectedHeader),Array.isArray((o=this._protectedHeader)===null||o===void 0?void 0:o.crit)&&this._protectedHeader.crit.includes("b64")&&this._protectedHeader.b64===!1)throw new X("JWTs MUST NOT use unencoded payload");return c.sign(t,n)}}const Sn=B;function An(e){if(typeof e!="string")throw new X("JWTs must use Compact JWS serialization, JWT must be a string");const{1:t,length:n}=e.split(".");if(n===5)throw new X("Only JWTs using Compact JWS serialization can be decoded");if(n!==3)throw new X("Invalid JWT");if(!t)throw new X("JWTs must contain a payload");let o;try{o=Sn(t)}catch{throw new X("Failed to parse the base64url encoded payload")}let c;try{c=JSON.parse(ne.decode(o))}catch{throw new X("Failed to parse the decoded payload as JSON")}if(!ee(c))throw new X("Invalid JWT Claims Set");return c}function Re(e){var t;const n=(t=e?.modulusLength)!==null&&t!==void 0?t:2048;if(typeof n!="number"||n<2048)throw new K("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");return n}async function bn(e,t){var n,o,c,f;let g,E;switch(e){case"PS256":case"PS384":case"PS512":g={name:"RSA-PSS",hash:`SHA-${e.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:Re(t)},E=["sign","verify"];break;case"RS256":case"RS384":case"RS512":g={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:Re(t)},E=["sign","verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":g={name:"RSA-OAEP",hash:`SHA-${parseInt(e.slice(-3),10)||1}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:Re(t)},E=["decrypt","unwrapKey","encrypt","wrapKey"];break;case"ES256":g={name:"ECDSA",namedCurve:"P-256"},E=["sign","verify"];break;case"ES384":g={name:"ECDSA",namedCurve:"P-384"},E=["sign","verify"];break;case"ES512":g={name:"ECDSA",namedCurve:"P-521"},E=["sign","verify"];break;case"EdDSA":E=["sign","verify"];const S=(n=t?.crv)!==null&&n!==void 0?n:"Ed25519";switch(S){case"Ed25519":case"Ed448":g={name:S};break;default:throw new K("Invalid or unsupported crv option provided")}break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{E=["deriveKey","deriveBits"];const v=(o=t?.crv)!==null&&o!==void 0?o:"P-256";switch(v){case"P-256":case"P-384":case"P-521":{g={name:"ECDH",namedCurve:v};break}case"X25519":case"X448":g={name:v};break;default:throw new K("Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448")}break}default:throw new K('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}try{return await P.subtle.generateKey(g,(c=t?.extractable)!==null&&c!==void 0?c:!1,E)}catch(S){if(g.name==="Ed25519"&&S?.name==="NotSupportedError"&&me())return g={name:"NODE-ED25519",namedCurve:"NODE-ED25519"},await P.subtle.generateKey(g,(f=t?.extractable)!==null&&f!==void 0?f:!1,E);throw S}}async function St(e,t){return bn(e,t)}var _n="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAxOCAxOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cmVjdCB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHJ4PSI5IiBmaWxsPSIjNEU4NjhFIiAvPgogIDxwYXRoCiAgICBkPSJNMTEuMzQ2MiA1LjIzNDg2QzEwLjg5MjkgNS4yMzc5NSAxMC40NDYzIDUuMzQzOCAxMC4wMzk5IDUuNTQ0NDNDOS42MzM1MiA1Ljc0NTA2IDkuMjc3OTUgNi4wMzUyNiA4Ljk5OTk5IDYuMzkzMTNDOC43MjIyNiA2LjAzNTI4IDguMzY2OTIgNS43NDUxMSA3Ljk2MDcyIDUuNTQ0NDZDNy41NTQ1NSA1LjM0MzgzIDcuMTA4MSA1LjIzNzk3IDYuNjU1MDMgNS4yMzQ4NkM0Ljk2NTEzIDUuMjM0ODYgMy41OTEzNCA2LjY4ODcgMy41OTEzNCA4LjQ3OTAxVjEyLjAyNkMzLjU5MTM0IDEyLjIxNzEgMy42NjczMSAxMi40MDA1IDMuODAyNTYgMTIuNTM1N0MzLjkzNzc5IDEyLjY3MDkgNC4xMjEyMyAxMi43NDY5IDQuMzEyNDkgMTIuNzQ2OUM0LjUwMzc1IDEyLjc0NjkgNC42ODcxNyAxMi42NzA5IDQuODIyNDIgMTIuNTM1N0M0Ljk1NzY4IDEyLjQwMDUgNS4wMzM2NSAxMi4yMTcxIDUuMDMzNjUgMTIuMDI2VjguNDc2NjFDNS4wMzM2NSA3LjQ4MTcyIDUuNzYzMjIgNi42NzQzIDYuNjU5ODUgNi42NzQzQzcuNTU2NDggNi42NzQzIDguMjg2MDYgNy40ODQxNCA4LjI4NjA2IDguNDc2NjFWMTIuMDIzNUM4LjI4NjA2IDEyLjIxNDcgOC4zNjIwMyAxMi4zOTgxIDguNDk3MjYgMTIuNTMzM0M4LjYzMjUyIDEyLjY2ODUgOC44MTU5NSAxMi43NDQ1IDkuMDA3MjIgMTIuNzQ0NUM5LjE5ODQ4IDEyLjc0NDUgOS4zODE4OSAxMi42Njg1IDkuNTE3MTUgMTIuNTMzM0M5LjY1MjM4IDEyLjM5ODEgOS43MjgzNyAxMi4yMTQ3IDkuNzI4MzcgMTIuMDIzNVY4LjQ3NjYxQzkuNzI4MzcgNy40ODE3MiAxMC40NTc5IDYuNjc0MyAxMS4zNTQ2IDYuNjc0M0MxMi4yNTEyIDYuNjc0MyAxMi45ODA4IDcuNDg0MTQgMTIuOTgwOCA4LjQ3NjYxVjEyLjAyMzVDMTIuOTgwOCAxMi4yMTQ3IDEzLjA1NjcgMTIuMzk4MSAxMy4xOTIgMTIuNTMzM0MxMy4zMjcyIDEyLjY2ODUgMTMuNTEwNyAxMi43NDQ1IDEzLjcwMTkgMTIuNzQ0NUMxMy44OTMyIDEyLjc0NDUgMTQuMDc2NiAxMi42Njg1IDE0LjIxMTggMTIuNTMzM0MxNC4zNDcxIDEyLjM5ODEgMTQuNDIzMSAxMi4yMTQ3IDE0LjQyMzEgMTIuMDIzNVY4LjQ3NjYxQzE0LjQwOTggNi42ODg3IDEzLjAzNjEgNS4yMzQ4NiAxMS4zNDYyIDUuMjM0ODZaIgogICAgZmlsbD0id2hpdGUiIC8+Cjwvc3ZnPg==",$e=(e=>(e.whileUsingApp="while_using_app",e.untilConnectionDeletion="until_connection_deletion",e))($e||{}),Ie=(e=>(e.invalid_scope="invalid_scope",e.unauthorized_client="unauthorized_client",e.access_denied="access_denied",e.unsupported_response_type="unsupported_response_type",e.server_error="server_error",e.temporarily_unavailable="temporarily_unavailable",e.interaction_required="interaction_required",e.login_required="login_required",e.account_selection_required="account_selection_required",e.consent_required="consent_required",e.invalid_request_uri="invalid_request_uri",e.invalid_request_object="invalid_request_object",e.request_not_supported="request_not_supported",e.request_uri_not_supported="request_uri_not_supported",e.registration_not_supported="registration_not_supported",e.user_cancelled="user_cancelled",e.registration_value_not_supported="registration_value_not_supported",e.subject_syntax_types_not_supported="subject_syntax_types_not_supported",e.invalid_registration_uri="invalid_registration_uri",e.invalid_registration_object="invalid_registration_object",e.validation_failed="validation_failed",e.request_malformed="request_malformed",e.unknown_error="unknown_error",e))(Ie||{});class Y extends Error{constructor(t,n){super(),ht(this,"error"),ht(this,"error_description"),this.error=n||"validation_failed",this.error_description=t}}const Lt=async e=>{const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(f=>f.toString(16).padStart(2,"0")).join("")},Mn=/^did:web:.{1,}:dids:.{1,}/g;function Cn(e){let t="";const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()",o=n.length;let c=0;for(;c<e;)t+=n.charAt(Math.floor(Math.random()*o)),c+=1;return t}const In=e=>{const t=JSON.stringify(e);return window.btoa(t)},Dn=e=>{if(e===null)return;const t=window.atob(e);return JSON.parse(t)},Pn=(e,t)=>{const n=e.split("?");if(n.length>=2){const o=`${encodeURIComponent(t)}=`,c=n[1].split(/[&;]/g);for(let f=c.length;f-- >0;)c[f].lastIndexOf(o,0)!==-1&&c.splice(f,1);return n[0]+(c.length>0?`?${c.join("&")}`:"")}return e},Bt=()=>{localStorage.removeItem("meeData")},zt=()=>{try{const e=localStorage.getItem("meeData"),t=Dn(e);return typeof t>"u"||typeof t.encrypt>"u"?new Y("Internal error"):new Date(t.exp)<new Date?new Y("Session expired"):t}catch{return new Y("Error getting the Local Storage data")}},$t=e=>typeof e.error<"u",Nn=()=>{const e="60000",t=()=>{const n=zt();$t(n)&&n.error_description==="Session expired"&&Bt()};t(),setInterval(()=>{t()},e)},Tn=e=>{try{return JSON.parse(e)}catch{return}};var qt={exports:{}};(function(e){var t=function(n){var o=1e7,c=7,f=9007199254740992,g=_(f),E="0123456789abcdefghijklmnopqrstuvwxyz",S=typeof BigInt=="function";function v(r,i,a,s){return typeof r>"u"?v[0]:typeof i<"u"?+i==10&&!a?A(r):tr(r,i,a,s):A(r)}function u(r,i){this.value=r,this.sign=i,this.isSmall=!1}u.prototype=Object.create(v.prototype);function p(r){this.value=r,this.sign=r<0,this.isSmall=!0}p.prototype=Object.create(v.prototype);function m(r){this.value=r}m.prototype=Object.create(v.prototype);function T(r){return-f<r&&r<f}function _(r){return r<1e7?[r]:r<1e14?[r%1e7,Math.floor(r/1e7)]:[r%1e7,Math.floor(r/1e7)%1e7,Math.floor(r/1e14)]}function D(r){W(r);var i=r.length;if(i<4&&ue(r,g)<0)switch(i){case 0:return 0;case 1:return r[0];case 2:return r[0]+r[1]*o;default:return r[0]+(r[1]+r[2]*o)*o}return r}function W(r){for(var i=r.length;r[--i]===0;);r.length=i+1}function R(r){for(var i=new Array(r),a=-1;++a<r;)i[a]=0;return i}function O(r){return r>0?Math.floor(r):Math.ceil(r)}function H(r,i){var a=r.length,s=i.length,d=new Array(a),l=0,h=o,y,w;for(w=0;w<s;w++)y=r[w]+i[w]+l,l=y>=h?1:0,d[w]=y-l*h;for(;w<a;)y=r[w]+l,l=y===h?1:0,d[w++]=y-l*h;return l>0&&d.push(l),d}function J(r,i){return r.length>=i.length?H(r,i):H(i,r)}function z(r,i){var a=r.length,s=new Array(a),d=o,l,h;for(h=0;h<a;h++)l=r[h]-d+i,i=Math.floor(l/d),s[h]=l-i*d,i+=1;for(;i>0;)s[h++]=i%d,i=Math.floor(i/d);return s}u.prototype.add=function(r){var i=A(r);if(this.sign!==i.sign)return this.subtract(i.negate());var a=this.value,s=i.value;return i.isSmall?new u(z(a,Math.abs(s)),this.sign):new u(J(a,s),this.sign)},u.prototype.plus=u.prototype.add,p.prototype.add=function(r){var i=A(r),a=this.value;if(a<0!==i.sign)return this.subtract(i.negate());var s=i.value;if(i.isSmall){if(T(a+s))return new p(a+s);s=_(Math.abs(s))}return new u(z(s,Math.abs(a)),a<0)},p.prototype.plus=p.prototype.add,m.prototype.add=function(r){return new m(this.value+A(r).value)},m.prototype.plus=m.prototype.add;function q(r,i){var a=r.length,s=i.length,d=new Array(a),l=0,h=o,y,w;for(y=0;y<s;y++)w=r[y]-l-i[y],w<0?(w+=h,l=1):l=0,d[y]=w;for(y=s;y<a;y++){if(w=r[y]-l,w<0)w+=h;else{d[y++]=w;break}d[y]=w}for(;y<a;y++)d[y]=r[y];return W(d),d}function G(r,i,a){var s;return ue(r,i)>=0?s=q(r,i):(s=q(i,r),a=!a),s=D(s),typeof s=="number"?(a&&(s=-s),new p(s)):new u(s,a)}function k(r,i,a){var s=r.length,d=new Array(s),l=-i,h=o,y,w;for(y=0;y<s;y++)w=r[y]+l,l=Math.floor(w/h),w%=h,d[y]=w<0?w+h:w;return d=D(d),typeof d=="number"?(a&&(d=-d),new p(d)):new u(d,a)}u.prototype.subtract=function(r){var i=A(r);if(this.sign!==i.sign)return this.add(i.negate());var a=this.value,s=i.value;return i.isSmall?k(a,Math.abs(s),this.sign):G(a,s,this.sign)},u.prototype.minus=u.prototype.subtract,p.prototype.subtract=function(r){var i=A(r),a=this.value;if(a<0!==i.sign)return this.add(i.negate());var s=i.value;return i.isSmall?new p(a-s):k(s,Math.abs(a),a>=0)},p.prototype.minus=p.prototype.subtract,m.prototype.subtract=function(r){return new m(this.value-A(r).value)},m.prototype.minus=m.prototype.subtract,u.prototype.negate=function(){return new u(this.value,!this.sign)},p.prototype.negate=function(){var r=this.sign,i=new p(-this.value);return i.sign=!r,i},m.prototype.negate=function(){return new m(-this.value)},u.prototype.abs=function(){return new u(this.value,!1)},p.prototype.abs=function(){return new p(Math.abs(this.value))},m.prototype.abs=function(){return new m(this.value>=0?this.value:-this.value)};function oe(r,i){var a=r.length,s=i.length,d=a+s,l=R(d),h=o,y,w,b,I,M;for(b=0;b<a;++b){I=r[b];for(var N=0;N<s;++N)M=i[N],y=I*M+l[b+N],w=Math.floor(y/h),l[b+N]=y-w*h,l[b+N+1]+=w}return W(l),l}function he(r,i){var a=r.length,s=new Array(a),d=o,l=0,h,y;for(y=0;y<a;y++)h=r[y]*i+l,l=Math.floor(h/d),s[y]=h-l*d;for(;l>0;)s[y++]=l%d,l=Math.floor(l/d);return s}function rt(r,i){for(var a=[];i-- >0;)a.push(0);return a.concat(r)}function ve(r,i){var a=Math.max(r.length,i.length);if(a<=30)return oe(r,i);a=Math.ceil(a/2);var s=r.slice(a),d=r.slice(0,a),l=i.slice(a),h=i.slice(0,a),y=ve(d,h),w=ve(s,l),b=ve(J(d,s),J(h,l)),I=J(J(y,rt(q(q(b,y),w),a)),rt(w,2*a));return W(I),I}function Vt(r,i){return-.012*r-.012*i+15e-6*r*i>0}u.prototype.multiply=function(r){var i=A(r),a=this.value,s=i.value,d=this.sign!==i.sign,l;if(i.isSmall){if(s===0)return v[0];if(s===1)return this;if(s===-1)return this.negate();if(l=Math.abs(s),l<o)return new u(he(a,l),d);s=_(l)}return Vt(a.length,s.length)?new u(ve(a,s),d):new u(oe(a,s),d)},u.prototype.times=u.prototype.multiply;function nt(r,i,a){return r<o?new u(he(i,r),a):new u(oe(i,_(r)),a)}p.prototype._multiplyBySmall=function(r){return T(r.value*this.value)?new p(r.value*this.value):nt(Math.abs(r.value),_(Math.abs(this.value)),this.sign!==r.sign)},u.prototype._multiplyBySmall=function(r){return r.value===0?v[0]:r.value===1?this:r.value===-1?this.negate():nt(Math.abs(r.value),this.value,this.sign!==r.sign)},p.prototype.multiply=function(r){return A(r)._multiplyBySmall(this)},p.prototype.times=p.prototype.multiply,m.prototype.multiply=function(r){return new m(this.value*A(r).value)},m.prototype.times=m.prototype.multiply;function it(r){var i=r.length,a=R(i+i),s=o,d,l,h,y,w;for(h=0;h<i;h++){y=r[h],l=0-y*y;for(var b=h;b<i;b++)w=r[b],d=2*(y*w)+a[h+b]+l,l=Math.floor(d/s),a[h+b]=d-l*s;a[h+i]=l}return W(a),a}u.prototype.square=function(){return new u(it(this.value),!1)},p.prototype.square=function(){var r=this.value*this.value;return T(r)?new p(r):new u(it(_(Math.abs(this.value))),!1)},m.prototype.square=function(r){return new m(this.value*this.value)};function Yt(r,i){var a=r.length,s=i.length,d=o,l=R(i.length),h=i[s-1],y=Math.ceil(d/(2*h)),w=he(r,y),b=he(i,y),I,M,N,Q,F,Ke,We;for(w.length<=a&&w.push(0),b.push(0),h=b[s-1],M=a-s;M>=0;M--){for(I=d-1,w[M+s]!==h&&(I=Math.floor((w[M+s]*d+w[M+s-1])/h)),N=0,Q=0,Ke=b.length,F=0;F<Ke;F++)N+=I*b[F],We=Math.floor(N/d),Q+=w[M+F]-(N-We*d),N=We,Q<0?(w[M+F]=Q+d,Q=-1):(w[M+F]=Q,Q=0);for(;Q!==0;){for(I-=1,N=0,F=0;F<Ke;F++)N+=w[M+F]-d+b[F],N<0?(w[M+F]=N+d,N=0):(w[M+F]=N,N=1);Q+=N}l[M]=I}return w=ot(w,y)[0],[D(l),D(w)]}function Zt(r,i){for(var a=r.length,s=i.length,d=[],l=[],h=o,y,w,b,I,M;a;){if(l.unshift(r[--a]),W(l),ue(l,i)<0){d.push(0);continue}w=l.length,b=l[w-1]*h+l[w-2],I=i[s-1]*h+i[s-2],w>s&&(b=(b+1)*h),y=Math.ceil(b/I);do{if(M=he(i,y),ue(M,l)<=0)break;y--}while(y);d.push(y),l=q(l,M)}return d.reverse(),[D(d),D(l)]}function ot(r,i){var a=r.length,s=R(a),d=o,l,h,y,w;for(y=0,l=a-1;l>=0;--l)w=y*d+r[l],h=O(w/i),y=w-h*i,s[l]=h|0;return[s,y|0]}function ce(r,i){var a,s=A(i);if(S)return[new m(r.value/s.value),new m(r.value%s.value)];var d=r.value,l=s.value,h;if(l===0)throw new Error("Cannot divide by zero");if(r.isSmall)return s.isSmall?[new p(O(d/l)),new p(d%l)]:[v[0],r];if(s.isSmall){if(l===1)return[r,v[0]];if(l==-1)return[r.negate(),v[0]];var y=Math.abs(l);if(y<o){a=ot(d,y),h=D(a[0]);var w=a[1];return r.sign&&(w=-w),typeof h=="number"?(r.sign!==s.sign&&(h=-h),[new p(h),new p(w)]):[new u(h,r.sign!==s.sign),new p(w)]}l=_(y)}var b=ue(d,l);if(b===-1)return[v[0],r];if(b===0)return[v[r.sign===s.sign?1:-1],v[0]];d.length+l.length<=200?a=Yt(d,l):a=Zt(d,l),h=a[0];var I=r.sign!==s.sign,M=a[1],N=r.sign;return typeof h=="number"?(I&&(h=-h),h=new p(h)):h=new u(h,I),typeof M=="number"?(N&&(M=-M),M=new p(M)):M=new u(M,N),[h,M]}u.prototype.divmod=function(r){var i=ce(this,r);return{quotient:i[0],remainder:i[1]}},m.prototype.divmod=p.prototype.divmod=u.prototype.divmod,u.prototype.divide=function(r){return ce(this,r)[0]},m.prototype.over=m.prototype.divide=function(r){return new m(this.value/A(r).value)},p.prototype.over=p.prototype.divide=u.prototype.over=u.prototype.divide,u.prototype.mod=function(r){return ce(this,r)[1]},m.prototype.mod=m.prototype.remainder=function(r){return new m(this.value%A(r).value)},p.prototype.remainder=p.prototype.mod=u.prototype.remainder=u.prototype.mod,u.prototype.pow=function(r){var i=A(r),a=this.value,s=i.value,d,l,h;if(s===0)return v[1];if(a===0)return v[0];if(a===1)return v[1];if(a===-1)return i.isEven()?v[1]:v[-1];if(i.sign)return v[0];if(!i.isSmall)throw new Error("The exponent "+i.toString()+" is too large.");if(this.isSmall&&T(d=Math.pow(a,s)))return new p(O(d));for(l=this,h=v[1];s&!0&&(h=h.times(l),--s),s!==0;)s/=2,l=l.square();return h},p.prototype.pow=u.prototype.pow,m.prototype.pow=function(r){var i=A(r),a=this.value,s=i.value,d=BigInt(0),l=BigInt(1),h=BigInt(2);if(s===d)return v[1];if(a===d)return v[0];if(a===l)return v[1];if(a===BigInt(-1))return i.isEven()?v[1]:v[-1];if(i.isNegative())return new m(d);for(var y=this,w=v[1];(s&l)===l&&(w=w.times(y),--s),s!==d;)s/=h,y=y.square();return w},u.prototype.modPow=function(r,i){if(r=A(r),i=A(i),i.isZero())throw new Error("Cannot take modPow with modulus 0");var a=v[1],s=this.mod(i);for(r.isNegative()&&(r=r.multiply(v[-1]),s=s.modInv(i));r.isPositive();){if(s.isZero())return v[0];r.isOdd()&&(a=a.multiply(s).mod(i)),r=r.divide(2),s=s.square().mod(i)}return a},m.prototype.modPow=p.prototype.modPow=u.prototype.modPow;function ue(r,i){if(r.length!==i.length)return r.length>i.length?1:-1;for(var a=r.length-1;a>=0;a--)if(r[a]!==i[a])return r[a]>i[a]?1:-1;return 0}u.prototype.compareAbs=function(r){var i=A(r),a=this.value,s=i.value;return i.isSmall?1:ue(a,s)},p.prototype.compareAbs=function(r){var i=A(r),a=Math.abs(this.value),s=i.value;return i.isSmall?(s=Math.abs(s),a===s?0:a>s?1:-1):-1},m.prototype.compareAbs=function(r){var i=this.value,a=A(r).value;return i=i>=0?i:-i,a=a>=0?a:-a,i===a?0:i>a?1:-1},u.prototype.compare=function(r){if(r===1/0)return-1;if(r===-1/0)return 1;var i=A(r),a=this.value,s=i.value;return this.sign!==i.sign?i.sign?1:-1:i.isSmall?this.sign?-1:1:ue(a,s)*(this.sign?-1:1)},u.prototype.compareTo=u.prototype.compare,p.prototype.compare=function(r){if(r===1/0)return-1;if(r===-1/0)return 1;var i=A(r),a=this.value,s=i.value;return i.isSmall?a==s?0:a>s?1:-1:a<0!==i.sign?a<0?-1:1:a<0?1:-1},p.prototype.compareTo=p.prototype.compare,m.prototype.compare=function(r){if(r===1/0)return-1;if(r===-1/0)return 1;var i=this.value,a=A(r).value;return i===a?0:i>a?1:-1},m.prototype.compareTo=m.prototype.compare,u.prototype.equals=function(r){return this.compare(r)===0},m.prototype.eq=m.prototype.equals=p.prototype.eq=p.prototype.equals=u.prototype.eq=u.prototype.equals,u.prototype.notEquals=function(r){return this.compare(r)!==0},m.prototype.neq=m.prototype.notEquals=p.prototype.neq=p.prototype.notEquals=u.prototype.neq=u.prototype.notEquals,u.prototype.greater=function(r){return this.compare(r)>0},m.prototype.gt=m.prototype.greater=p.prototype.gt=p.prototype.greater=u.prototype.gt=u.prototype.greater,u.prototype.lesser=function(r){return this.compare(r)<0},m.prototype.lt=m.prototype.lesser=p.prototype.lt=p.prototype.lesser=u.prototype.lt=u.prototype.lesser,u.prototype.greaterOrEquals=function(r){return this.compare(r)>=0},m.prototype.geq=m.prototype.greaterOrEquals=p.prototype.geq=p.prototype.greaterOrEquals=u.prototype.geq=u.prototype.greaterOrEquals,u.prototype.lesserOrEquals=function(r){return this.compare(r)<=0},m.prototype.leq=m.prototype.lesserOrEquals=p.prototype.leq=p.prototype.lesserOrEquals=u.prototype.leq=u.prototype.lesserOrEquals,u.prototype.isEven=function(){return(this.value[0]&1)===0},p.prototype.isEven=function(){return(this.value&1)===0},m.prototype.isEven=function(){return(this.value&BigInt(1))===BigInt(0)},u.prototype.isOdd=function(){return(this.value[0]&1)===1},p.prototype.isOdd=function(){return(this.value&1)===1},m.prototype.isOdd=function(){return(this.value&BigInt(1))===BigInt(1)},u.prototype.isPositive=function(){return!this.sign},p.prototype.isPositive=function(){return this.value>0},m.prototype.isPositive=p.prototype.isPositive,u.prototype.isNegative=function(){return this.sign},p.prototype.isNegative=function(){return this.value<0},m.prototype.isNegative=p.prototype.isNegative,u.prototype.isUnit=function(){return!1},p.prototype.isUnit=function(){return Math.abs(this.value)===1},m.prototype.isUnit=function(){return this.abs().value===BigInt(1)},u.prototype.isZero=function(){return!1},p.prototype.isZero=function(){return this.value===0},m.prototype.isZero=function(){return this.value===BigInt(0)},u.prototype.isDivisibleBy=function(r){var i=A(r);return i.isZero()?!1:i.isUnit()?!0:i.compareAbs(2)===0?this.isEven():this.mod(i).isZero()},m.prototype.isDivisibleBy=p.prototype.isDivisibleBy=u.prototype.isDivisibleBy;function at(r){var i=r.abs();if(i.isUnit())return!1;if(i.equals(2)||i.equals(3)||i.equals(5))return!0;if(i.isEven()||i.isDivisibleBy(3)||i.isDivisibleBy(5))return!1;if(i.lesser(49))return!0}function Pe(r,i){for(var a=r.prev(),s=a,d=0,l,h,y;s.isEven();)s=s.divide(2),d++;e:for(h=0;h<i.length;h++)if(!r.lesser(i[h])&&(y=t(i[h]).modPow(s,r),!(y.isUnit()||y.equals(a)))){for(l=d-1;l!=0;l--){if(y=y.square().mod(r),y.isUnit())return!1;if(y.equals(a))continue e}return!1}return!0}u.prototype.isPrime=function(r){var i=at(this);if(i!==n)return i;var a=this.abs(),s=a.bitLength();if(s<=64)return Pe(a,[2,3,5,7,11,13,17,19,23,29,31,37]);for(var d=Math.log(2)*s.toJSNumber(),l=Math.ceil(r===!0?2*Math.pow(d,2):d),h=[],y=0;y<l;y++)h.push(t(y+2));return Pe(a,h)},m.prototype.isPrime=p.prototype.isPrime=u.prototype.isPrime,u.prototype.isProbablePrime=function(r,i){var a=at(this);if(a!==n)return a;for(var s=this.abs(),d=r===n?5:r,l=[],h=0;h<d;h++)l.push(t.randBetween(2,s.minus(2),i));return Pe(s,l)},m.prototype.isProbablePrime=p.prototype.isProbablePrime=u.prototype.isProbablePrime,u.prototype.modInv=function(r){for(var i=t.zero,a=t.one,s=A(r),d=this.abs(),l,h,y;!d.isZero();)l=s.divide(d),h=i,y=s,i=a,s=d,a=h.subtract(l.multiply(a)),d=y.subtract(l.multiply(d));if(!s.isUnit())throw new Error(this.toString()+" and "+r.toString()+" are not co-prime");return i.compare(0)===-1&&(i=i.add(r)),this.isNegative()?i.negate():i},m.prototype.modInv=p.prototype.modInv=u.prototype.modInv,u.prototype.next=function(){var r=this.value;return this.sign?k(r,1,this.sign):new u(z(r,1),this.sign)},p.prototype.next=function(){var r=this.value;return r+1<f?new p(r+1):new u(g,!1)},m.prototype.next=function(){return new m(this.value+BigInt(1))},u.prototype.prev=function(){var r=this.value;return this.sign?new u(z(r,1),!0):k(r,1,this.sign)},p.prototype.prev=function(){var r=this.value;return r-1>-f?new p(r-1):new u(g,!0)},m.prototype.prev=function(){return new m(this.value-BigInt(1))};for(var te=[1];2*te[te.length-1]<=o;)te.push(2*te[te.length-1]);var ye=te.length,le=te[ye-1];function st(r){return Math.abs(r)<=o}u.prototype.shiftLeft=function(r){var i=A(r).toJSNumber();if(!st(i))throw new Error(String(i)+" is too large for shifting.");if(i<0)return this.shiftRight(-i);var a=this;if(a.isZero())return a;for(;i>=ye;)a=a.multiply(le),i-=ye-1;return a.multiply(te[i])},m.prototype.shiftLeft=p.prototype.shiftLeft=u.prototype.shiftLeft,u.prototype.shiftRight=function(r){var i,a=A(r).toJSNumber();if(!st(a))throw new Error(String(a)+" is too large for shifting.");if(a<0)return this.shiftLeft(-a);for(var s=this;a>=ye;){if(s.isZero()||s.isNegative()&&s.isUnit())return s;i=ce(s,le),s=i[1].isNegative()?i[0].prev():i[0],a-=ye-1}return i=ce(s,te[a]),i[1].isNegative()?i[0].prev():i[0]},m.prototype.shiftRight=p.prototype.shiftRight=u.prototype.shiftRight;function Ne(r,i,a){i=A(i);for(var s=r.isNegative(),d=i.isNegative(),l=s?r.not():r,h=d?i.not():i,y=0,w=0,b=null,I=null,M=[];!l.isZero()||!h.isZero();)b=ce(l,le),y=b[1].toJSNumber(),s&&(y=le-1-y),I=ce(h,le),w=I[1].toJSNumber(),d&&(w=le-1-w),l=b[0],h=I[0],M.push(a(y,w));for(var N=a(s?1:0,d?1:0)!==0?t(-1):t(0),Q=M.length-1;Q>=0;Q-=1)N=N.multiply(le).add(t(M[Q]));return N}u.prototype.not=function(){return this.negate().prev()},m.prototype.not=p.prototype.not=u.prototype.not,u.prototype.and=function(r){return Ne(this,r,function(i,a){return i&a})},m.prototype.and=p.prototype.and=u.prototype.and,u.prototype.or=function(r){return Ne(this,r,function(i,a){return i|a})},m.prototype.or=p.prototype.or=u.prototype.or,u.prototype.xor=function(r){return Ne(this,r,function(i,a){return i^a})},m.prototype.xor=p.prototype.xor=u.prototype.xor;var Te=1<<30,jt=(o&-o)*(o&-o)|Te;function we(r){var i=r.value,a=typeof i=="number"?i|Te:typeof i=="bigint"?i|BigInt(Te):i[0]+i[1]*o|jt;return a&-a}function ct(r,i){if(i.compareTo(r)<=0){var a=ct(r,i.square(i)),s=a.p,d=a.e,l=s.multiply(i);return l.compareTo(r)<=0?{p:l,e:d*2+1}:{p:s,e:d*2}}return{p:t(1),e:0}}u.prototype.bitLength=function(){var r=this;return r.compareTo(t(0))<0&&(r=r.negate().subtract(t(1))),r.compareTo(t(0))===0?t(0):t(ct(r,t(2)).e).add(t(1))},m.prototype.bitLength=p.prototype.bitLength=u.prototype.bitLength;function ut(r,i){return r=A(r),i=A(i),r.greater(i)?r:i}function Oe(r,i){return r=A(r),i=A(i),r.lesser(i)?r:i}function lt(r,i){if(r=A(r).abs(),i=A(i).abs(),r.equals(i))return r;if(r.isZero())return i;if(i.isZero())return r;for(var a=v[1],s,d;r.isEven()&&i.isEven();)s=Oe(we(r),we(i)),r=r.divide(s),i=i.divide(s),a=a.multiply(s);for(;r.isEven();)r=r.divide(we(r));do{for(;i.isEven();)i=i.divide(we(i));r.greater(i)&&(d=i,i=r,r=d),i=i.subtract(r)}while(!i.isZero());return a.isUnit()?r:r.multiply(a)}function Xt(r,i){return r=A(r).abs(),i=A(i).abs(),r.divide(lt(r,i)).multiply(i)}function er(r,i,a){r=A(r),i=A(i);var s=a||Math.random,d=Oe(r,i),l=ut(r,i),h=l.subtract(d).add(1);if(h.isSmall)return d.add(Math.floor(s()*h));for(var y=ge(h,o).value,w=[],b=!0,I=0;I<y.length;I++){var M=b?y[I]+(I+1<y.length?y[I+1]/o:0):o,N=O(s()*M);w.push(N),N<y[I]&&(b=!1)}return d.add(v.fromArray(w,o,!1))}var tr=function(r,i,a,s){a=a||E,r=String(r),s||(r=r.toLowerCase(),a=a.toLowerCase());var d=r.length,l,h=Math.abs(i),y={};for(l=0;l<a.length;l++)y[a[l]]=l;for(l=0;l<d;l++){var w=r[l];if(w!=="-"&&w in y&&y[w]>=h){if(w==="1"&&h===1)continue;throw new Error(w+" is not a valid digit in base "+i+".")}}i=A(i);var b=[],I=r[0]==="-";for(l=I?1:0;l<r.length;l++){var w=r[l];if(w in y)b.push(A(y[w]));else if(w==="<"){var M=l;do l++;while(r[l]!==">"&&l<r.length);b.push(A(r.slice(M+1,l)))}else throw new Error(w+" is not a valid character")}return dt(b,i,I)};function dt(r,i,a){var s=v[0],d=v[1],l;for(l=r.length-1;l>=0;l--)s=s.add(r[l].times(d)),d=d.times(i);return a?s.negate():s}function rr(r,i){return i=i||E,r<i.length?i[r]:"<"+r+">"}function ge(r,i){if(i=t(i),i.isZero()){if(r.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(i.equals(-1)){if(r.isZero())return{value:[0],isNegative:!1};if(r.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-r.toJSNumber())).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var a=Array.apply(null,Array(r.toJSNumber()-1)).map(Array.prototype.valueOf,[0,1]);return a.unshift([1]),{value:[].concat.apply([],a),isNegative:!1}}var s=!1;if(r.isNegative()&&i.isPositive()&&(s=!0,r=r.abs()),i.isUnit())return r.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(r.toJSNumber())).map(Number.prototype.valueOf,1),isNegative:s};for(var d=[],l=r,h;l.isNegative()||l.compareAbs(i)>=0;){h=l.divmod(i),l=h.quotient;var y=h.remainder;y.isNegative()&&(y=i.minus(y).abs(),l=l.next()),d.push(y.toJSNumber())}return d.push(l.toJSNumber()),{value:d.reverse(),isNegative:s}}function pt(r,i,a){var s=ge(r,i);return(s.isNegative?"-":"")+s.value.map(function(d){return rr(d,a)}).join("")}u.prototype.toArray=function(r){return ge(this,r)},p.prototype.toArray=function(r){return ge(this,r)},m.prototype.toArray=function(r){return ge(this,r)},u.prototype.toString=function(r,i){if(r===n&&(r=10),r!==10)return pt(this,r,i);for(var a=this.value,s=a.length,d=String(a[--s]),l="0000000",h;--s>=0;)h=String(a[s]),d+=l.slice(h.length)+h;var y=this.sign?"-":"";return y+d},p.prototype.toString=function(r,i){return r===n&&(r=10),r!=10?pt(this,r,i):String(this.value)},m.prototype.toString=p.prototype.toString,m.prototype.toJSON=u.prototype.toJSON=p.prototype.toJSON=function(){return this.toString()},u.prototype.valueOf=function(){return parseInt(this.toString(),10)},u.prototype.toJSNumber=u.prototype.valueOf,p.prototype.valueOf=function(){return this.value},p.prototype.toJSNumber=p.prototype.valueOf,m.prototype.valueOf=m.prototype.toJSNumber=function(){return parseInt(this.toString(),10)};function ft(r){if(T(+r)){var i=+r;if(i===O(i))return S?new m(BigInt(i)):new p(i);throw new Error("Invalid integer: "+r)}var a=r[0]==="-";a&&(r=r.slice(1));var s=r.split(/e/i);if(s.length>2)throw new Error("Invalid integer: "+s.join("e"));if(s.length===2){var d=s[1];if(d[0]==="+"&&(d=d.slice(1)),d=+d,d!==O(d)||!T(d))throw new Error("Invalid integer: "+d+" is not a valid exponent.");var l=s[0],h=l.indexOf(".");if(h>=0&&(d-=l.length-h-1,l=l.slice(0,h)+l.slice(h+1)),d<0)throw new Error("Cannot include negative exponent part for integers");l+=new Array(d+1).join("0"),r=l}var y=/^([0-9][0-9]*)$/.test(r);if(!y)throw new Error("Invalid integer: "+r);if(S)return new m(BigInt(a?"-"+r:r));for(var w=[],b=r.length,I=c,M=b-I;b>0;)w.push(+r.slice(M,b)),M-=I,M<0&&(M=0),b-=I;return W(w),new u(w,a)}function nr(r){if(S)return new m(BigInt(r));if(T(r)){if(r!==O(r))throw new Error(r+" is not an integer.");return new p(r)}return ft(r.toString())}function A(r){return typeof r=="number"?nr(r):typeof r=="string"?ft(r):typeof r=="bigint"?new m(r):r}for(var de=0;de<1e3;de++)v[de]=A(de),de>0&&(v[-de]=A(-de));return v.one=v[1],v.zero=v[0],v.minusOne=v[-1],v.max=ut,v.min=Oe,v.gcd=lt,v.lcm=Xt,v.isInstance=function(r){return r instanceof u||r instanceof p||r instanceof m},v.randBetween=er,v.fromArray=function(r,i,a){return dt(r.map(A),A(i||10),a)},v}();e.hasOwnProperty("exports")&&(e.exports=t)})(qt);var tt=qt.exports;function On(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),o=0;o<n.length;o++)n[o]=255;for(var c=0;c<e.length;c++){var f=e.charAt(c),g=f.charCodeAt(0);if(n[g]!==255)throw new TypeError(f+" is ambiguous");n[g]=c}var E=e.length,S=e.charAt(0),v=Math.log(E)/Math.log(256),u=Math.log(256)/Math.log(E);function p(_){if(_ instanceof Uint8Array||(ArrayBuffer.isView(_)?_=new Uint8Array(_.buffer,_.byteOffset,_.byteLength):Array.isArray(_)&&(_=Uint8Array.from(_))),!(_ instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(_.length===0)return"";for(var D=0,W=0,R=0,O=_.length;R!==O&&_[R]===0;)R++,D++;for(var H=(O-R)*u+1>>>0,J=new Uint8Array(H);R!==O;){for(var z=_[R],q=0,G=H-1;(z!==0||q<W)&&G!==-1;G--,q++)z+=256*J[G]>>>0,J[G]=z%E>>>0,z=z/E>>>0;if(z!==0)throw new Error("Non-zero carry");W=q,R++}for(var k=H-W;k!==H&&J[k]===0;)k++;for(var oe=S.repeat(D);k<H;++k)oe+=e.charAt(J[k]);return oe}function m(_){if(typeof _!="string")throw new TypeError("Expected String");if(_.length===0)return new Uint8Array;var D=0;if(_[D]!==" "){for(var W=0,R=0;_[D]===S;)W++,D++;for(var O=(_.length-D)*v+1>>>0,H=new Uint8Array(O);_[D];){var J=n[_.charCodeAt(D)];if(J===255)return;for(var z=0,q=O-1;(J!==0||z<R)&&q!==-1;q--,z++)J+=E*H[q]>>>0,H[q]=J%256>>>0,J=J/256>>>0;if(J!==0)throw new Error("Non-zero carry");R=z,D++}if(_[D]!==" "){for(var G=O-R;G!==O&&H[G]===0;)G++;for(var k=new Uint8Array(W+(O-G)),oe=W;G!==O;)k[oe++]=H[G++];return k}}}function T(_){var D=m(_);if(D)return D;throw new Error(`Non-${t} character`)}return{encode:p,decodeUnsafe:m,decode:T}}var Kn=On,Wn=Kn;const Hn=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")};class Rn{constructor(t,n,o){this.name=t,this.prefix=n,this.baseEncode=o}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class Un{constructor(t,n,o){if(this.name=t,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=o}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return kt(this,t)}}class xn{constructor(t){this.decoders=t}or(t){return kt(this,t)}decode(t){const n=t[0],o=this.decoders[n];if(o)return o.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const kt=(e,t)=>new xn({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class Jn{constructor(t,n,o,c){this.name=t,this.prefix=n,this.baseEncode=o,this.baseDecode=c,this.encoder=new Rn(t,n,o),this.decoder=new Un(t,n,c)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const Ln=({name:e,prefix:t,encode:n,decode:o})=>new Jn(e,t,n,o),Ft=({prefix:e,name:t,alphabet:n})=>{const{encode:o,decode:c}=Wn(n,t);return Ln({prefix:e,name:t,encode:o,decode:f=>Hn(c(f))})},Bn=Ft({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});Ft({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});const At=[128,36],Ee=tt(2),qe=Ee.pow(256).subtract(Ee.pow(224)).add(Ee.pow(192)).add(Ee.pow(96)).subtract(1),zn=tt("41058363725152142129326129780047268409114441015993725554835256314039467401291"),$n=qe.add(1).divide(4);function bt(e,t){let n=`${e}`;for(;n.length<t;)n=`0${n}`;return n}function qn(e){return[...new Uint8Array(e)].map(t=>t.toString(16).padStart(2,"0")).join("")}const kn=e=>{var t;const n=(t=e.match(/.{1,2}/g))==null?void 0:t.map(c=>parseInt(c,16));if(typeof n>"u")throw new Error("Hex string invalid");return Uint8Array.from(n)};function Fn(e){const t=Number(e[1])-2,n=tt(e.substring(2),16);let o=n.pow(3).subtract(n.multiply(3)).add(zn).modPow($n,qe);return o.mod(2).toJSNumber()!==t&&(o=qe.subtract(o)),`04${bt(n.toString(16),64)}${bt(o.toString(16),64)}`}const Gn=async e=>{try{if(typeof e.sub>"u")return null;const t=e.sub;if(!t.startsWith("did:key"))return null;const n=t.split(":")[2],o=Bn.decode(n);if(o[0]===At[0]&&o[1]===At[1]){const c=o.slice(2,o.length);if(c.length===33||c.length===64||c.length===65){const f=Fn(qn(c)),g=await crypto.subtle.importKey("raw",kn(f),{name:"ECDSA",namedCurve:"P-256"},!0,["verify"]);return await Xe(g)}}return null}catch(t){return console.log(t),null}},Qn=async e=>{var t;try{if(typeof e.sub>"u"||!Mn.test(e.sub))return null;const n=(t=e.sub)==null?void 0:t.split("did:web:");if(typeof n>"u"||n.length!==2)return null;const c=`https://${n[1].replaceAll(":","/")}/did.json`,f=await fetch(c).then(E=>E.json()),g=f.verificationMethod.find(E=>E.type==="JsonWebKey2020");return typeof g>"u"||f.id!==e.sub?null:g.publicKeyJwk}catch{return null}};function Vn(e){const{aud:t,exp:n,iat:o,jti:c,nbf:f,sub:g,nonce:E,...S}=e,v=S,u={...v};return Object.keys(v).forEach(p=>{const m=Tn(v[p]);typeof m<"u"&&(u[p]=m)}),u}const Yn=async e=>{var t,n;switch(!0){case((t=e.sub)==null?void 0:t.startsWith("did:web")):return Qn(e);case((n=e.sub)==null?void 0:n.startsWith("did:key")):return Gn(e);default:return null}};async function Zn(e,t){try{const n=zt();if(Bt(),$t(n))return{error:n};const o=await Fr(n.encrypt,"RSA-OAEP"),c=await en(e,o),f=new TextDecoder().decode(c.plaintext),g=An(f),E=await Yn(g);if(E===null)return{error:new Y("Can not get jwk from payload")};const S=await Ht(E,"ES256"),v=await hn(f,S,{audience:t}),{payload:u}=v;return typeof u.error<"u"?{error:new Y(u.error)}:u.iss!==u.sub?{error:new Y("iss should be equal to sub")}:typeof n>"u"||n?.nonce===null?{error:new Y("No nonce found")}:await Lt(n.nonce)!==u.nonce?{error:new Y("Nonce is not valid")}:{data:Vn(u)}}catch(n){return{error:new Y(n)}}}async function jn(e,t,n,o){if(t===null||typeof t.redirect_uri>"u")throw new Y("Please provide valid redirect url",Ie.request_malformed);return await new En({...e}).setProtectedHeader({alg:"ES256",jwk:o}).setIssuedAt().setAudience(t?.redirect_uri).sign(n)}const Xn=async()=>{const e=await St("ES256",{extractable:!0}),t=await St("RSA-OAEP",{extractable:!0});return{sign:e,encrypt:t}},ei=async e=>await Xe(e),_t=async e=>await nn(e),Mt="https://auth.mee.foundation/",ti="authorize";let pe=null,ke=null,Fe=null;const Ge=Cn(50),ri=e=>{const o=window.location.search.substring(1).split("&").find(c=>c.split("=")[0]===e);return o?.split("=")[1]},Gt=()=>{try{const e="2";if(Ge!==null&&Fe!==null){const t=Date.now()+36e5*e,n=In({nonce:Ge,...Fe,exp:t});localStorage.setItem("meeData",n)}}finally{pe!==null&&ke!==null&&window.open(pe.client_id?`${Mt}${ti}?scope=openid&request=${ke}`:`${Mt}app`,"_blank")}},ni="#111827",ii=async e=>{const t=document.getElementById(e),n=document.createElement("button"),o=document.createElement("img");o.src=_n,o.alt="Mee",o.style.width="18px",o.style.height="18px";const c=document.createElement("p");o.className="meeLogo",c.className="meeText",n.className="meeButton",c.innerHTML="Connect with Mee",c.style.fontWeight="700",c.style.margin="0px",c.style.fontSize="14px",c.style.color=ni,n.style.display="flex",n.style.flexDirection="row",n.style.alignItems="center",n.style.justifyContent="center",n.style.width="100%",n.style.gap="8px",n.style.paddingLeft="8px",n.style.paddingRight="16px",n.style.borderRadius="3px",n.style.border="0px solid #808080",n.style.backgroundColor="#FFF",n.style.paddingTop="9px",n.style.paddingBottom="9px",n.addEventListener("mouseover",()=>{n.style.boxShadow="0px 4px 6px -2px #0000000D, 0px 10px 15px -3px #0000001A"}),n.addEventListener("mouseleave",()=>{n.style.boxShadow=""}),n.addEventListener("click",()=>Gt()),n.appendChild(o),n.appendChild(c),t?.appendChild(n)},Ct=()=>{window.history.replaceState({},document.title,Pn(window.location.href,"id_token"))},oi=async(e,t)=>{Nn(),typeof e.container_id<"u"&&ii(e.container_id);const n=await Xn(),o=await ei(n.encrypt.publicKey),{container_id:c,...f}=e;pe={...f,client_id:e.redirect_uri,client_metadata:{...e.client_metadata,subject_syntax_types_supported:["did:key"],application_type:"web",jwks:[{...o,alg:"RSA-OAEP",key_ops:["encrypt","wrapKey"]}]},scope:"openid",response_type:"id_token",nonce:await Lt(Ge)};const g=await Xe(n.sign.publicKey);ke=await jn(pe,pe,n.sign.privateKey,g);const E=await _t(n.sign.privateKey);Fe={encrypt:await _t(n.encrypt.privateKey),sign:E};const v=ri("id_token");if(typeof v<"u")if(v.startsWith("error:")){const u=v.split(",error_description:"),p=u.length===2?u[1].replace(/%20/g," "):"",m=u[0].split("error:"),T=m.length===2?m[1]:"",_=T in Ie,D=new Y(p,_?T:Ie.unknown_error);Ct(),t({error:D,data:void 0})}else Ct(),Zn(v,pe.client_id).then(u=>t(u))},fi=()=>{Gt()},ai=(e,t)=>{oi(e,t)},si=e=>{ai({client_metadata:{client_name:"Mee Foundation",logo_uri:"https://mee.foundation/favicon.png",display_url:"mee.foundation",contacts:[]},redirect_uri:"https://mee.foundation/",claims:{id_token:{name:{attribute_type:"https://schema.org/name",name:"First Name",typ:"string",essential:!0,retention_duration:$e.whileUsingApp,business_purpose:"",is_sensitive:!0},email:{attribute_type:"https://schema.org/email",name:"Email",typ:"email",essential:!1,retention_duration:$e.whileUsingApp,business_purpose:"",is_sensitive:!0}}}},t=>{localStorage.setItem("userData",window.btoa(JSON.stringify(t))),t!==null&&typeof t?.data<"u"&&typeof t?.data.name<"u"?window.location.href="/subscribe":e()})},ci=3e3,De=document.querySelector(".scrollContainer"),ui=.1;if(De){const e=De.getBoundingClientRect().height-1;document.body.style.height=Math.floor(e)+"px"}let Ue=0;const Qt=()=>{Ue+=Math.floor((window.pageYOffset-Ue)*ui);const e="translateY(-"+Ue+"px)";De.style.transform=e,requestAnimationFrame(Qt)};De&&requestAnimationFrame(Qt);const Se=document.getElementById("connectionErrAlert"),li=()=>{Se&&Se.classList.remove("hidden"),setTimeout(()=>{Se&&Se.classList.add("hidden")},ci)};si(li);window.onscroll=function(){di()};function di(){const e=document.getElementById("scroll-indicator");if(e){const t=document.body.scrollTop||document.documentElement.scrollTop;let n=document.documentElement.scrollHeight-document.documentElement.clientHeight;const o=pi(t,n);e.style.width=o+"%"}}function pi(e,t){const n=document.getElementById("envision"),o=document.getElementById("today"),c=document.getElementById("header");if(n&&c){const f=document.getElementById("sroll-to-end");if(n.getBoundingClientRect().height){f&&!f.classList.contains("hidden")&&f.classList.add("hidden");const g=window.screen.height,E=2,S=o?.getBoundingClientRect().height-E*g||0,v=(e-S)/(t-S)*100;return v>0?v:0}else return f&&f.classList.contains("hidden")&&f.classList.remove("hidden"),0}return e/t*100}export{fi as a};
