import"./hoisted.8838cc52.js";import"./hoisted.9f777d9a.js";import"./mee-js-sdk.es.4908cffa.js";const He=e=>typeof e=="object"&&e!=null&&e.nodeType===1,Me=(e,t)=>(!t||e!=="hidden")&&e!=="visible"&&e!=="clip",me=(e,t)=>{if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){const o=getComputedStyle(e,null);return Me(o.overflowY,t)||Me(o.overflowX,t)||(n=>{const s=(i=>{if(!i.ownerDocument||!i.ownerDocument.defaultView)return null;try{return i.ownerDocument.defaultView.frameElement}catch{return null}})(n);return!!s&&(s.clientHeight<n.scrollHeight||s.clientWidth<n.scrollWidth)})(e)}return!1},ee=(e,t,o,n,s,i,r,l)=>i<e&&r>t||i>e&&r<t?0:i<=e&&l<=o||r>=t&&l>=o?i-e-n:r>t&&l<o||i<e&&l>o?r-t+s:0,Je=e=>{const t=e.parentElement;return t??(e.getRootNode().host||null)},$e=(e,t)=>{var o,n,s,i;if(typeof document>"u")return[];const{scrollMode:r,block:l,inline:d,boundary:E,skipOverflowHiddenElements:Ze}=t,ze=typeof E=="function"?E:$=>$!==E;if(!He(e))throw new TypeError("Invalid target");const Te=document.scrollingElement||document.documentElement,R=[];let u=e;for(;He(u)&&ze(u);){if(u=Je(u),u===Te){R.push(u);break}u!=null&&u===document.body&&me(u)&&!me(document.documentElement)||u!=null&&me(u,Ze)&&R.push(u)}const B=(n=(o=window.visualViewport)==null?void 0:o.width)!=null?n:innerWidth,C=(i=(s=window.visualViewport)==null?void 0:s.height)!=null?i:innerHeight,{scrollX:O,scrollY:P}=window,{height:H,width:M,top:_,right:ce,bottom:re,left:D}=e.getBoundingClientRect();let m=l==="start"||l==="nearest"?_:l==="end"?re:_+H/2,f=d==="center"?D+M/2:d==="end"?ce:D;const de=[];for(let $=0;$<R.length;$++){const c=R[$],{height:U,width:F,top:V,right:ae,bottom:ue,left:j}=c.getBoundingClientRect();if(r==="if-needed"&&_>=0&&D>=0&&re<=C&&ce<=B&&_>=V&&re<=ue&&D>=j&&ce<=ae)return de;const X=getComputedStyle(c),G=parseInt(X.borderLeftWidth,10),Z=parseInt(X.borderTopWidth,10),z=parseInt(X.borderRightWidth,10),J=parseInt(X.borderBottomWidth,10);let g=0,y=0;const K="offsetWidth"in c?c.offsetWidth-c.clientWidth-G-z:0,Q="offsetHeight"in c?c.offsetHeight-c.clientHeight-Z-J:0,Be="offsetWidth"in c?c.offsetWidth===0?0:F/c.offsetWidth:0,Ce="offsetHeight"in c?c.offsetHeight===0?0:U/c.offsetHeight:0;if(Te===c)g=l==="start"?m:l==="end"?m-C:l==="nearest"?ee(P,P+C,C,Z,J,P+m,P+m+H,H):m-C/2,y=d==="start"?f:d==="center"?f-B/2:d==="end"?f-B:ee(O,O+B,B,G,z,O+f,O+f+M,M),g=Math.max(0,g+P),y=Math.max(0,y+O);else{g=l==="start"?m-V-Z:l==="end"?m-ue+J+Q:l==="nearest"?ee(V,ue,U,Z,J+Q,m,m+H,H):m-(V+U/2)+Q/2,y=d==="start"?f-j-G:d==="center"?f-(j+F/2)+K/2:d==="end"?f-ae+z+K:ee(j,ae,F,G,z+K,f,f+M,M);const{scrollLeft:Oe,scrollTop:Pe}=c;g=Math.max(0,Math.min(Pe+g/Ce,c.scrollHeight-U/Ce+Q)),y=Math.max(0,Math.min(Oe+y/Be,c.scrollWidth-F/Be+K)),m+=Pe-g,f+=Oe-y}de.push({el:c,top:g,left:y})}return de},Ke=e=>e===!1?{block:"end",inline:"nearest"}:(t=>t===Object(t)&&Object.keys(t).length!==0)(e)?e:{block:"start",inline:"nearest"};function pe(e,t){if(!e.isConnected||!(n=>{let s=n;for(;s&&s.parentNode;){if(s.parentNode===document)return!0;s=s.parentNode instanceof ShadowRoot?s.parentNode.host:s.parentNode}return!1})(e))return;if((n=>typeof n=="object"&&typeof n.behavior=="function")(t))return t.behavior($e(e,t));const o=typeof t=="boolean"||t==null?void 0:t.behavior;for(const{el:n,top:s,left:i}of $e(e,Ke(t)))n.scroll({top:s,left:i,behavior:o})}window.onbeforeunload=function(){window.scrollTo(0,0)};const Y=5,ge=6,Qe="today",et="env",We=document.getElementById("scroll-nav-bar");let v="today",p=0;const te=e=>e==="today"?"section":"en-section",W=(e,t)=>{if(we(te(e),t),v===e)Ne(te(e),t);else{v=e;const o=e==="today"?"scrollToToday":"scrollToEnv",n=new CustomEvent(o,{detail:t});window.dispatchEvent(n),setTimeout(()=>{Ne(te(e),t),we(te(e),t)},1e3)}};document.body.onkeydown=function(e){e.code==="ArrowLeft"&&(v==="env"&&p===0?W("today",Y-1):p>0&&W(v,p-1)),e.code==="ArrowRight"&&(v==="today"&&p===Y-1?W("env",0):(p<Y-1&&v==="today"||p<ge-1&&v==="env")&&W(v,p+1))};const Ue=(e,t)=>{const o=document.createElement("div");o.id=`${e}-bit-progress-${t}`,o.className="bit-progress absolute top-0 left-0 h-6 sm:h-[6px]";const n=document.createElement("div");n.id=`${e}-bit-${t}`,n.className="bit overflow-hidden relative w-full first:rounded-l-full last:rounded-r-full nav-bar-bit h-6 sm:h-[6px]",n.append(o),We&&We.append(n);const s=document.getElementById(`${e}-bit-${t}`);s&&s.addEventListener("click",()=>{W(e,t)})};for(let e=0;e<Y;e++)Ue(Qe,e);for(let e=0;e<ge;e++)Ue(et,e);const Ne=(e,t)=>{const o=document.getElementById(`${e}-${t}`);p=t,o&&pe(o,{behavior:s=>s.forEach(({el:i,top:r,left:l})=>{const d=e==="section"&&t===0?r-screen.height/2:r;i.scrollTop=d,i.scrollLeft=l})});const n=new CustomEvent("scrolledTo",{detail:{section:e,index:t}});window.dispatchEvent(n)};window.addEventListener("onCurrentIndexChanged",e=>{p=e.detail});window.addEventListener("needSyncStatusBar",e=>{const t=e.detail;we(t.section,t.index)});const we=(e,t)=>{setTimeout(()=>{for(let o=0;o<Y;o++){const n=document.getElementById(`today-bit-progress-${o}`);n&&(e==="section"&&t<=o?n.style.width="0%":n.style.width="100%")}for(let o=0;o<ge;o++){const n=document.getElementById(`env-bit-progress-${o}`);n&&(e==="en-section"?t<=o?n.style.width="0%":n.style.width="100%":n.style.width="0%")}},200)};window.addEventListener("envSectionShown",()=>{v="env"});window.addEventListener("todaySectionShown",()=>{v="today"});const tt=document.querySelectorAll(".today .section"),xe=document.querySelector(".scrollIconContainer"),ye=document.querySelector(".shadow"),Ee=document.getElementById("title"),ot=document.querySelector(".figuresContainer"),nt=document.querySelector(".grid"),st=document.querySelectorAll(".floatGradient"),Se=document.getElementById("mainLogo"),ie=document.getElementById("envision"),it=document.getElementById("bleachAnimation");let a=0;const Fe=document.getElementById("en-section-0"),Ye=100,qe=.02;let S=!1,Ae=!1;const lt=5,ct=5;let w=document.body.scrollTop||document.documentElement.scrollTop,T=!1;const N=document.getElementById("animation-control");let h=0,ke=0,Re;const rt=5,dt=15;let le=!1;const b=document.getElementById("animation-play-pause-btn");let q=0,k=window.scrollY;const Ve=()=>{q!==0&&clearInterval(q),q=setInterval(()=>{window.scrollY>=k&&(window.scrollTo(0,window.scrollY+rt),k=window.scrollY)},dt)},at=3e3,ut=5e3;let oe,ve,L=!1;I();function mt(){L&&Ve()}function I(){L&&(L=!1,clearInterval(ve)),oe!==null&&clearTimeout(oe),oe=setTimeout(function(){L||(Xe(),L=!0,ve=setInterval(mt,ut))},at)}function be(){clearTimeout(oe),clearInterval(Re),Re=0,clearInterval(q),q=0,clearInterval(ve),window.removeEventListener("wheel",I),window.removeEventListener("keypress",I),window.removeEventListener("scroll",be)}const Le=()=>{I(),window.addEventListener("wheel",I),window.addEventListener("keypress",I)};Le();const je=()=>{b&&(b.classList.remove("pause"),b.classList.add("play"),le=!1)},Xe=()=>{b&&(b.classList.add("pause"),b.classList.remove("play"),le=!0,Ve())};b?.addEventListener("click",()=>{le?(je(),be()):(Xe(),Le())});window.addEventListener("envSectionChanged",e=>{const t=e.detail,o=Number(t.slice(-1));le&&o===ct-1&&ke===0&&Le(),ke=o});window.addEventListener("atTheStopScroll",()=>{je(),be()});let fe;const ft={threshold:0,rootMargin:"-40% 0% -60%"},ht=new IntersectionObserver((e,t)=>{e.forEach(o=>{if(o.isIntersecting){if(o.target.id==="animationTrigger"&&a<=0&&!T&&(Ee?.classList.add("animate-fadeOut","titleBleach"),o.target.querySelector(".subtitle")?.classList.add("animate-fadeOut","titleBleach"),nt?.classList.add("animate-fadeOut","figuresBleach"),ot?.classList.add("animate-collapse3d","figuresBleach"),st.forEach(i=>{i.removeAttribute("style"),i.classList.add("animate-fadeOut","figuresBleach")}),ye?.classList.add("bg-1"),!S)){S=!0,N?.classList.add("opacity-0");let i=setInterval(()=>{if(a<1)a=a+qe,document.documentElement.style.setProperty("--bleachProgress",a.toString());else{setTimeout(()=>{S=!1;const d=new CustomEvent("needSyncStatusBar",{detail:{section:"en-section",index:0}});window.dispatchEvent(d);const E=new CustomEvent("scrolledTo",{detail:{section:"en-section",index:0}});window.dispatchEvent(E),N?.classList.remove("opacity-0"),fe=Date.now()},1e3),clearInterval(i),Ie(0);const r=new CustomEvent("onCurrentIndexChanged",{detail:0});window.dispatchEvent(r);const l=new CustomEvent("envSectionShown");window.dispatchEvent(l)}},Ye)}const n=5e3,s=Date.now()-fe>n;if(console.log("g",Date.now()-fe),o.target.id==="animationTrigger"&&a>0&&!T&&s&&(ie?.classList.add("hidden"),Se?.classList.remove("logo--contrast"),Fe?.classList.add("opacity-0"),!S)){S=!0,N?.classList.add("opacity-0");const i=new CustomEvent("todaySectionShown");window.dispatchEvent(i);let r=setInterval(()=>{a>0?(a=a-qe,document.documentElement.style.setProperty("--bleachProgress",a.toString())):(setTimeout(()=>{S=!1;const l=document.getElementById("section-4");if(l&&!h){pe(l);const d=new CustomEvent("needSyncStatusBar",{detail:{section:"section",index:4}});window.dispatchEvent(d);const E=new CustomEvent("scrolledTo",{detail:{section:"section",index:4}});window.dispatchEvent(E)}N?.classList.remove("opacity-0"),k=window.scrollY},1e3),clearInterval(r),L=!1)},Ye)}if(o.target.id!=="section-negative"){h=Number(o.target.id.slice(-1));const i=new CustomEvent("onCurrentIndexChanged",{detail:h});window.dispatchEvent(i)}w=document.body.scrollTop||document.documentElement.scrollTop}for(let n=0;n<lt;n++){const s=document.getElementById(`subtitle-${n}`);h===n?(s?.classList.remove("animate-fadeOut","hidden"),s?.classList.add("animate-riseIn")):(s?.classList.remove("animate-riseIn"),s?.classList.add("animate-fadeOut"))}})},ft);tt.forEach(e=>{ht.observe(e)});document.addEventListener("scroll",()=>{S||requestAnimationFrame(wt),it&&a===0&&(ie?.classList.add("hidden"),Se?.classList.remove("logo--contrast")),!Ae&&window.scrollY>400&&(xe?.classList.add("opacity-0"),Ae=!0,setTimeout(()=>{xe?.classList.add("hidden")},400))},{passive:!0});const wt=()=>{document.documentElement.style.setProperty("--scroll",(window.scrollY/(document.body.offsetHeight-window.innerHeight)).toString())};function Ie(e){if(T=!0,N?.classList.contains("white")){const o=document.querySelector("#flash-protector");o?.classList.remove("hidden"),o?.classList.add("fixed","animate-fadeOut"),setTimeout(()=>{o?.classList.remove("fixed","animate-fadeOut"),o?.classList.add("hidden")},400)}ie?.classList.remove("hidden"),Se?.classList.add("logo--contrast"),e===0&&Fe?.classList.remove("opacity-0"),Ee?.classList.add("animate-fadeOut","titleBleach"),ye?.classList.add("bg-1"),a=1,document.documentElement.style.setProperty("--bleachProgress","1");const t=new CustomEvent("envSectionShown");window.dispatchEvent(t),setTimeout(()=>{T=!1},2e3)}function vt(e){T=!0,Ee?.classList.remove("animate-fadeOut","titleBleach"),ye?.classList.remove("bg-1"),ie?.classList.add("hidden"),a=0,document.documentElement.style.setProperty("--bleachProgress","0");const t=new CustomEvent("todaySectionShown");window.dispatchEvent(t),setTimeout(()=>{w=document.body.scrollTop||document.documentElement.scrollTop,A=w,T=!1},2e3),k=window.scrollY}function pt(){Ie(5);const e=document.getElementById("en-section-5");e&&pe(e),document.getElementById("animation-control")?.classList.add("opacity-0");const o=new CustomEvent("needSyncStatusBar",{detail:{section:"en-section",index:5}});window.dispatchEvent(o)}window.addEventListener("scrollToEnv",e=>{Ie(e.detail)});window.addEventListener("scrollToToday",e=>{vt(e.detail)});window.addEventListener("scrolledTo",e=>{const t=e.detail;t.section==="section"&&(h=t.index,w=document.body.scrollTop||document.documentElement.scrollTop,A=w,ne=w,x=h),k=window.scrollY});const gt=document.getElementById("sroll-to-end");gt?.addEventListener("click",pt);window.addEventListener("scroll",Ge);const _e=document.getElementById("section-0");let ne=w,A=w,x=h,he=0,se="down";Ge();function Ge(){if(a>=1)return;const e=_e&&_e.clientHeight;if(!e)return;const t=document.body.scrollTop||document.documentElement.scrollTop;if(ne!==w&&x!==h&&(ne=w,A=w,se==="up"&&(A=ne-e)),x!==h){const i=document.getElementById(`today-bit-progress-${x}`);se==="down"?i&&(i.style.width="100%"):i&&(i.style.width="0%"),x=h}const n=(t-A)*100/e,s=document.getElementById(`today-bit-progress-${h}`);s&&n<=100&&(s.style.width=n+"%")}window.addEventListener("scroll",function(){let e=window.pageYOffset||document.documentElement.scrollTop;e>he?se="down":e<he&&(se="up"),he=e<=0?0:e},!1);const yt=document.querySelectorAll(".envision .section"),Et={threshold:.8},St=new IntersectionObserver((e,t)=>{e.forEach(o=>{o.isIntersecting&&(o.target.classList.remove("opacity-0"),o.target.querySelector(".subtitle")?.classList.remove("animate-fadeOut-short","opacity-0"),o.target.querySelector(".subtitle")?.classList.add("animate-riseIn-short","animation-delay-600"),o.target.querySelector(".title")?.classList.remove("animate-fadeOut","opacity-0"),o.target.querySelector(".title")?.classList.add("animate-riseIn"))})},Et);yt.forEach(e=>{St.observe(e)});const bt={threshold:0,rootMargin:"-15%"},Lt=new IntersectionObserver((e,t)=>{e.forEach(o=>{if(o.isIntersecting){const n=new CustomEvent("atTheStopScroll");window.dispatchEvent(n)}})},bt),De=document.getElementById("en-section-4");De&&Lt.observe(De);const It=document.querySelectorAll(".floatIcon"),Tt=1200;It.forEach(e=>{e.style.animationDelay=Tt+Math.floor(Math.random()*4200)+"ms"});
