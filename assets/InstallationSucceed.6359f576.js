import{r as o}from"./index.f1bc5ebf.js";import{j as e,a as x,M as p,H as h}from"./MaxW.daaba370.js";import{F as f}from"./Footer.df5f9f59.js";import{P as m,d as u}from"./constants.159abf7b.js";const j="/assets/loading.bfd31b75.svg",w=()=>e.jsx("div",{className:"w-full h-96 flex flex-col items-center justify-center",children:e.jsxs("div",{className:"relative",children:[e.jsx("img",{className:"animate-expanse",alt:"loading",src:j}),e.jsx("div",{className:"absolute top-0 bottom-0 left-0 right-0 text-primary flex flex-col justify-center items-center",children:e.jsx("p",{className:"text-sm",children:"Loading"})})]})});var r=(t=>(t[t.devWeb=0]="devWeb",t[t.devApp=1]="devApp",t[t.prodWeb=2]="prodWeb",t[t.prodApp=3]="prodApp",t))(r||{});const N=()=>{switch(window.location.hostname){case"auth.mee.foundation":return 3;case"auth-dev.mee.foundation":return 1;case"mee.foundation":return 2;case"www-dev.mee.foundation":return 0;default:return 2}},g="/assets/lock.55bd7163.svg",v="/assets/cloud.2c042b89.svg",b="/assets/guy.90629994.svg",y="/assets/meeCertifiedMark.8d96e0ed.svg",k="/assets/meeCompatibleMark.bebcb899.svg",U=({partnerData:t})=>{const s=o.useMemo(()=>{try{return u(t)}catch{try{return JSON.parse(window.atob(t))}catch{return window.location.href="/",{partnerName:"",partnerUrl:"",partnerDisplayedUrl:""}}}},[t]);return e.jsxs("div",{className:"flex h-screen w-screen flex-col items-center justify-start bg-white px-5 pt-32 text-center text-primary",children:[e.jsx("img",{className:"mb-20 h-12",alt:"mee",src:x}),e.jsx("h1",{className:"pb-8 text-2xl font-bold",children:"Let’s set up your first connection!"}),e.jsx("p",{className:"pb-8 text-lg font-medium",children:"Allow Mee to establish a way to talk to the site you’ve just chosen to interact with."}),e.jsx("p",{className:"text-lg font-medium",children:"Click Next to connect to "}),e.jsx("p",{className:"text-alt-color-8 text-3xl font-bold",children:s.partnerName||s.client_metadata?.client_name}),e.jsxs("div",{className:"flex flex-row gap-3 pb-10",children:[e.jsx("img",{alt:"lock",src:g,className:"w-4"}),e.jsx("p",{className:"text-3xl font-bold",children:s.partnerDisplayedUrl||s.client_metadata?.display_url})]}),e.jsx("button",{type:"button",className:"bg-primary px-4 py-2 text-sm font-bold text-white",onClick:()=>{window.location.href=`https://auth.mee.foundation/#/consent/${t}`},children:"Next"})]})},C=[{partnerName:"Mee Foundation",partnerUrl:"https://mee.foundation",partnerDisplayedUrl:"mee.foundation",partnerImageUrl:"https://mee.foundation/mee_fav_icon.svg",isCertified:!0},{partnerName:"The Olde York Times",partnerUrl:"https://oldeyorktimes.com",partnerDisplayedUrl:"oldeyorktimes.com",partnerImageUrl:"https://oldeyorktimes.com/favicon.png",isCertified:!0}],I=({partner:t})=>e.jsx("div",{className:"border-alt-color-6 cursor-pointer border-t py-3",tabIndex:-1,role:"link",onClick:()=>{window.location.href=t.partnerUrl},onKeyPress:s=>{s.key==="enter"&&(window.location.href=t.partnerUrl)},children:e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsx("img",{className:"h-12 w-12 rounded-full",src:t.partnerImageUrl,alt:t.partnerName}),e.jsxs("div",{className:"text-alt-color-8 flex flex-col",children:[e.jsxs("div",{className:"flex flex-row gap-1",children:[e.jsx("p",{className:"text-base",children:t.partnerName}),e.jsx("img",{className:"w-5",src:t.isCertified?y:k,alt:t.isCertified?"Mee certified":"Mee compatible"})]}),e.jsx("p",{className:"text-xs",children:t.partnerDisplayedUrl})]})]})}),M=()=>e.jsx(p,{children:e.jsxs("div",{"data-theme":"meeTheme",className:"",children:[e.jsx(h,{}),e.jsxs("div",{className:"max-w-256 mx-auto",children:[e.jsxs("div",{className:"min-h-screen",children:[e.jsx("div",{className:"sub-header flex flex-col items-center bg-secondary pt-5",children:e.jsxs("div",{className:"flex w-full flex-col items-center justify-center",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{className:"",src:v,alt:"cloud"}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 top-0 flex flex-col items-center justify-center px-8 pt-2",children:[e.jsx("h1",{className:"xs:text-3xl px-2 text-center text-xl font-normal text-primary",children:"Let’s set up your first connection"}),e.jsx("p",{className:"pt-2 text-center text-sm text-primary",children:"It is your first time setting up Mee! By creating a connection I mean establishing a way for Mee to talk to apps/sites you would like to sign in/up. Choose who you want me to start talking with."})]})]}),e.jsx("img",{className:"z-10 pt-2",src:b,alt:"person"}),e.jsx("div",{className:`h-19 relative -mt-2
               flex w-full flex-col items-center justify-center overflow-hidden`,children:e.jsx("div",{className:"absolute bottom-0 top-0 h-[200vh] w-[200vh] rounded-t-[50%] border-t bg-white",children:e.jsx("h2",{className:"pt-11 text-center text-xl font-medium text-primary",children:"Sites to connect to"})})})]})}),e.jsx("div",{className:"text-alt-color-8 px-4 pt-8",children:C.filter(t=>t.isCertified).map(t=>e.jsx(I,{partner:t},t.partnerUrl))})]}),e.jsx(f,{})]})]})}),_=({partner:t})=>{const[s,n]=o.useState(void 0),a=N(),i=new URL(window.location.href),l={partnerData:i.hash!==""?i.hash.slice(1):void 0};return o.useEffect(()=>{if(a===r.prodApp||a===r.devApp){const c=a===r.devApp;try{const d=localStorage.getItem(m);localStorage.removeItem(m),d!==null?window.location.href=`https://${c?"www-dev.":""}mee.foundation/installed#${d}`:window.location.href=`https://${c?"www-dev.":""}mee.foundation/installed`}catch{}}else typeof l.partnerData<"u"?n(l.partnerData):n(null)},[a,l]),e.jsx("div",{children:typeof s<"u"?s!==null?e.jsx(U,{partnerData:s}):e.jsx(M,{}):e.jsx(w,{})})};export{_ as InstallationSucceed};
