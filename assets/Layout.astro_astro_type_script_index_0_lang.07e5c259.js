var or=Object.defineProperty,ar=(e,t,n)=>t in e?or(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,yt=(e,t,n)=>(ar(e,typeof t!="symbol"?t+"":t,n),n),P=crypto;const Z=e=>e instanceof CryptoKey,sr=async(e,t)=>{const n=`SHA-${e.slice(-3)}`;return new Uint8Array(await P.subtle.digest(n,t))};var cr=sr;const $=new TextEncoder,ne=new TextDecoder,Ce=2**32;function se(...e){const t=e.reduce((s,{length:f})=>s+f,0),n=new Uint8Array(t);let o=0;return e.forEach(s=>{n.set(s,o),o+=s.length}),n}function ur(e,t){return se($.encode(e),new Uint8Array([0]),t)}function Je(e,t,n){if(t<0||t>=Ce)throw new RangeError(`value must be >= 0 and <= ${Ce-1}. Received ${t}`);e.set([t>>>24,t>>>16,t>>>8,t&255],n)}function lr(e){const t=Math.floor(e/Ce),n=e%Ce,o=new Uint8Array(8);return Je(o,t,0),Je(o,n,4),o}function Ve(e){const t=new Uint8Array(4);return Je(t,e),t}function Re(e){return se(Ve(e.length),e)}async function dr(e,t,n){const o=Math.ceil((t>>3)/32),s=new Uint8Array(o*32);for(let f=0;f<o;f++){const g=new Uint8Array(4+e.length+n.length);g.set(Ve(f+1)),g.set(e,4),g.set(n,4+e.length),s.set(await cr("sha256",g),f*32)}return s.slice(0,t>>3)}const Dt=e=>{let t=e;typeof t=="string"&&(t=$.encode(t));const n=32768,o=[];for(let s=0;s<t.length;s+=n)o.push(String.fromCharCode.apply(null,t.subarray(s,s+n)));return btoa(o.join(""))},be=e=>Dt(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),pr=e=>{const t=atob(e),n=new Uint8Array(t.length);for(let o=0;o<t.length;o++)n[o]=t.charCodeAt(o);return n},B=e=>{let t=e;t instanceof Uint8Array&&(t=ne.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return pr(t)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}};class ie extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(t){var n;super(t),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,(n=Error.captureStackTrace)===null||n===void 0||n.call(Error,this,this.constructor)}}class j extends ie{static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}constructor(t,n="unspecified",o="unspecified"){super(t),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=n,this.reason=o}}class gt extends ie{static get code(){return"ERR_JWT_EXPIRED"}constructor(t,n="unspecified",o="unspecified"){super(t),this.code="ERR_JWT_EXPIRED",this.claim=n,this.reason=o}}class Le extends ie{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}}class K extends ie{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}}class Be extends ie{constructor(){super(...arguments),this.code="ERR_JWE_DECRYPTION_FAILED",this.message="decryption operation failed"}static get code(){return"ERR_JWE_DECRYPTION_FAILED"}}class C extends ie{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}static get code(){return"ERR_JWE_INVALID"}}class U extends ie{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}static get code(){return"ERR_JWS_INVALID"}}class X extends ie{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}class fr extends ie{constructor(){super(...arguments),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED",this.message="signature verification failed"}static get code(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}var hr=P.getRandomValues.bind(P);function yr(e){switch(e){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new K(`Unsupported JWE Algorithm: ${e}`)}}const gr=(e,t)=>{if(t.length<<3!==yr(e))throw new C("Invalid Initialization Vector length")};var mr=gr;const vr=(e,t)=>{const n=e.byteLength<<3;if(n!==t)throw new C(`Invalid Content Encryption Key length. Expected ${t} bits, got ${n} bits`)};var mt=vr;const wr=(e,t)=>{if(!(e instanceof Uint8Array))throw new TypeError("First argument must be a buffer");if(!(t instanceof Uint8Array))throw new TypeError("Second argument must be a buffer");if(e.length!==t.length)throw new TypeError("Input buffers must have the same length");const n=e.length;let o=0,s=-1;for(;++s<n;)o|=e[s]^t[s];return o===0};var Er=wr;function ve(){return typeof WebSocketPair<"u"||typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"||typeof EdgeRuntime<"u"&&EdgeRuntime==="vercel"}function L(e,t="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`)}function re(e,t){return e.name===t}function _e(e){return parseInt(e.name.slice(4),10)}function Sr(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}function Pt(e,t){if(t.length&&!t.some(n=>e.usages.includes(n))){let n="CryptoKey does not support this operation, its usages must include ";if(t.length>2){const o=t.pop();n+=`one of ${t.join(", ")}, or ${o}.`}else t.length===2?n+=`one of ${t[0]} or ${t[1]}.`:n+=`${t[0]}.`;throw new TypeError(n)}}function Ar(e,t,...n){switch(t){case"HS256":case"HS384":case"HS512":{if(!re(e.algorithm,"HMAC"))throw L("HMAC");const o=parseInt(t.slice(2),10);if(_e(e.algorithm.hash)!==o)throw L(`SHA-${o}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!re(e.algorithm,"RSASSA-PKCS1-v1_5"))throw L("RSASSA-PKCS1-v1_5");const o=parseInt(t.slice(2),10);if(_e(e.algorithm.hash)!==o)throw L(`SHA-${o}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!re(e.algorithm,"RSA-PSS"))throw L("RSA-PSS");const o=parseInt(t.slice(2),10);if(_e(e.algorithm.hash)!==o)throw L(`SHA-${o}`,"algorithm.hash");break}case"EdDSA":{if(e.algorithm.name!=="Ed25519"&&e.algorithm.name!=="Ed448"){if(ve()){if(re(e.algorithm,"NODE-ED25519"))break;throw L("Ed25519, Ed448, or NODE-ED25519")}throw L("Ed25519 or Ed448")}break}case"ES256":case"ES384":case"ES512":{if(!re(e.algorithm,"ECDSA"))throw L("ECDSA");const o=Sr(t);if(e.algorithm.namedCurve!==o)throw L(o,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}Pt(e,n)}function fe(e,t,...n){switch(t){case"A128GCM":case"A192GCM":case"A256GCM":{if(!re(e.algorithm,"AES-GCM"))throw L("AES-GCM");const o=parseInt(t.slice(1,4),10);if(e.algorithm.length!==o)throw L(o,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!re(e.algorithm,"AES-KW"))throw L("AES-KW");const o=parseInt(t.slice(1,4),10);if(e.algorithm.length!==o)throw L(o,"algorithm.length");break}case"ECDH":{switch(e.algorithm.name){case"ECDH":case"X25519":case"X448":break;default:throw L("ECDH, X25519, or X448")}break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!re(e.algorithm,"PBKDF2"))throw L("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!re(e.algorithm,"RSA-OAEP"))throw L("RSA-OAEP");const o=parseInt(t.slice(9),10)||1;if(_e(e.algorithm.hash)!==o)throw L(`SHA-${o}`,"algorithm.hash");break}default:throw new TypeError("CryptoKey does not support this operation")}Pt(e,n)}function Nt(e,t,...n){if(n.length>2){const o=n.pop();e+=`one of type ${n.join(", ")}, or ${o}.`}else n.length===2?e+=`one of type ${n[0]} or ${n[1]}.`:e+=`of type ${n[0]}.`;return t==null?e+=` Received ${t}`:typeof t=="function"&&t.name?e+=` Received function ${t.name}`:typeof t=="object"&&t!=null&&t.constructor&&t.constructor.name&&(e+=` Received an instance of ${t.constructor.name}`),e}var V=(e,...t)=>Nt("Key must be ",e,...t);function Tt(e,t,...n){return Nt(`Key for the ${e} algorithm must be `,t,...n)}var Ot=e=>Z(e);const x=["CryptoKey"];async function br(e,t,n,o,s,f){if(!(t instanceof Uint8Array))throw new TypeError(V(t,"Uint8Array"));const g=parseInt(e.slice(1,4),10),E=await P.subtle.importKey("raw",t.subarray(g>>3),"AES-CBC",!1,["decrypt"]),S=await P.subtle.importKey("raw",t.subarray(0,g>>3),{hash:`SHA-${g<<1}`,name:"HMAC"},!1,["sign"]),w=se(f,o,n,lr(f.length<<3)),u=new Uint8Array((await P.subtle.sign("HMAC",S,w)).slice(0,g>>3));let p;try{p=Er(s,u)}catch{}if(!p)throw new Be;let m;try{m=new Uint8Array(await P.subtle.decrypt({iv:o,name:"AES-CBC"},E,n))}catch{}if(!m)throw new Be;return m}async function _r(e,t,n,o,s,f){let g;t instanceof Uint8Array?g=await P.subtle.importKey("raw",t,"AES-GCM",!1,["decrypt"]):(fe(t,e,"decrypt"),g=t);try{return new Uint8Array(await P.subtle.decrypt({additionalData:f,iv:o,name:"AES-GCM",tagLength:128},g,se(n,s)))}catch{throw new Be}}const Mr=async(e,t,n,o,s,f)=>{if(!Z(t)&&!(t instanceof Uint8Array))throw new TypeError(V(t,...x,"Uint8Array"));switch(mr(e,o),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return t instanceof Uint8Array&&mt(t,parseInt(e.slice(-3),10)),br(e,t,n,o,s,f);case"A128GCM":case"A192GCM":case"A256GCM":return t instanceof Uint8Array&&mt(t,parseInt(e.slice(1,4),10)),_r(e,t,n,o,s,f);default:throw new K("Unsupported JWE Content Encryption Algorithm")}};var Kt=Mr;const Cr=async()=>{throw new K('JWE "zip" (Compression Algorithm) Header Parameter is not supported by your javascript runtime. You need to use the `inflateRaw` decrypt option to provide Inflate Raw implementation.')},Ir=(...e)=>{const t=e.filter(Boolean);if(t.length===0||t.length===1)return!0;let n;for(const o of t){const s=Object.keys(o);if(!n||n.size===0){n=new Set(s);continue}for(const f of s){if(n.has(f))return!1;n.add(f)}}return!0};var Ye=Ir;function Dr(e){return typeof e=="object"&&e!==null}function ee(e){if(!Dr(e)||Object.prototype.toString.call(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}const Pr=[{hash:"SHA-256",name:"HMAC"},!0,["sign"]];var Wt=Pr;function Nr(e,t){if(e.algorithm.length!==parseInt(t.slice(1,4),10))throw new TypeError(`Invalid key size for alg: ${t}`)}function Tr(e,t,n){if(Z(e))return fe(e,t,n),e;if(e instanceof Uint8Array)return P.subtle.importKey("raw",e,"AES-KW",!0,[n]);throw new TypeError(V(e,...x,"Uint8Array"))}const ze=async(e,t,n)=>{const o=await Tr(t,e,"unwrapKey");Nr(o,e);const s=await P.subtle.unwrapKey("raw",n,o,"AES-KW",...Wt);return new Uint8Array(await P.subtle.exportKey("raw",s))};async function Or(e,t,n,o,s=new Uint8Array(0),f=new Uint8Array(0)){if(!Z(e))throw new TypeError(V(e,...x));if(fe(e,"ECDH"),!Z(t))throw new TypeError(V(t,...x));fe(t,"ECDH","deriveBits");const g=se(Re($.encode(n)),Re(s),Re(f),Ve(o));let E;e.algorithm.name==="X25519"?E=256:e.algorithm.name==="X448"?E=448:E=Math.ceil(parseInt(e.algorithm.namedCurve.substr(-3),10)/8)<<3;const S=new Uint8Array(await P.subtle.deriveBits({name:e.algorithm.name,public:e},t,E));return dr(S,o,g)}function Kr(e){if(!Z(e))throw new TypeError(V(e,...x));return["P-256","P-384","P-521"].includes(e.algorithm.namedCurve)||e.algorithm.name==="X25519"||e.algorithm.name==="X448"}function Wr(e){if(!(e instanceof Uint8Array)||e.length<8)throw new C("PBES2 Salt Input must be 8 or more octets")}function Hr(e,t){if(e instanceof Uint8Array)return P.subtle.importKey("raw",e,"PBKDF2",!1,["deriveBits"]);if(Z(e))return fe(e,t,"deriveBits","deriveKey"),e;throw new TypeError(V(e,...x,"Uint8Array"))}async function Rr(e,t,n,o){Wr(e);const s=ur(t,e),f=parseInt(t.slice(13,16),10),g={hash:`SHA-${t.slice(8,11)}`,iterations:n,name:"PBKDF2",salt:s},E={length:f,name:"AES-KW"},S=await Hr(o,t);if(S.usages.includes("deriveBits"))return new Uint8Array(await P.subtle.deriveBits(g,S,f));if(S.usages.includes("deriveKey"))return P.subtle.deriveKey(g,S,E,!1,["wrapKey","unwrapKey"]);throw new TypeError('PBKDF2 key "usages" must include "deriveBits" or "deriveKey"')}const Ur=async(e,t,n,o,s)=>{const f=await Rr(s,e,o,t);return ze(e.slice(-6),f,n)};function vt(e){switch(e){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new K(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}var Ze=(e,t)=>{if(e.startsWith("RS")||e.startsWith("PS")){const{modulusLength:n}=t.algorithm;if(typeof n!="number"||n<2048)throw new TypeError(`${e} requires key modulusLength to be 2048 bits or larger`)}};const xr=async(e,t,n)=>{if(!Z(t))throw new TypeError(V(t,...x));if(fe(t,e,"decrypt","unwrapKey"),Ze(e,t),t.usages.includes("decrypt"))return new Uint8Array(await P.subtle.decrypt(vt(e),t,n));if(t.usages.includes("unwrapKey")){const o=await P.subtle.unwrapKey("raw",n,t,vt(e),...Wt);return new Uint8Array(await P.subtle.exportKey("raw",o))}throw new TypeError('RSA-OAEP key "usages" must include "decrypt" or "unwrapKey" for this operation')};function Ht(e){switch(e){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new K(`Unsupported JWE Algorithm: ${e}`)}}var Jr=e=>hr(new Uint8Array(Ht(e)>>3)),Lr=(e,t)=>{const n=(e.match(/.{1,64}/g)||[]).join(`
`);return`-----BEGIN ${t}-----
${n}
-----END ${t}-----`};const Br=async(e,t,n)=>{if(!Z(n))throw new TypeError(V(n,...x));if(!n.extractable)throw new TypeError("CryptoKey is not extractable");if(n.type!==e)throw new TypeError(`key is not a ${e} key`);return Lr(Dt(new Uint8Array(await P.subtle.exportKey(t,n))),`${e.toUpperCase()} KEY`)},zr=e=>Br("private","pkcs8",e),ae=(e,t,n=0)=>{n===0&&(t.unshift(t.length),t.unshift(6));let o=e.indexOf(t[0],n);if(o===-1)return!1;const s=e.subarray(o,o+t.length);return s.length!==t.length?!1:s.every((f,g)=>f===t[g])||ae(e,t,o+1)},wt=e=>{switch(!0){case ae(e,[42,134,72,206,61,3,1,7]):return"P-256";case ae(e,[43,129,4,0,34]):return"P-384";case ae(e,[43,129,4,0,35]):return"P-521";case ae(e,[43,101,110]):return"X25519";case ae(e,[43,101,111]):return"X448";case ae(e,[43,101,112]):return"Ed25519";case ae(e,[43,101,113]):return"Ed448";default:throw new K("Invalid or unsupported EC Key Curve or OKP Key Sub Type")}},$r=async(e,t,n,o,s)=>{var f,g;let E,S;const w=new Uint8Array(atob(n.replace(e,"")).split("").map(p=>p.charCodeAt(0))),u=t==="spki";switch(o){case"PS256":case"PS384":case"PS512":E={name:"RSA-PSS",hash:`SHA-${o.slice(-3)}`},S=u?["verify"]:["sign"];break;case"RS256":case"RS384":case"RS512":E={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${o.slice(-3)}`},S=u?["verify"]:["sign"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":E={name:"RSA-OAEP",hash:`SHA-${parseInt(o.slice(-3),10)||1}`},S=u?["encrypt","wrapKey"]:["decrypt","unwrapKey"];break;case"ES256":E={name:"ECDSA",namedCurve:"P-256"},S=u?["verify"]:["sign"];break;case"ES384":E={name:"ECDSA",namedCurve:"P-384"},S=u?["verify"]:["sign"];break;case"ES512":E={name:"ECDSA",namedCurve:"P-521"},S=u?["verify"]:["sign"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{const p=wt(w);E=p.startsWith("P-")?{name:"ECDH",namedCurve:p}:{name:p},S=u?[]:["deriveBits"];break}case"EdDSA":E={name:wt(w)},S=u?["verify"]:["sign"];break;default:throw new K('Invalid or unsupported "alg" (Algorithm) value')}try{return await P.subtle.importKey(t,w,E,(f=s?.extractable)!==null&&f!==void 0?f:!1,S)}catch(p){if(E.name==="Ed25519"&&p?.name==="NotSupportedError"&&ve())return E={name:"NODE-ED25519",namedCurve:"NODE-ED25519"},await P.subtle.importKey(t,w,E,(g=s?.extractable)!==null&&g!==void 0?g:!1,S);throw p}},qr=(e,t,n)=>$r(/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\s)/g,"pkcs8",e,t,n);function kr(e){let t,n;switch(e.kty){case"oct":{switch(e.alg){case"HS256":case"HS384":case"HS512":t={name:"HMAC",hash:`SHA-${e.alg.slice(-3)}`},n=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":throw new K(`${e.alg} keys cannot be imported as CryptoKey instances`);case"A128GCM":case"A192GCM":case"A256GCM":case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":t={name:"AES-GCM"},n=["encrypt","decrypt"];break;case"A128KW":case"A192KW":case"A256KW":t={name:"AES-KW"},n=["wrapKey","unwrapKey"];break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":t={name:"PBKDF2"},n=["deriveBits"];break;default:throw new K('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"RSA":{switch(e.alg){case"PS256":case"PS384":case"PS512":t={name:"RSA-PSS",hash:`SHA-${e.alg.slice(-3)}`},n=e.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":t={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.alg.slice(-3)}`},n=e.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":t={name:"RSA-OAEP",hash:`SHA-${parseInt(e.alg.slice(-3),10)||1}`},n=e.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new K('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(e.alg){case"ES256":t={name:"ECDSA",namedCurve:"P-256"},n=e.d?["sign"]:["verify"];break;case"ES384":t={name:"ECDSA",namedCurve:"P-384"},n=e.d?["sign"]:["verify"];break;case"ES512":t={name:"ECDSA",namedCurve:"P-521"},n=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:"ECDH",namedCurve:e.crv},n=e.d?["deriveBits"]:[];break;default:throw new K('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"OKP":{switch(e.alg){case"EdDSA":t={name:e.crv},n=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:e.crv},n=e.d?["deriveBits"]:[];break;default:throw new K('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new K('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:t,keyUsages:n}}const Fr=async e=>{var t,n;if(!e.alg)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');const{algorithm:o,keyUsages:s}=kr(e),f=[o,(t=e.ext)!==null&&t!==void 0?t:!1,(n=e.key_ops)!==null&&n!==void 0?n:s];if(o.name==="PBKDF2")return P.subtle.importKey("raw",B(e.k),...f);const g={...e};delete g.alg,delete g.use;try{return await P.subtle.importKey("jwk",g,...f)}catch(E){if(o.name==="Ed25519"&&E?.name==="NotSupportedError"&&ve())return f[0]={name:"NODE-ED25519",namedCurve:"NODE-ED25519"},await P.subtle.importKey("jwk",g,...f);throw E}};var Et=Fr;async function Gr(e,t,n){if(typeof e!="string"||e.indexOf("-----BEGIN PRIVATE KEY-----")!==0)throw new TypeError('"pkcs8" must be PKCS#8 formatted string');return qr(e,t,n)}async function Rt(e,t,n){var o;if(!ee(e))throw new TypeError("JWK must be an object");switch(t||(t=e.alg),e.kty){case"oct":if(typeof e.k!="string"||!e.k)throw new TypeError('missing "k" (Key Value) Parameter value');return n??(n=e.ext!==!0),n?Et({...e,alg:t,ext:(o=e.ext)!==null&&o!==void 0?o:!1}):B(e.k);case"RSA":if(e.oth!==void 0)throw new K('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return Et({...e,alg:t});default:throw new K('Unsupported "kty" (Key Type) Parameter value')}}const Qr=(e,t)=>{if(!(t instanceof Uint8Array)){if(!Ot(t))throw new TypeError(Tt(e,t,...x,"Uint8Array"));if(t.type!=="secret")throw new TypeError(`${x.join(" or ")} instances for symmetric algorithms must be of type "secret"`)}},Vr=(e,t,n)=>{if(!Ot(t))throw new TypeError(Tt(e,t,...x));if(t.type==="secret")throw new TypeError(`${x.join(" or ")} instances for asymmetric algorithms must not be of type "secret"`);if(n==="sign"&&t.type==="public")throw new TypeError(`${x.join(" or ")} instances for asymmetric algorithm signing must be of type "private"`);if(n==="decrypt"&&t.type==="public")throw new TypeError(`${x.join(" or ")} instances for asymmetric algorithm decryption must be of type "private"`);if(t.algorithm&&n==="verify"&&t.type==="private")throw new TypeError(`${x.join(" or ")} instances for asymmetric algorithm verifying must be of type "public"`);if(t.algorithm&&n==="encrypt"&&t.type==="private")throw new TypeError(`${x.join(" or ")} instances for asymmetric algorithm encryption must be of type "public"`)},Yr=(e,t,n)=>{e.startsWith("HS")||e==="dir"||e.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(e)?Qr(e,t):Vr(e,t,n)};var je=Yr;async function Zr(e,t,n,o,s){const f=e.slice(0,7);return Kt(f,t,n,o,s,new Uint8Array(0))}async function jr(e,t,n,o,s){switch(je(e,t,"decrypt"),e){case"dir":{if(n!==void 0)throw new C("Encountered unexpected JWE Encrypted Key");return t}case"ECDH-ES":if(n!==void 0)throw new C("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!ee(o.epk))throw new C('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(!Kr(t))throw new K("ECDH with the provided key is not allowed or not supported by your javascript runtime");const f=await Rt(o.epk,e);let g,E;if(o.apu!==void 0){if(typeof o.apu!="string")throw new C('JOSE Header "apu" (Agreement PartyUInfo) invalid');g=B(o.apu)}if(o.apv!==void 0){if(typeof o.apv!="string")throw new C('JOSE Header "apv" (Agreement PartyVInfo) invalid');E=B(o.apv)}const S=await Or(f,t,e==="ECDH-ES"?o.enc:e,e==="ECDH-ES"?Ht(o.enc):parseInt(e.slice(-5,-2),10),g,E);if(e==="ECDH-ES")return S;if(n===void 0)throw new C("JWE Encrypted Key missing");return ze(e.slice(-6),S,n)}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(n===void 0)throw new C("JWE Encrypted Key missing");return xr(e,t,n)}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{if(n===void 0)throw new C("JWE Encrypted Key missing");if(typeof o.p2c!="number")throw new C('JOSE Header "p2c" (PBES2 Count) missing or invalid');const f=s?.maxPBES2Count||1e4;if(o.p2c>f)throw new C('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if(typeof o.p2s!="string")throw new C('JOSE Header "p2s" (PBES2 Salt) missing or invalid');return Ur(e,t,n,o.p2c,B(o.p2s))}case"A128KW":case"A192KW":case"A256KW":{if(n===void 0)throw new C("JWE Encrypted Key missing");return ze(e,t,n)}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{if(n===void 0)throw new C("JWE Encrypted Key missing");if(typeof o.iv!="string")throw new C('JOSE Header "iv" (Initialization Vector) missing or invalid');if(typeof o.tag!="string")throw new C('JOSE Header "tag" (Authentication Tag) missing or invalid');const f=B(o.iv),g=B(o.tag);return Zr(e,t,n,f,g)}default:throw new K('Invalid or unsupported "alg" (JWE Algorithm) header value')}}function Xe(e,t,n,o,s){if(s.crit!==void 0&&o.crit===void 0)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!o||o.crit===void 0)return new Set;if(!Array.isArray(o.crit)||o.crit.length===0||o.crit.some(g=>typeof g!="string"||g.length===0))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let f;n!==void 0?f=new Map([...Object.entries(n),...t.entries()]):f=t;for(const g of o.crit){if(!f.has(g))throw new K(`Extension Header Parameter "${g}" is not recognized`);if(s[g]===void 0)throw new e(`Extension Header Parameter "${g}" is missing`);if(f.get(g)&&o[g]===void 0)throw new e(`Extension Header Parameter "${g}" MUST be integrity protected`)}return new Set(o.crit)}const Xr=(e,t)=>{if(t!==void 0&&(!Array.isArray(t)||t.some(n=>typeof n!="string")))throw new TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)};var $e=Xr;async function en(e,t,n){var o;if(!ee(e))throw new C("Flattened JWE must be an object");if(e.protected===void 0&&e.header===void 0&&e.unprotected===void 0)throw new C("JOSE Header missing");if(typeof e.iv!="string")throw new C("JWE Initialization Vector missing or incorrect type");if(typeof e.ciphertext!="string")throw new C("JWE Ciphertext missing or incorrect type");if(typeof e.tag!="string")throw new C("JWE Authentication Tag missing or incorrect type");if(e.protected!==void 0&&typeof e.protected!="string")throw new C("JWE Protected Header incorrect type");if(e.encrypted_key!==void 0&&typeof e.encrypted_key!="string")throw new C("JWE Encrypted Key incorrect type");if(e.aad!==void 0&&typeof e.aad!="string")throw new C("JWE AAD incorrect type");if(e.header!==void 0&&!ee(e.header))throw new C("JWE Shared Unprotected Header incorrect type");if(e.unprotected!==void 0&&!ee(e.unprotected))throw new C("JWE Per-Recipient Unprotected Header incorrect type");let s;if(e.protected)try{const H=B(e.protected);s=JSON.parse(ne.decode(H))}catch{throw new C("JWE Protected Header is invalid")}if(!Ye(s,e.header,e.unprotected))throw new C("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");const f={...s,...e.header,...e.unprotected};if(Xe(C,new Map,n?.crit,s,f),f.zip!==void 0){if(!s||!s.zip)throw new C('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if(f.zip!=="DEF")throw new K('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}const{alg:g,enc:E}=f;if(typeof g!="string"||!g)throw new C("missing JWE Algorithm (alg) in JWE Header");if(typeof E!="string"||!E)throw new C("missing JWE Encryption Algorithm (enc) in JWE Header");const S=n&&$e("keyManagementAlgorithms",n.keyManagementAlgorithms),w=n&&$e("contentEncryptionAlgorithms",n.contentEncryptionAlgorithms);if(S&&!S.has(g))throw new Le('"alg" (Algorithm) Header Parameter not allowed');if(w&&!w.has(E))throw new Le('"enc" (Encryption Algorithm) Header Parameter not allowed');let u;e.encrypted_key!==void 0&&(u=B(e.encrypted_key));let p=!1;typeof t=="function"&&(t=await t(s,e),p=!0);let m;try{m=await jr(g,t,u,f,n)}catch(H){if(H instanceof TypeError||H instanceof C||H instanceof K)throw H;m=Jr(E)}const T=B(e.iv),_=B(e.tag),D=$.encode((o=e.protected)!==null&&o!==void 0?o:"");let W;e.aad!==void 0?W=se(D,$.encode("."),$.encode(e.aad)):W=D;let R=await Kt(E,m,B(e.ciphertext),T,_,W);f.zip==="DEF"&&(R=await(n?.inflateRaw||Cr)(R));const O={plaintext:R};return e.protected!==void 0&&(O.protectedHeader=s),e.aad!==void 0&&(O.additionalAuthenticatedData=B(e.aad)),e.unprotected!==void 0&&(O.sharedUnprotectedHeader=e.unprotected),e.header!==void 0&&(O.unprotectedHeader=e.header),p?{...O,key:t}:O}async function tn(e,t,n){if(e instanceof Uint8Array&&(e=ne.decode(e)),typeof e!="string")throw new C("Compact JWE must be a string or Uint8Array");const{0:o,1:s,2:f,3:g,4:E,length:S}=e.split(".");if(S!==5)throw new C("Invalid Compact JWE");const w=await en({ciphertext:g,iv:f||void 0,protected:o||void 0,tag:E||void 0,encrypted_key:s||void 0},t,n),u={plaintext:w.plaintext,protectedHeader:w.protectedHeader};return typeof t=="function"?{...u,key:w.key}:u}const rn=async e=>{if(e instanceof Uint8Array)return{kty:"oct",k:be(e)};if(!Z(e))throw new TypeError(V(e,...x,"Uint8Array"));if(!e.extractable)throw new TypeError("non-extractable CryptoKey cannot be exported as a JWK");const{ext:t,key_ops:n,alg:o,use:s,...f}=await P.subtle.exportKey("jwk",e);return f};var nn=rn;async function on(e){return zr(e)}async function et(e){return nn(e)}function Ut(e,t){const n=`SHA-${e.slice(-3)}`;switch(e){case"HS256":case"HS384":case"HS512":return{hash:n,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:n,name:"RSA-PSS",saltLength:e.slice(-3)>>3};case"RS256":case"RS384":case"RS512":return{hash:n,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:n,name:"ECDSA",namedCurve:t.namedCurve};case"EdDSA":return ve()&&t.name==="NODE-ED25519"?{name:"NODE-ED25519",namedCurve:"NODE-ED25519"}:{name:t.name};default:throw new K(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}function xt(e,t,n){if(Z(t))return Ar(t,e,n),t;if(t instanceof Uint8Array){if(!e.startsWith("HS"))throw new TypeError(V(t,...x));return P.subtle.importKey("raw",t,{hash:`SHA-${e.slice(-3)}`,name:"HMAC"},!1,[n])}throw new TypeError(V(t,...x,"Uint8Array"))}const an=async(e,t,n,o)=>{const s=await xt(e,t,"verify");Ze(e,s);const f=Ut(e,s.algorithm);try{return await P.subtle.verify(f,s,n,o)}catch{return!1}};var sn=an;async function cn(e,t,n){var o;if(!ee(e))throw new U("Flattened JWS must be an object");if(e.protected===void 0&&e.header===void 0)throw new U('Flattened JWS must have either of the "protected" or "header" members');if(e.protected!==void 0&&typeof e.protected!="string")throw new U("JWS Protected Header incorrect type");if(e.payload===void 0)throw new U("JWS Payload missing");if(typeof e.signature!="string")throw new U("JWS Signature missing or incorrect type");if(e.header!==void 0&&!ee(e.header))throw new U("JWS Unprotected Header incorrect type");let s={};if(e.protected)try{const W=B(e.protected);s=JSON.parse(ne.decode(W))}catch{throw new U("JWS Protected Header is invalid")}if(!Ye(s,e.header))throw new U("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const f={...s,...e.header},g=Xe(U,new Map([["b64",!0]]),n?.crit,s,f);let E=!0;if(g.has("b64")&&(E=s.b64,typeof E!="boolean"))throw new U('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:S}=f;if(typeof S!="string"||!S)throw new U('JWS "alg" (Algorithm) Header Parameter missing or invalid');const w=n&&$e("algorithms",n.algorithms);if(w&&!w.has(S))throw new Le('"alg" (Algorithm) Header Parameter not allowed');if(E){if(typeof e.payload!="string")throw new U("JWS Payload must be a string")}else if(typeof e.payload!="string"&&!(e.payload instanceof Uint8Array))throw new U("JWS Payload must be a string or an Uint8Array instance");let u=!1;typeof t=="function"&&(t=await t(s,e),u=!0),je(S,t,"verify");const p=se($.encode((o=e.protected)!==null&&o!==void 0?o:""),$.encode("."),typeof e.payload=="string"?$.encode(e.payload):e.payload),m=B(e.signature);if(!await sn(S,t,m,p))throw new fr;let _;E?_=B(e.payload):typeof e.payload=="string"?_=$.encode(e.payload):_=e.payload;const D={payload:_};return e.protected!==void 0&&(D.protectedHeader=s),e.header!==void 0&&(D.unprotectedHeader=e.header),u?{...D,key:t}:D}async function un(e,t,n){if(e instanceof Uint8Array&&(e=ne.decode(e)),typeof e!="string")throw new U("Compact JWS must be a string or Uint8Array");const{0:o,1:s,2:f,length:g}=e.split(".");if(g!==3)throw new U("Invalid Compact JWS");const E=await cn({payload:s,protected:o,signature:f},t,n),S={payload:E.payload,protectedHeader:E.protectedHeader};return typeof t=="function"?{...S,key:E.key}:S}var Me=e=>Math.floor(e.getTime()/1e3);const Jt=60,Lt=Jt*60,tt=Lt*24,ln=tt*7,dn=tt*365.25,pn=/^(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)$/i;var Ie=e=>{const t=pn.exec(e);if(!t)throw new TypeError("Invalid time period format");const n=parseFloat(t[1]);switch(t[2].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":return Math.round(n);case"minute":case"minutes":case"min":case"mins":case"m":return Math.round(n*Jt);case"hour":case"hours":case"hr":case"hrs":case"h":return Math.round(n*Lt);case"day":case"days":case"d":return Math.round(n*tt);case"week":case"weeks":case"w":return Math.round(n*ln);default:return Math.round(n*dn)}};const St=e=>e.toLowerCase().replace(/^application\//,""),fn=(e,t)=>typeof e=="string"?t.includes(e):Array.isArray(e)?t.some(Set.prototype.has.bind(new Set(e))):!1;var hn=(e,t,n={})=>{const{typ:o}=n;if(o&&(typeof e.typ!="string"||St(e.typ)!==St(o)))throw new j('unexpected "typ" JWT header value',"typ","check_failed");let s;try{s=JSON.parse(ne.decode(t))}catch{}if(!ee(s))throw new X("JWT Claims Set must be a top-level JSON object");const{requiredClaims:f=[],issuer:g,subject:E,audience:S,maxTokenAge:w}=n;w!==void 0&&f.push("iat"),S!==void 0&&f.push("aud"),E!==void 0&&f.push("sub"),g!==void 0&&f.push("iss");for(const T of new Set(f.reverse()))if(!(T in s))throw new j(`missing required "${T}" claim`,T,"missing");if(g&&!(Array.isArray(g)?g:[g]).includes(s.iss))throw new j('unexpected "iss" claim value',"iss","check_failed");if(E&&s.sub!==E)throw new j('unexpected "sub" claim value',"sub","check_failed");if(S&&!fn(s.aud,typeof S=="string"?[S]:S))throw new j('unexpected "aud" claim value',"aud","check_failed");let u;switch(typeof n.clockTolerance){case"string":u=Ie(n.clockTolerance);break;case"number":u=n.clockTolerance;break;case"undefined":u=0;break;default:throw new TypeError("Invalid clockTolerance option type")}const{currentDate:p}=n,m=Me(p||new Date);if((s.iat!==void 0||w)&&typeof s.iat!="number")throw new j('"iat" claim must be a number',"iat","invalid");if(s.nbf!==void 0){if(typeof s.nbf!="number")throw new j('"nbf" claim must be a number',"nbf","invalid");if(s.nbf>m+u)throw new j('"nbf" claim timestamp check failed',"nbf","check_failed")}if(s.exp!==void 0){if(typeof s.exp!="number")throw new j('"exp" claim must be a number',"exp","invalid");if(s.exp<=m-u)throw new gt('"exp" claim timestamp check failed',"exp","check_failed")}if(w){const T=m-s.iat,_=typeof w=="number"?w:Ie(w);if(T-u>_)throw new gt('"iat" claim timestamp check failed (too far in the past)',"iat","check_failed");if(T<0-u)throw new j('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}return s};async function yn(e,t,n){var o;const s=await un(e,t,n);if(!((o=s.protectedHeader.crit)===null||o===void 0)&&o.includes("b64")&&s.protectedHeader.b64===!1)throw new X("JWTs MUST NOT use unencoded payload");const g={payload:hn(s.protectedHeader,s.payload,n),protectedHeader:s.protectedHeader};return typeof t=="function"?{...g,key:s.key}:g}const gn=async(e,t,n)=>{const o=await xt(e,t,"sign");Ze(e,o);const s=await P.subtle.sign(Ut(e,o.algorithm),o,n);return new Uint8Array(s)};var mn=gn;class vn{constructor(t){if(!(t instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");this._payload=t}setProtectedHeader(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setUnprotectedHeader(t){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=t,this}async sign(t,n){if(!this._protectedHeader&&!this._unprotectedHeader)throw new U("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!Ye(this._protectedHeader,this._unprotectedHeader))throw new U("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const o={...this._protectedHeader,...this._unprotectedHeader},s=Xe(U,new Map([["b64",!0]]),n?.crit,this._protectedHeader,o);let f=!0;if(s.has("b64")&&(f=this._protectedHeader.b64,typeof f!="boolean"))throw new U('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:g}=o;if(typeof g!="string"||!g)throw new U('JWS "alg" (Algorithm) Header Parameter missing or invalid');je(g,t,"sign");let E=this._payload;f&&(E=$.encode(be(E)));let S;this._protectedHeader?S=$.encode(be(JSON.stringify(this._protectedHeader))):S=$.encode("");const w=se(S,$.encode("."),E),u=await mn(g,t,w),p={signature:be(u),payload:""};return f&&(p.payload=ne.decode(E)),this._unprotectedHeader&&(p.header=this._unprotectedHeader),this._protectedHeader&&(p.protected=ne.decode(S)),p}}class wn{constructor(t){this._flattened=new vn(t)}setProtectedHeader(t){return this._flattened.setProtectedHeader(t),this}async sign(t,n){const o=await this._flattened.sign(t,n);if(o.payload===void 0)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${o.protected}.${o.payload}.${o.signature}`}}class En{constructor(t){if(!ee(t))throw new TypeError("JWT Claims Set MUST be an object");this._payload=t}setIssuer(t){return this._payload={...this._payload,iss:t},this}setSubject(t){return this._payload={...this._payload,sub:t},this}setAudience(t){return this._payload={...this._payload,aud:t},this}setJti(t){return this._payload={...this._payload,jti:t},this}setNotBefore(t){return typeof t=="number"?this._payload={...this._payload,nbf:t}:this._payload={...this._payload,nbf:Me(new Date)+Ie(t)},this}setExpirationTime(t){return typeof t=="number"?this._payload={...this._payload,exp:t}:this._payload={...this._payload,exp:Me(new Date)+Ie(t)},this}setIssuedAt(t){return typeof t>"u"?this._payload={...this._payload,iat:Me(new Date)}:this._payload={...this._payload,iat:t},this}}class Sn extends En{setProtectedHeader(t){return this._protectedHeader=t,this}async sign(t,n){var o;const s=new wn($.encode(JSON.stringify(this._payload)));if(s.setProtectedHeader(this._protectedHeader),Array.isArray((o=this._protectedHeader)===null||o===void 0?void 0:o.crit)&&this._protectedHeader.crit.includes("b64")&&this._protectedHeader.b64===!1)throw new X("JWTs MUST NOT use unencoded payload");return s.sign(t,n)}}const An=B;function bn(e){if(typeof e!="string")throw new X("JWTs must use Compact JWS serialization, JWT must be a string");const{1:t,length:n}=e.split(".");if(n===5)throw new X("Only JWTs using Compact JWS serialization can be decoded");if(n!==3)throw new X("Invalid JWT");if(!t)throw new X("JWTs must contain a payload");let o;try{o=An(t)}catch{throw new X("Failed to parse the base64url encoded payload")}let s;try{s=JSON.parse(ne.decode(o))}catch{throw new X("Failed to parse the decoded payload as JSON")}if(!ee(s))throw new X("Invalid JWT Claims Set");return s}function Ue(e){var t;const n=(t=e?.modulusLength)!==null&&t!==void 0?t:2048;if(typeof n!="number"||n<2048)throw new K("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");return n}async function _n(e,t){var n,o,s,f;let g,E;switch(e){case"PS256":case"PS384":case"PS512":g={name:"RSA-PSS",hash:`SHA-${e.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:Ue(t)},E=["sign","verify"];break;case"RS256":case"RS384":case"RS512":g={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:Ue(t)},E=["sign","verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":g={name:"RSA-OAEP",hash:`SHA-${parseInt(e.slice(-3),10)||1}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:Ue(t)},E=["decrypt","unwrapKey","encrypt","wrapKey"];break;case"ES256":g={name:"ECDSA",namedCurve:"P-256"},E=["sign","verify"];break;case"ES384":g={name:"ECDSA",namedCurve:"P-384"},E=["sign","verify"];break;case"ES512":g={name:"ECDSA",namedCurve:"P-521"},E=["sign","verify"];break;case"EdDSA":E=["sign","verify"];const S=(n=t?.crv)!==null&&n!==void 0?n:"Ed25519";switch(S){case"Ed25519":case"Ed448":g={name:S};break;default:throw new K("Invalid or unsupported crv option provided")}break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{E=["deriveKey","deriveBits"];const w=(o=t?.crv)!==null&&o!==void 0?o:"P-256";switch(w){case"P-256":case"P-384":case"P-521":{g={name:"ECDH",namedCurve:w};break}case"X25519":case"X448":g={name:w};break;default:throw new K("Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448")}break}default:throw new K('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}try{return await P.subtle.generateKey(g,(s=t?.extractable)!==null&&s!==void 0?s:!1,E)}catch(S){if(g.name==="Ed25519"&&S?.name==="NotSupportedError"&&ve())return g={name:"NODE-ED25519",namedCurve:"NODE-ED25519"},await P.subtle.generateKey(g,(f=t?.extractable)!==null&&f!==void 0?f:!1,E);throw S}}async function At(e,t){return _n(e,t)}var Mn="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAxOCAxOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cmVjdCB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHJ4PSI5IiBmaWxsPSIjNEU4NjhFIiAvPgogIDxwYXRoCiAgICBkPSJNMTEuMzQ2MiA1LjIzNDg2QzEwLjg5MjkgNS4yMzc5NSAxMC40NDYzIDUuMzQzOCAxMC4wMzk5IDUuNTQ0NDNDOS42MzM1MiA1Ljc0NTA2IDkuMjc3OTUgNi4wMzUyNiA4Ljk5OTk5IDYuMzkzMTNDOC43MjIyNiA2LjAzNTI4IDguMzY2OTIgNS43NDUxMSA3Ljk2MDcyIDUuNTQ0NDZDNy41NTQ1NSA1LjM0MzgzIDcuMTA4MSA1LjIzNzk3IDYuNjU1MDMgNS4yMzQ4NkM0Ljk2NTEzIDUuMjM0ODYgMy41OTEzNCA2LjY4ODcgMy41OTEzNCA4LjQ3OTAxVjEyLjAyNkMzLjU5MTM0IDEyLjIxNzEgMy42NjczMSAxMi40MDA1IDMuODAyNTYgMTIuNTM1N0MzLjkzNzc5IDEyLjY3MDkgNC4xMjEyMyAxMi43NDY5IDQuMzEyNDkgMTIuNzQ2OUM0LjUwMzc1IDEyLjc0NjkgNC42ODcxNyAxMi42NzA5IDQuODIyNDIgMTIuNTM1N0M0Ljk1NzY4IDEyLjQwMDUgNS4wMzM2NSAxMi4yMTcxIDUuMDMzNjUgMTIuMDI2VjguNDc2NjFDNS4wMzM2NSA3LjQ4MTcyIDUuNzYzMjIgNi42NzQzIDYuNjU5ODUgNi42NzQzQzcuNTU2NDggNi42NzQzIDguMjg2MDYgNy40ODQxNCA4LjI4NjA2IDguNDc2NjFWMTIuMDIzNUM4LjI4NjA2IDEyLjIxNDcgOC4zNjIwMyAxMi4zOTgxIDguNDk3MjYgMTIuNTMzM0M4LjYzMjUyIDEyLjY2ODUgOC44MTU5NSAxMi43NDQ1IDkuMDA3MjIgMTIuNzQ0NUM5LjE5ODQ4IDEyLjc0NDUgOS4zODE4OSAxMi42Njg1IDkuNTE3MTUgMTIuNTMzM0M5LjY1MjM4IDEyLjM5ODEgOS43MjgzNyAxMi4yMTQ3IDkuNzI4MzcgMTIuMDIzNVY4LjQ3NjYxQzkuNzI4MzcgNy40ODE3MiAxMC40NTc5IDYuNjc0MyAxMS4zNTQ2IDYuNjc0M0MxMi4yNTEyIDYuNjc0MyAxMi45ODA4IDcuNDg0MTQgMTIuOTgwOCA4LjQ3NjYxVjEyLjAyMzVDMTIuOTgwOCAxMi4yMTQ3IDEzLjA1NjcgMTIuMzk4MSAxMy4xOTIgMTIuNTMzM0MxMy4zMjcyIDEyLjY2ODUgMTMuNTEwNyAxMi43NDQ1IDEzLjcwMTkgMTIuNzQ0NUMxMy44OTMyIDEyLjc0NDUgMTQuMDc2NiAxMi42Njg1IDE0LjIxMTggMTIuNTMzM0MxNC4zNDcxIDEyLjM5ODEgMTQuNDIzMSAxMi4yMTQ3IDE0LjQyMzEgMTIuMDIzNVY4LjQ3NjYxQzE0LjQwOTggNi42ODg3IDEzLjAzNjEgNS4yMzQ4NiAxMS4zNDYyIDUuMjM0ODZaIgogICAgZmlsbD0id2hpdGUiIC8+Cjwvc3ZnPg==",qe=(e=>(e.whileUsingApp="while_using_app",e.untilConnectionDeletion="until_connection_deletion",e))(qe||{}),De=(e=>(e.invalid_scope="invalid_scope",e.unauthorized_client="unauthorized_client",e.access_denied="access_denied",e.unsupported_response_type="unsupported_response_type",e.server_error="server_error",e.temporarily_unavailable="temporarily_unavailable",e.interaction_required="interaction_required",e.login_required="login_required",e.account_selection_required="account_selection_required",e.consent_required="consent_required",e.invalid_request_uri="invalid_request_uri",e.invalid_request_object="invalid_request_object",e.request_not_supported="request_not_supported",e.request_uri_not_supported="request_uri_not_supported",e.registration_not_supported="registration_not_supported",e.user_cancelled="user_cancelled",e.registration_value_not_supported="registration_value_not_supported",e.subject_syntax_types_not_supported="subject_syntax_types_not_supported",e.invalid_registration_uri="invalid_registration_uri",e.invalid_registration_object="invalid_registration_object",e.validation_failed="validation_failed",e.request_malformed="request_malformed",e.unknown_error="unknown_error",e))(De||{});class Y extends Error{constructor(t,n){super(),yt(this,"error"),yt(this,"error_description"),this.error=n||"validation_failed",this.error_description=t}}const Bt=async e=>{const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(f=>f.toString(16).padStart(2,"0")).join("")},Cn=/^did:web:.{1,}:dids:.{1,}/g;function In(e){let t="";const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()",o=n.length;let s=0;for(;s<e;)t+=n.charAt(Math.floor(Math.random()*o)),s+=1;return t}const Dn=e=>{const t=JSON.stringify(e);return window.btoa(t)},Pn=e=>{if(e===null)return;const t=window.atob(e);return JSON.parse(t)},Nn=(e,t)=>{const n=e.split("?");if(n.length>=2){const o=`${encodeURIComponent(t)}=`,s=n[1].split(/[&;]/g);for(let f=s.length;f-- >0;)s[f].lastIndexOf(o,0)!==-1&&s.splice(f,1);return n[0]+(s.length>0?`?${s.join("&")}`:"")}return e},zt=()=>{localStorage.removeItem("meeData")},$t=()=>{try{const e=localStorage.getItem("meeData"),t=Pn(e);return typeof t>"u"||typeof t.encrypt>"u"?new Y("Internal error"):new Date(t.exp)<new Date?new Y("Session expired"):t}catch{return new Y("Error getting the Local Storage data")}},qt=e=>typeof e.error<"u",Tn=()=>{const e="60000",t=()=>{const n=$t();qt(n)&&n.error_description==="Session expired"&&zt()};t(),setInterval(()=>{t()},e)},On=e=>{try{return JSON.parse(e)}catch{return}};var kt={exports:{}};(function(e){var t=function(n){var o=1e7,s=7,f=9007199254740992,g=_(f),E="0123456789abcdefghijklmnopqrstuvwxyz",S=typeof BigInt=="function";function w(r,i,a,c){return typeof r>"u"?w[0]:typeof i<"u"?+i==10&&!a?A(r):rr(r,i,a,c):A(r)}function u(r,i){this.value=r,this.sign=i,this.isSmall=!1}u.prototype=Object.create(w.prototype);function p(r){this.value=r,this.sign=r<0,this.isSmall=!0}p.prototype=Object.create(w.prototype);function m(r){this.value=r}m.prototype=Object.create(w.prototype);function T(r){return-f<r&&r<f}function _(r){return r<1e7?[r]:r<1e14?[r%1e7,Math.floor(r/1e7)]:[r%1e7,Math.floor(r/1e7)%1e7,Math.floor(r/1e14)]}function D(r){W(r);var i=r.length;if(i<4&&ue(r,g)<0)switch(i){case 0:return 0;case 1:return r[0];case 2:return r[0]+r[1]*o;default:return r[0]+(r[1]+r[2]*o)*o}return r}function W(r){for(var i=r.length;r[--i]===0;);r.length=i+1}function R(r){for(var i=new Array(r),a=-1;++a<r;)i[a]=0;return i}function O(r){return r>0?Math.floor(r):Math.ceil(r)}function H(r,i){var a=r.length,c=i.length,d=new Array(a),l=0,h=o,y,v;for(v=0;v<c;v++)y=r[v]+i[v]+l,l=y>=h?1:0,d[v]=y-l*h;for(;v<a;)y=r[v]+l,l=y===h?1:0,d[v++]=y-l*h;return l>0&&d.push(l),d}function J(r,i){return r.length>=i.length?H(r,i):H(i,r)}function z(r,i){var a=r.length,c=new Array(a),d=o,l,h;for(h=0;h<a;h++)l=r[h]-d+i,i=Math.floor(l/d),c[h]=l-i*d,i+=1;for(;i>0;)c[h++]=i%d,i=Math.floor(i/d);return c}u.prototype.add=function(r){var i=A(r);if(this.sign!==i.sign)return this.subtract(i.negate());var a=this.value,c=i.value;return i.isSmall?new u(z(a,Math.abs(c)),this.sign):new u(J(a,c),this.sign)},u.prototype.plus=u.prototype.add,p.prototype.add=function(r){var i=A(r),a=this.value;if(a<0!==i.sign)return this.subtract(i.negate());var c=i.value;if(i.isSmall){if(T(a+c))return new p(a+c);c=_(Math.abs(c))}return new u(z(c,Math.abs(a)),a<0)},p.prototype.plus=p.prototype.add,m.prototype.add=function(r){return new m(this.value+A(r).value)},m.prototype.plus=m.prototype.add;function q(r,i){var a=r.length,c=i.length,d=new Array(a),l=0,h=o,y,v;for(y=0;y<c;y++)v=r[y]-l-i[y],v<0?(v+=h,l=1):l=0,d[y]=v;for(y=c;y<a;y++){if(v=r[y]-l,v<0)v+=h;else{d[y++]=v;break}d[y]=v}for(;y<a;y++)d[y]=r[y];return W(d),d}function G(r,i,a){var c;return ue(r,i)>=0?c=q(r,i):(c=q(i,r),a=!a),c=D(c),typeof c=="number"?(a&&(c=-c),new p(c)):new u(c,a)}function k(r,i,a){var c=r.length,d=new Array(c),l=-i,h=o,y,v;for(y=0;y<c;y++)v=r[y]+l,l=Math.floor(v/h),v%=h,d[y]=v<0?v+h:v;return d=D(d),typeof d=="number"?(a&&(d=-d),new p(d)):new u(d,a)}u.prototype.subtract=function(r){var i=A(r);if(this.sign!==i.sign)return this.add(i.negate());var a=this.value,c=i.value;return i.isSmall?k(a,Math.abs(c),this.sign):G(a,c,this.sign)},u.prototype.minus=u.prototype.subtract,p.prototype.subtract=function(r){var i=A(r),a=this.value;if(a<0!==i.sign)return this.add(i.negate());var c=i.value;return i.isSmall?new p(a-c):k(c,Math.abs(a),a>=0)},p.prototype.minus=p.prototype.subtract,m.prototype.subtract=function(r){return new m(this.value-A(r).value)},m.prototype.minus=m.prototype.subtract,u.prototype.negate=function(){return new u(this.value,!this.sign)},p.prototype.negate=function(){var r=this.sign,i=new p(-this.value);return i.sign=!r,i},m.prototype.negate=function(){return new m(-this.value)},u.prototype.abs=function(){return new u(this.value,!1)},p.prototype.abs=function(){return new p(Math.abs(this.value))},m.prototype.abs=function(){return new m(this.value>=0?this.value:-this.value)};function oe(r,i){var a=r.length,c=i.length,d=a+c,l=R(d),h=o,y,v,b,I,M;for(b=0;b<a;++b){I=r[b];for(var N=0;N<c;++N)M=i[N],y=I*M+l[b+N],v=Math.floor(y/h),l[b+N]=y-v*h,l[b+N+1]+=v}return W(l),l}function he(r,i){var a=r.length,c=new Array(a),d=o,l=0,h,y;for(y=0;y<a;y++)h=r[y]*i+l,l=Math.floor(h/d),c[y]=h-l*d;for(;l>0;)c[y++]=l%d,l=Math.floor(l/d);return c}function nt(r,i){for(var a=[];i-- >0;)a.push(0);return a.concat(r)}function we(r,i){var a=Math.max(r.length,i.length);if(a<=30)return oe(r,i);a=Math.ceil(a/2);var c=r.slice(a),d=r.slice(0,a),l=i.slice(a),h=i.slice(0,a),y=we(d,h),v=we(c,l),b=we(J(d,c),J(h,l)),I=J(J(y,nt(q(q(b,y),v),a)),nt(v,2*a));return W(I),I}function Yt(r,i){return-.012*r-.012*i+15e-6*r*i>0}u.prototype.multiply=function(r){var i=A(r),a=this.value,c=i.value,d=this.sign!==i.sign,l;if(i.isSmall){if(c===0)return w[0];if(c===1)return this;if(c===-1)return this.negate();if(l=Math.abs(c),l<o)return new u(he(a,l),d);c=_(l)}return Yt(a.length,c.length)?new u(we(a,c),d):new u(oe(a,c),d)},u.prototype.times=u.prototype.multiply;function it(r,i,a){return r<o?new u(he(i,r),a):new u(oe(i,_(r)),a)}p.prototype._multiplyBySmall=function(r){return T(r.value*this.value)?new p(r.value*this.value):it(Math.abs(r.value),_(Math.abs(this.value)),this.sign!==r.sign)},u.prototype._multiplyBySmall=function(r){return r.value===0?w[0]:r.value===1?this:r.value===-1?this.negate():it(Math.abs(r.value),this.value,this.sign!==r.sign)},p.prototype.multiply=function(r){return A(r)._multiplyBySmall(this)},p.prototype.times=p.prototype.multiply,m.prototype.multiply=function(r){return new m(this.value*A(r).value)},m.prototype.times=m.prototype.multiply;function ot(r){var i=r.length,a=R(i+i),c=o,d,l,h,y,v;for(h=0;h<i;h++){y=r[h],l=0-y*y;for(var b=h;b<i;b++)v=r[b],d=2*(y*v)+a[h+b]+l,l=Math.floor(d/c),a[h+b]=d-l*c;a[h+i]=l}return W(a),a}u.prototype.square=function(){return new u(ot(this.value),!1)},p.prototype.square=function(){var r=this.value*this.value;return T(r)?new p(r):new u(ot(_(Math.abs(this.value))),!1)},m.prototype.square=function(r){return new m(this.value*this.value)};function Zt(r,i){var a=r.length,c=i.length,d=o,l=R(i.length),h=i[c-1],y=Math.ceil(d/(2*h)),v=he(r,y),b=he(i,y),I,M,N,Q,F,We,He;for(v.length<=a&&v.push(0),b.push(0),h=b[c-1],M=a-c;M>=0;M--){for(I=d-1,v[M+c]!==h&&(I=Math.floor((v[M+c]*d+v[M+c-1])/h)),N=0,Q=0,We=b.length,F=0;F<We;F++)N+=I*b[F],He=Math.floor(N/d),Q+=v[M+F]-(N-He*d),N=He,Q<0?(v[M+F]=Q+d,Q=-1):(v[M+F]=Q,Q=0);for(;Q!==0;){for(I-=1,N=0,F=0;F<We;F++)N+=v[M+F]-d+b[F],N<0?(v[M+F]=N+d,N=0):(v[M+F]=N,N=1);Q+=N}l[M]=I}return v=at(v,y)[0],[D(l),D(v)]}function jt(r,i){for(var a=r.length,c=i.length,d=[],l=[],h=o,y,v,b,I,M;a;){if(l.unshift(r[--a]),W(l),ue(l,i)<0){d.push(0);continue}v=l.length,b=l[v-1]*h+l[v-2],I=i[c-1]*h+i[c-2],v>c&&(b=(b+1)*h),y=Math.ceil(b/I);do{if(M=he(i,y),ue(M,l)<=0)break;y--}while(y);d.push(y),l=q(l,M)}return d.reverse(),[D(d),D(l)]}function at(r,i){var a=r.length,c=R(a),d=o,l,h,y,v;for(y=0,l=a-1;l>=0;--l)v=y*d+r[l],h=O(v/i),y=v-h*i,c[l]=h|0;return[c,y|0]}function ce(r,i){var a,c=A(i);if(S)return[new m(r.value/c.value),new m(r.value%c.value)];var d=r.value,l=c.value,h;if(l===0)throw new Error("Cannot divide by zero");if(r.isSmall)return c.isSmall?[new p(O(d/l)),new p(d%l)]:[w[0],r];if(c.isSmall){if(l===1)return[r,w[0]];if(l==-1)return[r.negate(),w[0]];var y=Math.abs(l);if(y<o){a=at(d,y),h=D(a[0]);var v=a[1];return r.sign&&(v=-v),typeof h=="number"?(r.sign!==c.sign&&(h=-h),[new p(h),new p(v)]):[new u(h,r.sign!==c.sign),new p(v)]}l=_(y)}var b=ue(d,l);if(b===-1)return[w[0],r];if(b===0)return[w[r.sign===c.sign?1:-1],w[0]];d.length+l.length<=200?a=Zt(d,l):a=jt(d,l),h=a[0];var I=r.sign!==c.sign,M=a[1],N=r.sign;return typeof h=="number"?(I&&(h=-h),h=new p(h)):h=new u(h,I),typeof M=="number"?(N&&(M=-M),M=new p(M)):M=new u(M,N),[h,M]}u.prototype.divmod=function(r){var i=ce(this,r);return{quotient:i[0],remainder:i[1]}},m.prototype.divmod=p.prototype.divmod=u.prototype.divmod,u.prototype.divide=function(r){return ce(this,r)[0]},m.prototype.over=m.prototype.divide=function(r){return new m(this.value/A(r).value)},p.prototype.over=p.prototype.divide=u.prototype.over=u.prototype.divide,u.prototype.mod=function(r){return ce(this,r)[1]},m.prototype.mod=m.prototype.remainder=function(r){return new m(this.value%A(r).value)},p.prototype.remainder=p.prototype.mod=u.prototype.remainder=u.prototype.mod,u.prototype.pow=function(r){var i=A(r),a=this.value,c=i.value,d,l,h;if(c===0)return w[1];if(a===0)return w[0];if(a===1)return w[1];if(a===-1)return i.isEven()?w[1]:w[-1];if(i.sign)return w[0];if(!i.isSmall)throw new Error("The exponent "+i.toString()+" is too large.");if(this.isSmall&&T(d=Math.pow(a,c)))return new p(O(d));for(l=this,h=w[1];c&!0&&(h=h.times(l),--c),c!==0;)c/=2,l=l.square();return h},p.prototype.pow=u.prototype.pow,m.prototype.pow=function(r){var i=A(r),a=this.value,c=i.value,d=BigInt(0),l=BigInt(1),h=BigInt(2);if(c===d)return w[1];if(a===d)return w[0];if(a===l)return w[1];if(a===BigInt(-1))return i.isEven()?w[1]:w[-1];if(i.isNegative())return new m(d);for(var y=this,v=w[1];(c&l)===l&&(v=v.times(y),--c),c!==d;)c/=h,y=y.square();return v},u.prototype.modPow=function(r,i){if(r=A(r),i=A(i),i.isZero())throw new Error("Cannot take modPow with modulus 0");var a=w[1],c=this.mod(i);for(r.isNegative()&&(r=r.multiply(w[-1]),c=c.modInv(i));r.isPositive();){if(c.isZero())return w[0];r.isOdd()&&(a=a.multiply(c).mod(i)),r=r.divide(2),c=c.square().mod(i)}return a},m.prototype.modPow=p.prototype.modPow=u.prototype.modPow;function ue(r,i){if(r.length!==i.length)return r.length>i.length?1:-1;for(var a=r.length-1;a>=0;a--)if(r[a]!==i[a])return r[a]>i[a]?1:-1;return 0}u.prototype.compareAbs=function(r){var i=A(r),a=this.value,c=i.value;return i.isSmall?1:ue(a,c)},p.prototype.compareAbs=function(r){var i=A(r),a=Math.abs(this.value),c=i.value;return i.isSmall?(c=Math.abs(c),a===c?0:a>c?1:-1):-1},m.prototype.compareAbs=function(r){var i=this.value,a=A(r).value;return i=i>=0?i:-i,a=a>=0?a:-a,i===a?0:i>a?1:-1},u.prototype.compare=function(r){if(r===1/0)return-1;if(r===-1/0)return 1;var i=A(r),a=this.value,c=i.value;return this.sign!==i.sign?i.sign?1:-1:i.isSmall?this.sign?-1:1:ue(a,c)*(this.sign?-1:1)},u.prototype.compareTo=u.prototype.compare,p.prototype.compare=function(r){if(r===1/0)return-1;if(r===-1/0)return 1;var i=A(r),a=this.value,c=i.value;return i.isSmall?a==c?0:a>c?1:-1:a<0!==i.sign?a<0?-1:1:a<0?1:-1},p.prototype.compareTo=p.prototype.compare,m.prototype.compare=function(r){if(r===1/0)return-1;if(r===-1/0)return 1;var i=this.value,a=A(r).value;return i===a?0:i>a?1:-1},m.prototype.compareTo=m.prototype.compare,u.prototype.equals=function(r){return this.compare(r)===0},m.prototype.eq=m.prototype.equals=p.prototype.eq=p.prototype.equals=u.prototype.eq=u.prototype.equals,u.prototype.notEquals=function(r){return this.compare(r)!==0},m.prototype.neq=m.prototype.notEquals=p.prototype.neq=p.prototype.notEquals=u.prototype.neq=u.prototype.notEquals,u.prototype.greater=function(r){return this.compare(r)>0},m.prototype.gt=m.prototype.greater=p.prototype.gt=p.prototype.greater=u.prototype.gt=u.prototype.greater,u.prototype.lesser=function(r){return this.compare(r)<0},m.prototype.lt=m.prototype.lesser=p.prototype.lt=p.prototype.lesser=u.prototype.lt=u.prototype.lesser,u.prototype.greaterOrEquals=function(r){return this.compare(r)>=0},m.prototype.geq=m.prototype.greaterOrEquals=p.prototype.geq=p.prototype.greaterOrEquals=u.prototype.geq=u.prototype.greaterOrEquals,u.prototype.lesserOrEquals=function(r){return this.compare(r)<=0},m.prototype.leq=m.prototype.lesserOrEquals=p.prototype.leq=p.prototype.lesserOrEquals=u.prototype.leq=u.prototype.lesserOrEquals,u.prototype.isEven=function(){return(this.value[0]&1)===0},p.prototype.isEven=function(){return(this.value&1)===0},m.prototype.isEven=function(){return(this.value&BigInt(1))===BigInt(0)},u.prototype.isOdd=function(){return(this.value[0]&1)===1},p.prototype.isOdd=function(){return(this.value&1)===1},m.prototype.isOdd=function(){return(this.value&BigInt(1))===BigInt(1)},u.prototype.isPositive=function(){return!this.sign},p.prototype.isPositive=function(){return this.value>0},m.prototype.isPositive=p.prototype.isPositive,u.prototype.isNegative=function(){return this.sign},p.prototype.isNegative=function(){return this.value<0},m.prototype.isNegative=p.prototype.isNegative,u.prototype.isUnit=function(){return!1},p.prototype.isUnit=function(){return Math.abs(this.value)===1},m.prototype.isUnit=function(){return this.abs().value===BigInt(1)},u.prototype.isZero=function(){return!1},p.prototype.isZero=function(){return this.value===0},m.prototype.isZero=function(){return this.value===BigInt(0)},u.prototype.isDivisibleBy=function(r){var i=A(r);return i.isZero()?!1:i.isUnit()?!0:i.compareAbs(2)===0?this.isEven():this.mod(i).isZero()},m.prototype.isDivisibleBy=p.prototype.isDivisibleBy=u.prototype.isDivisibleBy;function st(r){var i=r.abs();if(i.isUnit())return!1;if(i.equals(2)||i.equals(3)||i.equals(5))return!0;if(i.isEven()||i.isDivisibleBy(3)||i.isDivisibleBy(5))return!1;if(i.lesser(49))return!0}function Ne(r,i){for(var a=r.prev(),c=a,d=0,l,h,y;c.isEven();)c=c.divide(2),d++;e:for(h=0;h<i.length;h++)if(!r.lesser(i[h])&&(y=t(i[h]).modPow(c,r),!(y.isUnit()||y.equals(a)))){for(l=d-1;l!=0;l--){if(y=y.square().mod(r),y.isUnit())return!1;if(y.equals(a))continue e}return!1}return!0}u.prototype.isPrime=function(r){var i=st(this);if(i!==n)return i;var a=this.abs(),c=a.bitLength();if(c<=64)return Ne(a,[2,3,5,7,11,13,17,19,23,29,31,37]);for(var d=Math.log(2)*c.toJSNumber(),l=Math.ceil(r===!0?2*Math.pow(d,2):d),h=[],y=0;y<l;y++)h.push(t(y+2));return Ne(a,h)},m.prototype.isPrime=p.prototype.isPrime=u.prototype.isPrime,u.prototype.isProbablePrime=function(r,i){var a=st(this);if(a!==n)return a;for(var c=this.abs(),d=r===n?5:r,l=[],h=0;h<d;h++)l.push(t.randBetween(2,c.minus(2),i));return Ne(c,l)},m.prototype.isProbablePrime=p.prototype.isProbablePrime=u.prototype.isProbablePrime,u.prototype.modInv=function(r){for(var i=t.zero,a=t.one,c=A(r),d=this.abs(),l,h,y;!d.isZero();)l=c.divide(d),h=i,y=c,i=a,c=d,a=h.subtract(l.multiply(a)),d=y.subtract(l.multiply(d));if(!c.isUnit())throw new Error(this.toString()+" and "+r.toString()+" are not co-prime");return i.compare(0)===-1&&(i=i.add(r)),this.isNegative()?i.negate():i},m.prototype.modInv=p.prototype.modInv=u.prototype.modInv,u.prototype.next=function(){var r=this.value;return this.sign?k(r,1,this.sign):new u(z(r,1),this.sign)},p.prototype.next=function(){var r=this.value;return r+1<f?new p(r+1):new u(g,!1)},m.prototype.next=function(){return new m(this.value+BigInt(1))},u.prototype.prev=function(){var r=this.value;return this.sign?new u(z(r,1),!0):k(r,1,this.sign)},p.prototype.prev=function(){var r=this.value;return r-1>-f?new p(r-1):new u(g,!0)},m.prototype.prev=function(){return new m(this.value-BigInt(1))};for(var te=[1];2*te[te.length-1]<=o;)te.push(2*te[te.length-1]);var ye=te.length,le=te[ye-1];function ct(r){return Math.abs(r)<=o}u.prototype.shiftLeft=function(r){var i=A(r).toJSNumber();if(!ct(i))throw new Error(String(i)+" is too large for shifting.");if(i<0)return this.shiftRight(-i);var a=this;if(a.isZero())return a;for(;i>=ye;)a=a.multiply(le),i-=ye-1;return a.multiply(te[i])},m.prototype.shiftLeft=p.prototype.shiftLeft=u.prototype.shiftLeft,u.prototype.shiftRight=function(r){var i,a=A(r).toJSNumber();if(!ct(a))throw new Error(String(a)+" is too large for shifting.");if(a<0)return this.shiftLeft(-a);for(var c=this;a>=ye;){if(c.isZero()||c.isNegative()&&c.isUnit())return c;i=ce(c,le),c=i[1].isNegative()?i[0].prev():i[0],a-=ye-1}return i=ce(c,te[a]),i[1].isNegative()?i[0].prev():i[0]},m.prototype.shiftRight=p.prototype.shiftRight=u.prototype.shiftRight;function Te(r,i,a){i=A(i);for(var c=r.isNegative(),d=i.isNegative(),l=c?r.not():r,h=d?i.not():i,y=0,v=0,b=null,I=null,M=[];!l.isZero()||!h.isZero();)b=ce(l,le),y=b[1].toJSNumber(),c&&(y=le-1-y),I=ce(h,le),v=I[1].toJSNumber(),d&&(v=le-1-v),l=b[0],h=I[0],M.push(a(y,v));for(var N=a(c?1:0,d?1:0)!==0?t(-1):t(0),Q=M.length-1;Q>=0;Q-=1)N=N.multiply(le).add(t(M[Q]));return N}u.prototype.not=function(){return this.negate().prev()},m.prototype.not=p.prototype.not=u.prototype.not,u.prototype.and=function(r){return Te(this,r,function(i,a){return i&a})},m.prototype.and=p.prototype.and=u.prototype.and,u.prototype.or=function(r){return Te(this,r,function(i,a){return i|a})},m.prototype.or=p.prototype.or=u.prototype.or,u.prototype.xor=function(r){return Te(this,r,function(i,a){return i^a})},m.prototype.xor=p.prototype.xor=u.prototype.xor;var Oe=1<<30,Xt=(o&-o)*(o&-o)|Oe;function Ee(r){var i=r.value,a=typeof i=="number"?i|Oe:typeof i=="bigint"?i|BigInt(Oe):i[0]+i[1]*o|Xt;return a&-a}function ut(r,i){if(i.compareTo(r)<=0){var a=ut(r,i.square(i)),c=a.p,d=a.e,l=c.multiply(i);return l.compareTo(r)<=0?{p:l,e:d*2+1}:{p:c,e:d*2}}return{p:t(1),e:0}}u.prototype.bitLength=function(){var r=this;return r.compareTo(t(0))<0&&(r=r.negate().subtract(t(1))),r.compareTo(t(0))===0?t(0):t(ut(r,t(2)).e).add(t(1))},m.prototype.bitLength=p.prototype.bitLength=u.prototype.bitLength;function lt(r,i){return r=A(r),i=A(i),r.greater(i)?r:i}function Ke(r,i){return r=A(r),i=A(i),r.lesser(i)?r:i}function dt(r,i){if(r=A(r).abs(),i=A(i).abs(),r.equals(i))return r;if(r.isZero())return i;if(i.isZero())return r;for(var a=w[1],c,d;r.isEven()&&i.isEven();)c=Ke(Ee(r),Ee(i)),r=r.divide(c),i=i.divide(c),a=a.multiply(c);for(;r.isEven();)r=r.divide(Ee(r));do{for(;i.isEven();)i=i.divide(Ee(i));r.greater(i)&&(d=i,i=r,r=d),i=i.subtract(r)}while(!i.isZero());return a.isUnit()?r:r.multiply(a)}function er(r,i){return r=A(r).abs(),i=A(i).abs(),r.divide(dt(r,i)).multiply(i)}function tr(r,i,a){r=A(r),i=A(i);var c=a||Math.random,d=Ke(r,i),l=lt(r,i),h=l.subtract(d).add(1);if(h.isSmall)return d.add(Math.floor(c()*h));for(var y=ge(h,o).value,v=[],b=!0,I=0;I<y.length;I++){var M=b?y[I]+(I+1<y.length?y[I+1]/o:0):o,N=O(c()*M);v.push(N),N<y[I]&&(b=!1)}return d.add(w.fromArray(v,o,!1))}var rr=function(r,i,a,c){a=a||E,r=String(r),c||(r=r.toLowerCase(),a=a.toLowerCase());var d=r.length,l,h=Math.abs(i),y={};for(l=0;l<a.length;l++)y[a[l]]=l;for(l=0;l<d;l++){var v=r[l];if(v!=="-"&&v in y&&y[v]>=h){if(v==="1"&&h===1)continue;throw new Error(v+" is not a valid digit in base "+i+".")}}i=A(i);var b=[],I=r[0]==="-";for(l=I?1:0;l<r.length;l++){var v=r[l];if(v in y)b.push(A(y[v]));else if(v==="<"){var M=l;do l++;while(r[l]!==">"&&l<r.length);b.push(A(r.slice(M+1,l)))}else throw new Error(v+" is not a valid character")}return pt(b,i,I)};function pt(r,i,a){var c=w[0],d=w[1],l;for(l=r.length-1;l>=0;l--)c=c.add(r[l].times(d)),d=d.times(i);return a?c.negate():c}function nr(r,i){return i=i||E,r<i.length?i[r]:"<"+r+">"}function ge(r,i){if(i=t(i),i.isZero()){if(r.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(i.equals(-1)){if(r.isZero())return{value:[0],isNegative:!1};if(r.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-r.toJSNumber())).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var a=Array.apply(null,Array(r.toJSNumber()-1)).map(Array.prototype.valueOf,[0,1]);return a.unshift([1]),{value:[].concat.apply([],a),isNegative:!1}}var c=!1;if(r.isNegative()&&i.isPositive()&&(c=!0,r=r.abs()),i.isUnit())return r.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(r.toJSNumber())).map(Number.prototype.valueOf,1),isNegative:c};for(var d=[],l=r,h;l.isNegative()||l.compareAbs(i)>=0;){h=l.divmod(i),l=h.quotient;var y=h.remainder;y.isNegative()&&(y=i.minus(y).abs(),l=l.next()),d.push(y.toJSNumber())}return d.push(l.toJSNumber()),{value:d.reverse(),isNegative:c}}function ft(r,i,a){var c=ge(r,i);return(c.isNegative?"-":"")+c.value.map(function(d){return nr(d,a)}).join("")}u.prototype.toArray=function(r){return ge(this,r)},p.prototype.toArray=function(r){return ge(this,r)},m.prototype.toArray=function(r){return ge(this,r)},u.prototype.toString=function(r,i){if(r===n&&(r=10),r!==10)return ft(this,r,i);for(var a=this.value,c=a.length,d=String(a[--c]),l="0000000",h;--c>=0;)h=String(a[c]),d+=l.slice(h.length)+h;var y=this.sign?"-":"";return y+d},p.prototype.toString=function(r,i){return r===n&&(r=10),r!=10?ft(this,r,i):String(this.value)},m.prototype.toString=p.prototype.toString,m.prototype.toJSON=u.prototype.toJSON=p.prototype.toJSON=function(){return this.toString()},u.prototype.valueOf=function(){return parseInt(this.toString(),10)},u.prototype.toJSNumber=u.prototype.valueOf,p.prototype.valueOf=function(){return this.value},p.prototype.toJSNumber=p.prototype.valueOf,m.prototype.valueOf=m.prototype.toJSNumber=function(){return parseInt(this.toString(),10)};function ht(r){if(T(+r)){var i=+r;if(i===O(i))return S?new m(BigInt(i)):new p(i);throw new Error("Invalid integer: "+r)}var a=r[0]==="-";a&&(r=r.slice(1));var c=r.split(/e/i);if(c.length>2)throw new Error("Invalid integer: "+c.join("e"));if(c.length===2){var d=c[1];if(d[0]==="+"&&(d=d.slice(1)),d=+d,d!==O(d)||!T(d))throw new Error("Invalid integer: "+d+" is not a valid exponent.");var l=c[0],h=l.indexOf(".");if(h>=0&&(d-=l.length-h-1,l=l.slice(0,h)+l.slice(h+1)),d<0)throw new Error("Cannot include negative exponent part for integers");l+=new Array(d+1).join("0"),r=l}var y=/^([0-9][0-9]*)$/.test(r);if(!y)throw new Error("Invalid integer: "+r);if(S)return new m(BigInt(a?"-"+r:r));for(var v=[],b=r.length,I=s,M=b-I;b>0;)v.push(+r.slice(M,b)),M-=I,M<0&&(M=0),b-=I;return W(v),new u(v,a)}function ir(r){if(S)return new m(BigInt(r));if(T(r)){if(r!==O(r))throw new Error(r+" is not an integer.");return new p(r)}return ht(r.toString())}function A(r){return typeof r=="number"?ir(r):typeof r=="string"?ht(r):typeof r=="bigint"?new m(r):r}for(var de=0;de<1e3;de++)w[de]=A(de),de>0&&(w[-de]=A(-de));return w.one=w[1],w.zero=w[0],w.minusOne=w[-1],w.max=lt,w.min=Ke,w.gcd=dt,w.lcm=er,w.isInstance=function(r){return r instanceof u||r instanceof p||r instanceof m},w.randBetween=tr,w.fromArray=function(r,i,a){return pt(r.map(A),A(i||10),a)},w}();e.hasOwnProperty("exports")&&(e.exports=t)})(kt);var rt=kt.exports;function Kn(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),o=0;o<n.length;o++)n[o]=255;for(var s=0;s<e.length;s++){var f=e.charAt(s),g=f.charCodeAt(0);if(n[g]!==255)throw new TypeError(f+" is ambiguous");n[g]=s}var E=e.length,S=e.charAt(0),w=Math.log(E)/Math.log(256),u=Math.log(256)/Math.log(E);function p(_){if(_ instanceof Uint8Array||(ArrayBuffer.isView(_)?_=new Uint8Array(_.buffer,_.byteOffset,_.byteLength):Array.isArray(_)&&(_=Uint8Array.from(_))),!(_ instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(_.length===0)return"";for(var D=0,W=0,R=0,O=_.length;R!==O&&_[R]===0;)R++,D++;for(var H=(O-R)*u+1>>>0,J=new Uint8Array(H);R!==O;){for(var z=_[R],q=0,G=H-1;(z!==0||q<W)&&G!==-1;G--,q++)z+=256*J[G]>>>0,J[G]=z%E>>>0,z=z/E>>>0;if(z!==0)throw new Error("Non-zero carry");W=q,R++}for(var k=H-W;k!==H&&J[k]===0;)k++;for(var oe=S.repeat(D);k<H;++k)oe+=e.charAt(J[k]);return oe}function m(_){if(typeof _!="string")throw new TypeError("Expected String");if(_.length===0)return new Uint8Array;var D=0;if(_[D]!==" "){for(var W=0,R=0;_[D]===S;)W++,D++;for(var O=(_.length-D)*w+1>>>0,H=new Uint8Array(O);_[D];){var J=n[_.charCodeAt(D)];if(J===255)return;for(var z=0,q=O-1;(J!==0||z<R)&&q!==-1;q--,z++)J+=E*H[q]>>>0,H[q]=J%256>>>0,J=J/256>>>0;if(J!==0)throw new Error("Non-zero carry");R=z,D++}if(_[D]!==" "){for(var G=O-R;G!==O&&H[G]===0;)G++;for(var k=new Uint8Array(W+(O-G)),oe=W;G!==O;)k[oe++]=H[G++];return k}}}function T(_){var D=m(_);if(D)return D;throw new Error(`Non-${t} character`)}return{encode:p,decodeUnsafe:m,decode:T}}var Wn=Kn,Hn=Wn;const Rn=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")};class Un{constructor(t,n,o){this.name=t,this.prefix=n,this.baseEncode=o}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class xn{constructor(t,n,o){if(this.name=t,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=o}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return Ft(this,t)}}class Jn{constructor(t){this.decoders=t}or(t){return Ft(this,t)}decode(t){const n=t[0],o=this.decoders[n];if(o)return o.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Ft=(e,t)=>new Jn({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class Ln{constructor(t,n,o,s){this.name=t,this.prefix=n,this.baseEncode=o,this.baseDecode=s,this.encoder=new Un(t,n,o),this.decoder=new xn(t,n,s)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const Bn=({name:e,prefix:t,encode:n,decode:o})=>new Ln(e,t,n,o),Gt=({prefix:e,name:t,alphabet:n})=>{const{encode:o,decode:s}=Hn(n,t);return Bn({prefix:e,name:t,encode:o,decode:f=>Rn(s(f))})},zn=Gt({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});Gt({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});const bt=[128,36],Se=rt(2),ke=Se.pow(256).subtract(Se.pow(224)).add(Se.pow(192)).add(Se.pow(96)).subtract(1),$n=rt("41058363725152142129326129780047268409114441015993725554835256314039467401291"),qn=ke.add(1).divide(4);function _t(e,t){let n=`${e}`;for(;n.length<t;)n=`0${n}`;return n}function kn(e){return[...new Uint8Array(e)].map(t=>t.toString(16).padStart(2,"0")).join("")}const Fn=e=>{var t;const n=(t=e.match(/.{1,2}/g))==null?void 0:t.map(s=>parseInt(s,16));if(typeof n>"u")throw new Error("Hex string invalid");return Uint8Array.from(n)};function Gn(e){const t=Number(e[1])-2,n=rt(e.substring(2),16);let o=n.pow(3).subtract(n.multiply(3)).add($n).modPow(qn,ke);return o.mod(2).toJSNumber()!==t&&(o=ke.subtract(o)),`04${_t(n.toString(16),64)}${_t(o.toString(16),64)}`}const Qn=async e=>{try{if(typeof e.sub>"u")return null;const t=e.sub;if(!t.startsWith("did:key"))return null;const n=t.split(":")[2],o=zn.decode(n);if(o[0]===bt[0]&&o[1]===bt[1]){const s=o.slice(2,o.length);if(s.length===33||s.length===64||s.length===65){const f=Gn(kn(s)),g=await crypto.subtle.importKey("raw",Fn(f),{name:"ECDSA",namedCurve:"P-256"},!0,["verify"]);return await et(g)}}return null}catch(t){return console.log(t),null}},Vn=async e=>{var t;try{if(typeof e.sub>"u"||!Cn.test(e.sub))return null;const n=(t=e.sub)==null?void 0:t.split("did:web:");if(typeof n>"u"||n.length!==2)return null;const s=`https://${n[1].replaceAll(":","/")}/did.json`,f=await fetch(s).then(E=>E.json()),g=f.verificationMethod.find(E=>E.type==="JsonWebKey2020");return typeof g>"u"||f.id!==e.sub?null:g.publicKeyJwk}catch{return null}};function Yn(e){const{aud:t,exp:n,iat:o,jti:s,nbf:f,sub:g,nonce:E,...S}=e,w=S,u={...w};return Object.keys(w).forEach(p=>{const m=On(w[p]);typeof m<"u"&&(u[p]=m)}),u}const Zn=async e=>{var t,n;switch(!0){case((t=e.sub)==null?void 0:t.startsWith("did:web")):return Vn(e);case((n=e.sub)==null?void 0:n.startsWith("did:key")):return Qn(e);default:return null}};async function jn(e,t){try{const n=$t();if(zt(),qt(n))return{error:n};const o=await Gr(n.encrypt,"RSA-OAEP"),s=await tn(e,o),f=new TextDecoder().decode(s.plaintext),g=bn(f),E=await Zn(g);if(E===null)return{error:new Y("Can not get jwk from payload")};const S=await Rt(E,"ES256"),w=await yn(f,S,{audience:t}),{payload:u}=w;return typeof u.error<"u"?{error:new Y(u.error)}:u.iss!==u.sub?{error:new Y("iss should be equal to sub")}:typeof n>"u"||n?.nonce===null?{error:new Y("No nonce found")}:await Bt(n.nonce)!==u.nonce?{error:new Y("Nonce is not valid")}:{data:Yn(u)}}catch(n){return{error:new Y(n)}}}async function Xn(e,t,n,o){if(t===null||typeof t.redirect_uri>"u")throw new Y("Please provide valid redirect url",De.request_malformed);return await new Sn({...e}).setProtectedHeader({alg:"ES256",jwk:o}).setIssuedAt().setAudience(t?.redirect_uri).sign(n)}const ei=async()=>{const e=await At("ES256",{extractable:!0}),t=await At("RSA-OAEP",{extractable:!0});return{sign:e,encrypt:t}},ti=async e=>await et(e),Mt=async e=>await on(e),Ct="https://auth.mee.foundation/",ri="authorize";let pe=null,Fe=null,Ge=null;const Qe=In(50),ni=e=>{const o=window.location.search.substring(1).split("&").find(s=>s.split("=")[0]===e);return o?.split("=")[1]},Qt=()=>{try{const e="2";if(Qe!==null&&Ge!==null){const t=Date.now()+36e5*e,n=Dn({nonce:Qe,...Ge,exp:t});localStorage.setItem("meeData",n)}}finally{pe!==null&&Fe!==null&&window.open(pe.client_id?`${Ct}${ri}?scope=openid&request=${Fe}`:`${Ct}app`,"_blank")}},ii="#111827",oi=async e=>{const t=document.getElementById(e),n=document.createElement("button"),o=document.createElement("img");o.src=Mn,o.alt="Mee",o.style.width="18px",o.style.height="18px";const s=document.createElement("p");o.className="meeLogo",s.className="meeText",n.className="meeButton",s.innerHTML="Connect with Mee",s.style.fontWeight="700",s.style.margin="0px",s.style.fontSize="14px",s.style.color=ii,n.style.display="flex",n.style.flexDirection="row",n.style.alignItems="center",n.style.justifyContent="center",n.style.width="100%",n.style.gap="8px",n.style.paddingLeft="8px",n.style.paddingRight="16px",n.style.borderRadius="3px",n.style.border="0px solid #808080",n.style.backgroundColor="#FFF",n.style.paddingTop="9px",n.style.paddingBottom="9px",n.addEventListener("mouseover",()=>{n.style.boxShadow="0px 4px 6px -2px #0000000D, 0px 10px 15px -3px #0000001A"}),n.addEventListener("mouseleave",()=>{n.style.boxShadow=""}),n.addEventListener("click",()=>Qt()),n.appendChild(o),n.appendChild(s),t?.appendChild(n)},It=()=>{window.history.replaceState({},document.title,Nn(window.location.href,"id_token"))},ai=async(e,t)=>{Tn(),typeof e.container_id<"u"&&oi(e.container_id);const n=await ei(),o=await ti(n.encrypt.publicKey),{container_id:s,...f}=e;pe={...f,client_id:e.redirect_uri,client_metadata:{...e.client_metadata,subject_syntax_types_supported:["did:key"],application_type:"web",jwks:[{...o,alg:"RSA-OAEP",key_ops:["encrypt","wrapKey"]}]},scope:"openid",response_type:"id_token",nonce:await Bt(Qe)};const g=await et(n.sign.publicKey);Fe=await Xn(pe,pe,n.sign.privateKey,g);const E=await Mt(n.sign.privateKey);Ge={encrypt:await Mt(n.encrypt.privateKey),sign:E};const w=ni("id_token");if(typeof w<"u")if(w.startsWith("error:")){const u=w.split(",error_description:"),p=u.length===2?u[1].replace(/%20/g," "):"",m=u[0].split("error:"),T=m.length===2?m[1]:"",_=T in De,D=new Y(p,_?T:De.unknown_error);It(),t({error:D,data:void 0})}else It(),jn(w,pe.client_id).then(u=>t(u))},hi=()=>{Qt()},si=(e,t)=>{ai(e,t)},ci=e=>{si({client_metadata:{client_name:"Mee Foundation",logo_uri:"https://mee.foundation/favicon.png",display_url:"mee.foundation",contacts:[]},redirect_uri:"https://mee.foundation/",claims:{id_token:{name:{attribute_type:"https://schema.org/name",name:"First Name",typ:"string",essential:!0,retention_duration:qe.whileUsingApp,business_purpose:"",is_sensitive:!0},email:{attribute_type:"https://schema.org/email",name:"Email",typ:"email",essential:!1,retention_duration:qe.whileUsingApp,business_purpose:"",is_sensitive:!0}}}},t=>{localStorage.setItem("userData",window.btoa(JSON.stringify(t))),t!==null&&typeof t?.data<"u"&&typeof t?.data.name<"u"?window.location.href="/subscribe":e()})},ui=3e3,Pe=document.querySelector(".scrollContainer"),li=.1;if(Pe){const e=Pe.getBoundingClientRect().height-1;document.body.style.height=Math.floor(e)+"px"}let xe=0;const Vt=()=>{xe+=Math.floor((window.pageYOffset-xe)*li);const e="translateY(-"+xe+"px)";Pe.style.transform=e,requestAnimationFrame(Vt)};Pe&&requestAnimationFrame(Vt);const Ae=document.getElementById("connectionErrAlert"),di=()=>{Ae&&Ae.classList.remove("hidden"),setTimeout(()=>{Ae&&Ae.classList.add("hidden")},ui)};ci(di);window.onscroll=function(){pi()};function pi(){const e=document.getElementById("scroll-indicator");if(e){const t=document.body.scrollTop||document.documentElement.scrollTop;let n=document.documentElement.scrollHeight-document.documentElement.clientHeight;const o=fi(t,n);e.style.width=o+"%"}}let me=0;function fi(e,t){const n=document.getElementById("envision"),o=document.getElementById("header");if(n&&o){const s=document.getElementById("sroll-to-end");if(n.getBoundingClientRect().height){s&&!s.classList.contains("hidden")&&s.classList.add("hidden"),me===0&&(me=e);const f=(e-me)/(t-me)*100;return f>0?f:0}else return me=0,s&&s.classList.contains("hidden")&&s.classList.remove("hidden"),0}return e/t*100}export{hi as a};
