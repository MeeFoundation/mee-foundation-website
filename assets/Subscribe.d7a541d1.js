import{j as v,M as Q,H as Z,c as ee}from"./MaxW.e49fee63.js";import{r as A,R as te}from"./index.03be2d59.js";import{A as j}from"./ActionButton.7e709943.js";import{F as oe}from"./Footer.fb027768.js";let ne=0;function se(t,r){const f=`atom${++ne}`,h={toString:()=>f};return typeof t=="function"?h.read=t:(h.init=t,h.read=R=>R(h),h.write=(R,D,S)=>D(h,typeof S=="function"?S(R(h)):S)),r&&(h.write=r),h}const F=t=>"init"in t,X=t=>!!t.write,y=new WeakMap,re=(t,r)=>{y.set(t,r),t.catch(()=>{}).finally(()=>y.delete(t))},k=(t,r)=>{const f=y.get(t);f&&(y.delete(t),f(r))},z=(t,r)=>{t.status="fulfilled",t.value=r},W=(t,r)=>{t.status="rejected",t.reason=r},ie=t=>typeof t?.then=="function",I=(t,r)=>"v"in t&&"v"in r&&Object.is(t.v,r.v),N=(t,r)=>"e"in t&&"e"in r&&Object.is(t.e,r.e),w=t=>"v"in t&&t.v instanceof Promise,ue=(t,r)=>"v"in t&&"v"in r&&t.v.orig&&t.v.orig===r.v.orig,U=t=>{if("e"in t)throw t.e;return t.v},de=()=>{const t=new WeakMap,r=new WeakMap,f=new Map;let h,R,D;const S=e=>t.get(e),m=(e,o)=>{const i=t.get(e);if(t.set(e,o),f.has(e)||f.set(e,i),i&&w(i)){const n="v"in o?o.v instanceof Promise?o.v:Promise.resolve(o.v):Promise.reject(o.e);k(i.v,n)}},L=(e,o,i)=>{const n=new Map;let u=!1;i.forEach((s,d)=>{!s&&d===e&&(s=o),s&&(n.set(d,s),o.d.get(d)!==s&&(u=!0))}),(u||o.d.size!==n.size)&&(o.d=n)},p=(e,o,i)=>{const n=S(e),u={d:n?.d||new Map,v:o};if(i&&L(e,u,i),n&&I(n,u)&&n.d===u.d)return n;if(n&&w(n)&&w(u)&&ue(n,u)){if(n.d===u.d)return n;u.v=n.v}return m(e,u),u},P=(e,o,i,n)=>{if(ie(o)){let u;const s=new Promise((d,E)=>{let l=!1;o.then(a=>{if(!l){l=!0;const c=S(e),_=p(e,s,i);z(s,a),d(a),c?.d!==_.d&&T(e,_,c?.d)}},a=>{if(!l){l=!0;const c=S(e),_=p(e,s,i);W(s,a),E(a),c?.d!==_.d&&T(e,_,c?.d)}}),u=a=>{l||(l=!0,a.then(c=>z(s,c),c=>W(s,c)),d(a))}});return s.orig=o,s.status="pending",re(s,d=>{d&&u(d),n?.()}),p(e,s,i)}return p(e,o,i)},q=(e,o,i)=>{const n=S(e),u={d:n?.d||new Map,e:o};return i&&L(e,u,i),n&&N(n,u)&&n.d===u.d?n:(m(e,u),u)},g=e=>{const o=S(e);if(o&&(o.d.forEach((l,a)=>{a!==e&&!r.has(a)&&g(a)}),Array.from(o.d).every(([l,a])=>{const c=S(l);return l===e||c===a||c&&!w(c)&&I(c,a)})))return o;const i=new Map;let n=!0;const u=l=>{if(l===e){const c=S(l);if(c)return i.set(l,c),U(c);if(F(l))return i.set(l,void 0),l.init;throw new Error("no atom init")}const a=g(l);return i.set(l,a),U(a)};let s,d;const E={get signal(){return s||(s=new AbortController),s.signal},get setSelf(){return!d&&X(e)&&(d=(...l)=>{if(!n)return C(e,...l)}),d}};try{const l=e.read(u,E);return P(e,l,i,()=>s?.abort())}catch(l){return q(e,l,i)}finally{n=!1}},H=e=>U(g(e)),$=e=>{let o=r.get(e);return o||(o=V(e)),o},b=(e,o)=>!o.l.size&&(!o.t.size||o.t.size===1&&o.t.has(e)),G=e=>{const o=r.get(e);o&&b(e,o)&&O(e)},K=e=>{const o=new Map,i=new WeakMap,n=s=>{const d=r.get(s);d?.t.forEach(E=>{E!==s&&(o.set(E,(o.get(E)||new Set).add(s)),i.set(E,(i.get(E)||0)+1),n(E))})};n(e);const u=s=>{const d=r.get(s);d?.t.forEach(E=>{var l;if(E!==s){let a=i.get(E);if(a&&i.set(E,--a),!a){let c=!!((l=o.get(E))!=null&&l.size);if(c){const _=S(E),Y=g(E);c=!_||!I(_,Y)}c||o.forEach(_=>_.delete(E))}u(E)}})};u(e)},x=(e,...o)=>{let i=!0;const n=d=>U(g(d)),u=(d,...E)=>{let l;if(d===e){if(!F(d))throw new Error("atom not writable");const a=S(d),c=P(d,E[0]);(!a||!I(a,c))&&K(d)}else l=x(d,...E);if(!i){const a=M()}return l},s=e.write(n,u,...o);return i=!1,s},C=(e,...o)=>{const i=x(e,...o),n=M();return i},V=(e,o)=>{const i={t:new Set(o&&[o]),l:new Set};if(r.set(e,i),g(e).d.forEach((n,u)=>{const s=r.get(u);s?s.t.add(e):u!==e&&V(u,e)}),g(e),X(e)&&e.onMount){const n=e.onMount((...u)=>C(e,...u));n&&(i.u=n)}return i},O=e=>{var o;const i=(o=r.get(e))==null?void 0:o.u;i&&i(),r.delete(e);const n=S(e);n&&(w(n)&&k(n.v),n.d.forEach((u,s)=>{if(s!==e){const d=r.get(s);d&&(d.t.delete(e),b(s,d)&&O(s))}}))},T=(e,o,i)=>{const n=new Set(o.d.keys());i?.forEach((u,s)=>{if(n.has(s)){n.delete(s);return}const d=r.get(s);d&&(d.t.delete(e),b(s,d)&&O(s))}),n.forEach(u=>{const s=r.get(u);s?s.t.add(e):r.has(e)&&V(u,e)})},M=()=>{let e;for(;f.size;){const o=Array.from(f);f.clear(),o.forEach(([i,n])=>{const u=S(i);if(u){u.d!==n?.d&&T(i,u,n?.d);const s=r.get(i);s&&!(n&&!w(n)&&(I(n,u)||N(n,u)))&&s.l.forEach(d=>d())}})}};return{get:H,set:C,sub:(e,o)=>{const i=$(e),n=M(),u=i.l;return u.add(o),()=>{u.delete(o),G(e)}}}};let B;const le=()=>(B||(B=de()),B),ce=A.createContext(void 0),J=t=>{const r=A.useContext(ce);return t?.store||r||le()},fe=t=>typeof t?.then=="function",ae=te.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(t.status="pending",t.then(r=>{t.status="fulfilled",t.value=r},r=>{t.status="rejected",t.reason=r}),t)});function Se(t,r){const f=J(r),[[h,R,D],S]=A.useReducer(p=>{const P=f.get(t);return Object.is(p[0],P)&&p[1]===f&&p[2]===t?p:[P,f,t]},void 0,()=>[f.get(t),f,t]);let m=h;(R!==f||D!==t)&&(S(),m=f.get(t));const L=r?.delay;return A.useEffect(()=>{const p=f.sub(t,()=>{if(typeof L=="number"){setTimeout(S,L);return}S()});return S(),p},[f,t,L]),A.useDebugValue(m),fe(m)?ae(m):m}function Ee(t,r){const f=J(r);return A.useCallback((...R)=>f.set(t,...R),[f,t])}function pe(t,r){return[Se(t,r),Ee(t,r)]}const he=se(!1),ve=/^[\w-.]+@([\w-]+\.)+[\w-]{2,10}$/g,Pe=()=>{const[t,r]=A.useState(null),[f,h]=pe(he),[R,D]=A.useState(void 0);A.useEffect(()=>{try{const p=localStorage.getItem("userData");if(p===null){window.location.href="/";return}const P=JSON.parse(window.atob(p));r(P),D(P?.data.email),localStorage.clear()}catch{window.location.href="/"}},[]);const S=t?.data?.name,[m,L]=A.useState(null);return v.jsx(Q,{children:v.jsxs("div",{"data-theme":"meeTheme",children:[v.jsx(Z,{}),v.jsxs("div",{className:"max-w-86 mx-auto min-h-screen px-4 py-5 text-black",children:[v.jsxs("h1",{children:["Hello, ",S,"!"]}),v.jsx("p",{className:"pb-4 pt-2",children:f?"You successfully subscribed to our newsletter.":"Would you like to subscribe to our newsletter and receive updates related to The Mee Foundation activities?"}),f||v.jsxs("div",{children:[v.jsx("input",{placeholder:"Email",className:ee("border-alt-color-6 w-full border px-2 py-2 outline-none focus:border-primary",m&&"border-red-500 focus:border-red-500"),value:R,onChange:p=>{L(null),D(p.currentTarget.value)}}),v.jsx("p",{className:"text-red-500 text-sm",children:m})]}),v.jsxs("div",{className:"mx-auto flex w-32 flex-col gap-4 pt-8",children:[f||v.jsx(j,{title:"Subscribe",onClick:()=>{if(typeof R>"u"||!R.trim().match(ve)){L("Incorrect Email");return}h(!0)}}),v.jsx(j,{title:"Back",onClick:()=>{window.location.href="/"}})]})]}),v.jsx(oe,{})]})})};export{Pe as SubscribePage};
