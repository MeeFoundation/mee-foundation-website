import{r as o}from"./index.03be2d59.js";import{j as e,a as m,M as x,H as p}from"./MaxW.e49fee63.js";import{F as h}from"./Footer.596b6501.js";import{P as d,d as f}from"./constants.243fb792.js";const u={src:"/assets/loading.svg",width:106,height:106,format:"svg"},w=()=>e.jsx("div",{className:"w-full h-96 flex flex-col items-center justify-center",children:e.jsxs("div",{className:"relative",children:[e.jsx("img",{className:"animate-expanse",alt:"loading",src:u.src}),e.jsx("div",{className:"absolute top-0 bottom-0 left-0 right-0 text-primary flex flex-col justify-center items-center",children:e.jsx("p",{className:"text-sm",children:"Loading"})})]})});var r=(t=>(t[t.devWeb=0]="devWeb",t[t.devApp=1]="devApp",t[t.prodWeb=2]="prodWeb",t[t.prodApp=3]="prodApp",t))(r||{});const g=()=>{switch(window.location.hostname){case"auth.mee.foundation":return 3;case"auth-dev.mee.foundation":return 1;case"mee.foundation":return 2;case"www-dev.mee.foundation":return 0;default:return 2}},j={src:"/assets/lock.svg",width:19,height:21,format:"svg"},v={src:"/assets/cloud.svg",width:364,height:281,format:"svg"},N={src:"/assets/guy.svg",width:167,height:241,format:"svg"},y={src:"/assets/meeCertifiedMark.svg",width:48,height:48,format:"svg"},b={src:"/assets/meeCompatibleMark.svg",width:20,height:20,format:"svg"},k=({partnerData:t})=>{const s=o.useMemo(()=>{try{return f(t)}catch{try{return JSON.parse(window.atob(t))}catch{return window.location.href="/",{partnerName:"",partnerUrl:"",partnerDisplayedUrl:""}}}},[t]);return e.jsxs("div",{className:"flex h-screen w-screen flex-col items-center justify-start bg-white px-5 pt-32 text-center",children:[e.jsx("img",{className:"mb-20 h-12",alt:"mee",src:m.src}),e.jsx("h1",{className:"pb-8 text-2xl font-bold text-primary",children:"Let’s set up your first connection!"}),e.jsx("p",{className:"pb-8 text-lg font-medium text-black",children:"Allow Mee to establish a way to talk to the site you’ve just chosen to interact with."}),e.jsx("p",{className:"text-lg font-medium text-black",children:"Connect to "}),e.jsx("p",{className:"text-alt-color-8 text-3xl font-bold text-black",children:s.partnerName||s.client_metadata?.client_name}),e.jsxs("div",{className:"flex flex-row gap-3 pb-10",children:[e.jsx("img",{alt:"lock",src:j.src,className:"w-4"}),e.jsx("p",{className:"text-xl font-bold text-primary",children:s.partnerDisplayedUrl||s.client_metadata?.display_url})]}),e.jsx("button",{type:"button",className:"bg-primary px-4 py-2 text-sm font-bold text-white",onClick:()=>{window.location.href=`https://auth.mee.foundation/authorize?scope=openid&request=${t}`},children:"Next"})]})},C=[{partnerName:"The Olde York Times",partnerUrl:"https://oldeyorktimes.com",partnerDisplayedUrl:"oldeyorktimes.com",partnerImageUrl:"https://oldeyorktimes.com/favicon.png",isCertified:!0}],I=({partner:t})=>e.jsx("div",{className:"border-alt-color-6 cursor-pointer border-t py-3",tabIndex:-1,role:"link",onClick:()=>{window.location.href=t.partnerUrl},onKeyPress:s=>{s.key==="enter"&&(window.location.href=t.partnerUrl)},children:e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsx("img",{className:"h-12 w-12 rounded-full",src:t.partnerImageUrl,alt:t.partnerName}),e.jsxs("div",{className:"text-alt-color-8 flex flex-col",children:[e.jsxs("div",{className:"flex flex-row gap-1",children:[e.jsx("p",{className:"text-base",children:t.partnerName}),e.jsx("img",{className:"w-5",src:t.isCertified?y.src:b.src,alt:t.isCertified?"Mee certified":"Mee compatible"})]}),e.jsx("p",{className:"text-xs",children:t.partnerDisplayedUrl})]})]})}),M=()=>e.jsx(x,{children:e.jsxs("div",{"data-theme":"meeTheme",className:"",children:[e.jsx(p,{}),e.jsxs("div",{className:"max-w-256 mx-auto",children:[e.jsxs("div",{className:"min-h-screen",children:[e.jsx("div",{className:"sub-header flex flex-col items-center bg-secondary pt-5",children:e.jsxs("div",{className:"flex w-full flex-col items-center justify-center",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{className:"",src:v.src,alt:"cloud"}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 top-0 flex flex-col items-center justify-center px-8 pt-2",children:[e.jsx("h1",{className:"xs:text-3xl px-2 text-center text-xl font-normal text-primary",children:"Let’s set up your first connection"}),e.jsx("p",{className:"pt-2 text-center text-sm text-primary",children:"It is your first time setting up Mee! By creating a connection I mean establishing a way for Mee to talk to apps/sites you would like to sign in/up. Choose who you want me to start talking with."})]})]}),e.jsx("img",{className:"z-10 pt-2",src:N.src,alt:"person"}),e.jsx("div",{className:`h-19 relative -mt-2
               flex w-full flex-col items-center justify-center overflow-hidden`,children:e.jsx("div",{className:"absolute bottom-0 top-0 h-[200vh] w-[200vh] rounded-t-[50%] border-t bg-white",children:e.jsx("h2",{className:"pt-11 text-center text-xl font-medium text-primary",children:"Sites to connect to"})})})]})}),e.jsx("div",{className:"text-alt-color-8 px-4 pt-8",children:C.filter(t=>t.isCertified).map(t=>e.jsx(I,{partner:t},t.partnerUrl))})]}),e.jsx(h,{})]})]})}),T=({partner:t})=>{const[s,i]=o.useState(void 0),a=g(),l={partnerData:new URL(window.location.href).searchParams.get("request")||void 0};return o.useEffect(()=>{if(a===r.prodApp||a===r.devApp){const c=a===r.devApp;try{const n=localStorage.getItem(d);localStorage.removeItem(d),n!==null?window.location.href=`https://${c?"www-dev.":""}mee.foundation/installed?request=${n}`:window.location.href=`https://${c?"www-dev.":""}mee.foundation/installed`}catch{}}else typeof l.partnerData<"u"?i(l.partnerData):i(null)},[a,l]),e.jsx("div",{children:typeof s<"u"?s!==null?e.jsx(k,{partnerData:s}):e.jsx(M,{}):e.jsx(w,{})})};export{T as InstallationSucceed};
