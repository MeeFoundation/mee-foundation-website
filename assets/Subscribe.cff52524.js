import{j as v,c as x,M as Z,H as ee}from"./MaxW.d86e65a5.js";import{r as A,R as te}from"./index.03be2d59.js";import{F as oe}from"./Footer.22484444.js";let ne=0;function se(e,r){const l=`atom${++ne}`,p={toString:()=>l};return typeof e=="function"?p.read=e:(p.init=e,p.read=m=>m(p),p.write=(m,w,S)=>w(p,typeof S=="function"?S(m(p)):S)),r&&(p.write=r),p}const F=e=>"init"in e,X=e=>!!e.write,U=new WeakMap,re=(e,r)=>{U.set(e,r),e.catch(()=>{}).finally(()=>U.delete(e))},k=(e,r)=>{const l=U.get(e);l&&(U.delete(e),l(r))},N=(e,r)=>{e.status="fulfilled",e.value=r},z=(e,r)=>{e.status="rejected",e.reason=r},ie=e=>typeof e?.then=="function",D=(e,r)=>"v"in e&&"v"in r&&Object.is(e.v,r.v),W=(e,r)=>"e"in e&&"e"in r&&Object.is(e.e,r.e),y=e=>"v"in e&&e.v instanceof Promise,ue=(e,r)=>"v"in e&&"v"in r&&e.v.orig&&e.v.orig===r.v.orig,I=e=>{if("e"in e)throw e.e;return e.v},de=()=>{const e=new WeakMap,r=new WeakMap,l=new Map;let p,m,w;const S=t=>e.get(t),R=(t,o)=>{const i=e.get(t);if(e.set(t,o),l.has(t)||l.set(t,i),i&&y(i)){const n="v"in o?o.v instanceof Promise?o.v:Promise.resolve(o.v):Promise.reject(o.e);k(i.v,n)}},L=(t,o,i)=>{const n=new Map;let u=!1;i.forEach((s,d)=>{!s&&d===t&&(s=o),s&&(n.set(d,s),o.d.get(d)!==s&&(u=!0))}),(u||o.d.size!==n.size)&&(o.d=n)},h=(t,o,i)=>{const n=S(t),u={d:n?.d||new Map,v:o};if(i&&L(t,u,i),n&&D(n,u)&&n.d===u.d)return n;if(n&&y(n)&&y(u)&&ue(n,u)){if(n.d===u.d)return n;u.v=n.v}return R(t,u),u},P=(t,o,i,n)=>{if(ie(o)){let u;const s=new Promise((d,E)=>{let c=!1;o.then(f=>{if(!c){c=!0;const a=S(t),_=h(t,s,i);N(s,f),d(f),a?.d!==_.d&&O(t,_,a?.d)}},f=>{if(!c){c=!0;const a=S(t),_=h(t,s,i);z(s,f),E(f),a?.d!==_.d&&O(t,_,a?.d)}}),u=f=>{c||(c=!0,f.then(a=>N(s,a),a=>z(s,a)),d(f))}});return s.orig=o,s.status="pending",re(s,d=>{d&&u(d),n?.()}),h(t,s,i)}return h(t,o,i)},$=(t,o,i)=>{const n=S(t),u={d:n?.d||new Map,e:o};return i&&L(t,u,i),n&&W(n,u)&&n.d===u.d?n:(R(t,u),u)},g=t=>{const o=S(t);if(o&&(o.d.forEach((c,f)=>{f!==t&&!r.has(f)&&g(f)}),Array.from(o.d).every(([c,f])=>{const a=S(c);return c===t||a===f||a&&!y(a)&&D(a,f)})))return o;const i=new Map;let n=!0;const u=c=>{if(c===t){const a=S(c);if(a)return i.set(c,a),I(a);if(F(c))return i.set(c,void 0),c.init;throw new Error("no atom init")}const f=g(c);return i.set(c,f),I(f)};let s,d;const E={get signal(){return s||(s=new AbortController),s.signal},get setSelf(){return!d&&X(t)&&(d=(...c)=>{if(!n)return V(t,...c)}),d}};try{const c=t.read(u,E);return P(t,c,i,()=>s?.abort())}catch(c){return $(t,c,i)}finally{n=!1}},J=t=>I(g(t)),Y=t=>{let o=r.get(t);return o||(o=C(t)),o},b=(t,o)=>!o.l.size&&(!o.t.size||o.t.size===1&&o.t.has(t)),G=t=>{const o=r.get(t);o&&b(t,o)&&M(t)},K=t=>{const o=new Map,i=new WeakMap,n=s=>{const d=r.get(s);d?.t.forEach(E=>{E!==s&&(o.set(E,(o.get(E)||new Set).add(s)),i.set(E,(i.get(E)||0)+1),n(E))})};n(t);const u=s=>{const d=r.get(s);d?.t.forEach(E=>{var c;if(E!==s){let f=i.get(E);if(f&&i.set(E,--f),!f){let a=!!((c=o.get(E))!=null&&c.size);if(a){const _=S(E),Q=g(E);a=!_||!D(_,Q)}a||o.forEach(_=>_.delete(E))}u(E)}})};u(t)},j=(t,...o)=>{let i=!0;const n=d=>I(g(d)),u=(d,...E)=>{let c;if(d===t){if(!F(d))throw new Error("atom not writable");const f=S(d),a=P(d,E[0]);(!f||!D(f,a))&&K(d)}else c=j(d,...E);if(!i){const f=T()}return c},s=t.write(n,u,...o);return i=!1,s},V=(t,...o)=>{const i=j(t,...o),n=T();return i},C=(t,o)=>{const i={t:new Set(o&&[o]),l:new Set};if(r.set(t,i),g(t).d.forEach((n,u)=>{const s=r.get(u);s?s.t.add(t):u!==t&&C(u,t)}),g(t),X(t)&&t.onMount){const n=t.onMount((...u)=>V(t,...u));n&&(i.u=n)}return i},M=t=>{var o;const i=(o=r.get(t))==null?void 0:o.u;i&&i(),r.delete(t);const n=S(t);n&&(y(n)&&k(n.v),n.d.forEach((u,s)=>{if(s!==t){const d=r.get(s);d&&(d.t.delete(t),b(s,d)&&M(s))}}))},O=(t,o,i)=>{const n=new Set(o.d.keys());i?.forEach((u,s)=>{if(n.has(s)){n.delete(s);return}const d=r.get(s);d&&(d.t.delete(t),b(s,d)&&M(s))}),n.forEach(u=>{const s=r.get(u);s?s.t.add(t):r.has(t)&&C(u,t)})},T=()=>{let t;for(;l.size;){const o=Array.from(l);l.clear(),o.forEach(([i,n])=>{const u=S(i);if(u){u.d!==n?.d&&O(i,u,n?.d);const s=r.get(i);s&&!(n&&!y(n)&&(D(n,u)||W(n,u)))&&s.l.forEach(d=>d())}})}};return{get:J,set:V,sub:(t,o)=>{const i=Y(t),n=T(),u=i.l;return u.add(o),()=>{u.delete(o),G(t)}}}};let B;const le=()=>(B||(B=de()),B),ce=A.createContext(void 0),H=e=>{const r=A.useContext(ce);return e?.store||r||le()},ae=e=>typeof e?.then=="function",fe=te.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(e.status="pending",e.then(r=>{e.status="fulfilled",e.value=r},r=>{e.status="rejected",e.reason=r}),e)});function Se(e,r){const l=H(r),[[p,m,w],S]=A.useReducer(h=>{const P=l.get(e);return Object.is(h[0],P)&&h[1]===l&&h[2]===e?h:[P,l,e]},void 0,()=>[l.get(e),l,e]);let R=p;(m!==l||w!==e)&&(S(),R=l.get(e));const L=r?.delay;return A.useEffect(()=>{const h=l.sub(e,()=>{if(typeof L=="number"){setTimeout(S,L);return}S()});return S(),h},[l,e,L]),A.useDebugValue(R),ae(R)?fe(R):R}function Ee(e,r){const l=H(r);return A.useCallback((...m)=>l.set(e,...m),[l,e])}function pe(e,r){return[Se(e,r),Ee(e,r)]}const q=({title:e,onClick:r,icon:l,isSecondary:p=!1})=>v.jsxs("button",{className:x("h-9 pr-4 text-sm font-bold shadow-sm flex items-center gap-3 hover:shadow-lg",p?"bg-secondary-content":"bg-primary",l?"pl-1":"pl-4"),type:"button",onClick:r,children:[l&&v.jsx("img",{className:"w-6 h-6 pl-1",alt:"button icon",src:l}),v.jsx("p",{className:x(p?"text-primary":"text-primary-content","text-center w-full"),children:e})]}),he=se(!1),ve=/^[\w-.]+@([\w-]+\.)+[\w-]{2,10}$/g,Le=()=>{const[e,r]=A.useState(null),[l,p]=pe(he),[m,w]=A.useState(void 0);A.useEffect(()=>{try{const h=localStorage.getItem("userData");if(h===null){window.location.href="/";return}const P=JSON.parse(window.atob(h));r(P),w(P?.data.email),localStorage.clear()}catch{window.location.href="/"}},[]);const S=e?.data?.name,[R,L]=A.useState(null);return v.jsx(Z,{children:v.jsxs("div",{"data-theme":"meeTheme",children:[v.jsx(ee,{}),v.jsxs("div",{className:"max-w-86 mx-auto min-h-screen px-4 py-5 text-black",children:[v.jsxs("h1",{children:["Hello, ",S,"!"]}),v.jsx("p",{className:"pb-4 pt-2",children:l?"You successfully subscribed to our newsletter.":"Would you like to subscribe to our newsletter and receive updates related to The Mee Foundation activities?"}),l||v.jsxs("div",{children:[v.jsx("input",{placeholder:"Email",className:x("border-alt-color-6 w-full border px-2 py-2 outline-none focus:border-primary",R&&"border-red-500 focus:border-red-500"),value:m,onChange:h=>{L(null),w(h.currentTarget.value)}}),v.jsx("p",{className:"text-red-500 text-sm",children:R})]}),v.jsxs("div",{className:"mx-auto flex w-32 flex-col gap-4 pt-8",children:[l||v.jsx(q,{title:"Subscribe",onClick:()=>{if(typeof m>"u"||!m.trim().match(ve)){L("Incorrect Email");return}p(!0)}}),v.jsx(q,{title:"Back",onClick:()=>{window.location.href="/"}})]})]}),v.jsx(oe,{})]})})};export{Le as SubscribePage};
