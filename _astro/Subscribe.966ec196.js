import{j as p,c as N,M as ne,H as oe}from"./MaxW.d2566372.js";import{r as m,R as se}from"./index.f1bc5ebf.js";import{F as re}from"./Footer.5d734d1e.js";let ie=0;function ue(t,s){const u=`atom${++ie}`,l={toString:()=>u};return typeof t=="function"?l.read=t:(l.init=t,l.read=S=>S(l),l.write=(S,_,f)=>_(l,typeof f=="function"?f(S(l)):f)),s&&(l.write=s),l}const j=t=>"init"in t,F=t=>!!t.write,C=new WeakMap,ce=(t,s)=>{C.set(t,s),t.catch(()=>{}).finally(()=>C.delete(t))},q=(t,s)=>{const u=C.get(t);u&&(C.delete(t),u(s))},$=(t,s)=>{t.status="fulfilled",t.value=s},J=(t,s)=>{t.status="rejected",t.reason=s},L=(t,s)=>"v"in t&&"v"in s&&Object.is(t.v,s.v),Y=(t,s)=>"e"in t&&"e"in s&&Object.is(t.e,s.e),X=t=>"v"in t&&t.v instanceof Promise,x=t=>{if("e"in t)throw t.e;return t.v},de=()=>{const t=new WeakMap,s=new WeakMap,u=new Map;let l,S,_;({PUBLIC_SVC_URL:"https://relay.mee.foundation",BASE_URL:'"/"',MODE:"production",DEV:!1,PROD:!0,SSR:!1,SITE:void 0,ASSETS_PREFIX:void 0}&&"production")!=="production"&&(l=new Set,S=new Set,_=new Set);const f=e=>t.get(e),w=(e,n)=>{({PUBLIC_SVC_URL:"https://relay.mee.foundation",BASE_URL:'"/"',MODE:"production",DEV:!1,PROD:!0,SSR:!1,SITE:void 0,ASSETS_PREFIX:void 0}&&"production")!=="production"&&Object.freeze(n);const o=t.get(e);if(t.set(e,n),u.has(e)||u.set(e,o),o&&X(o)){const r="v"in n?n.v instanceof Promise?n.v:Promise.resolve(n.v):Promise.reject(n.e);q(o.v,r)}},P=(e,n,o)=>{const r=new Map;let i=!1;o.forEach(c=>{const d=c===e?n:f(c);d?(r.set(c,d),n.d.get(c)!==d&&(i=!0)):({PUBLIC_SVC_URL:"https://relay.mee.foundation",BASE_URL:'"/"',MODE:"production",DEV:!1,PROD:!0,SSR:!1,SITE:void 0,ASSETS_PREFIX:void 0}&&"production")!=="production"&&console.warn("[Bug] atom state not found")}),(i||n.d.size!==r.size)&&(n.d=r)},E=(e,n,o)=>{const r=f(e),i={d:r?.d||new Map,v:n};return o&&P(e,i,o),r&&L(r,i)&&r.d===i.d?r:(w(e,i),i)},b=(e,n,o)=>{const r=f(e),i={d:r?.d||new Map,e:n};return o&&P(e,i,o),r&&Y(r,i)&&r.d===i.d?r:(w(e,i),i)},g=e=>{const n=f(e);if(n&&(n.d.forEach((a,R)=>{R!==e&&!s.has(R)&&g(R)}),Array.from(n.d).every(([a,R])=>a===e||f(a)===R)))return n;const o=new Set;let r=!0;const i=a=>{if(o.add(a),a===e){const h=f(a);if(h)return x(h);if(j(a))return a.init;throw new Error("no atom init")}const R=g(a);return x(R)};let c,d;const y={get signal(){return c||(c=new AbortController),c.signal},get setSelf(){return({PUBLIC_SVC_URL:"https://relay.mee.foundation",BASE_URL:'"/"',MODE:"production",DEV:!1,PROD:!0,SSR:!1,SITE:void 0,ASSETS_PREFIX:void 0}&&"production")!=="production"&&!F(e)&&console.warn("setSelf function cannot be used with read-only atom"),!d&&F(e)&&(d=(...a)=>{if(({PUBLIC_SVC_URL:"https://relay.mee.foundation",BASE_URL:'"/"',MODE:"production",DEV:!1,PROD:!0,SSR:!1,SITE:void 0,ASSETS_PREFIX:void 0}&&"production")!=="production"&&r&&console.warn("setSelf function cannot be called in sync"),!r)return I(e,...a)}),d}};try{const a=e.read(i,y);if(a instanceof Promise){let R;const h=new Promise((v,te)=>{let D=!1;a.then(A=>{D||(D=!0,E(e,h,o),$(h,A),v(A))},A=>{D||(D=!0,E(e,h,o),J(h,A),te(A))}),R=A=>{D||(D=!0,A.then(M=>$(h,M),M=>J(h,M)),v(A))}});return h.status="pending",ce(h,v=>{v&&R(v),c?.abort()}),E(e,h,o)}return E(e,a,o)}catch(a){return b(e,a,o)}finally{r=!1}},z=e=>x(g(e)),Q=e=>{let n=s.get(e);return n||(n=O(e)),n},V=(e,n)=>!n.l.size&&(!n.t.size||n.t.size===1&&n.t.has(e)),Z=e=>{const n=s.get(e);n&&V(e,n)&&T(e)},B=e=>{const n=s.get(e);n?.t.forEach(o=>{if(o!==e){const r=f(o),i=g(o);(!r||!L(r,i))&&B(o)}})},W=(e,...n)=>{let o=!0;const r=d=>x(g(d)),i=(d,...y)=>{let a;if(d===e){if(!j(d))throw new Error("atom not writable");const R=f(d),h=E(d,y[0]);(!R||!L(R,h))&&B(d)}else a=W(d,...y);return o||U(),a},c=e.write(r,i,...n);return o=!1,c},I=(e,...n)=>{const o=W(e,...n);return U(),o},O=(e,n)=>{const o={t:new Set(n&&[n]),l:new Set};if(s.set(e,o),({PUBLIC_SVC_URL:"https://relay.mee.foundation",BASE_URL:'"/"',MODE:"production",DEV:!1,PROD:!0,SSR:!1,SITE:void 0,ASSETS_PREFIX:void 0}&&"production")!=="production"&&_.add(e),g(e).d.forEach((r,i)=>{const c=s.get(i);c?c.t.add(e):i!==e&&O(i,e)}),g(e),F(e)&&e.onMount){const r=e.onMount((...i)=>I(e,...i));r&&(o.u=r)}return o},T=e=>{var n;const o=(n=s.get(e))==null?void 0:n.u;o&&o(),s.delete(e),({PUBLIC_SVC_URL:"https://relay.mee.foundation",BASE_URL:'"/"',MODE:"production",DEV:!1,PROD:!0,SSR:!1,SITE:void 0,ASSETS_PREFIX:void 0}&&"production")!=="production"&&_.delete(e);const r=f(e);r?(X(r)&&q(r.v),r.d.forEach((i,c)=>{if(c!==e){const d=s.get(c);d&&(d.t.delete(e),V(c,d)&&T(c))}})):({PUBLIC_SVC_URL:"https://relay.mee.foundation",BASE_URL:'"/"',MODE:"production",DEV:!1,PROD:!0,SSR:!1,SITE:void 0,ASSETS_PREFIX:void 0}&&"production")!=="production"&&console.warn("[Bug] could not find atom state to unmount",e)},ee=(e,n,o)=>{const r=new Set(n.d.keys());o?.forEach((i,c)=>{if(r.has(c)){r.delete(c);return}const d=s.get(c);d&&(d.t.delete(e),V(c,d)&&T(c))}),r.forEach(i=>{const c=s.get(i);c?c.t.add(e):s.has(e)&&O(i,e)})},U=()=>{for(;u.size;){const e=Array.from(u);u.clear(),e.forEach(([n,o])=>{const r=f(n);if(r){r.d!==o?.d&&ee(n,r,o?.d);const i=s.get(n);i&&!(o&&!X(o)&&(L(o,r)||Y(o,r)))&&i.l.forEach(c=>c())}else({PUBLIC_SVC_URL:"https://relay.mee.foundation",BASE_URL:'"/"',MODE:"production",DEV:!1,PROD:!0,SSR:!1,SITE:void 0,ASSETS_PREFIX:void 0}&&"production")!=="production"&&console.warn("[Bug] no atom state to flush")})}({PUBLIC_SVC_URL:"https://relay.mee.foundation",BASE_URL:'"/"',MODE:"production",DEV:!1,PROD:!0,SSR:!1,SITE:void 0,ASSETS_PREFIX:void 0}&&"production")!=="production"&&(l.forEach(e=>e()),S.forEach(e=>e("state")))},H=(e,n)=>{const o=Q(e);U();const r=o.l;return r.add(n),({PUBLIC_SVC_URL:"https://relay.mee.foundation",BASE_URL:'"/"',MODE:"production",DEV:!1,PROD:!0,SSR:!1,SITE:void 0,ASSETS_PREFIX:void 0}&&"production")!=="production"&&S.forEach(i=>i("sub")),()=>{r.delete(n),Z(e),({PUBLIC_SVC_URL:"https://relay.mee.foundation",BASE_URL:'"/"',MODE:"production",DEV:!1,PROD:!0,SSR:!1,SITE:void 0,ASSETS_PREFIX:void 0}&&"production")!=="production"&&S.forEach(i=>i("unsub"))}};return({PUBLIC_SVC_URL:"https://relay.mee.foundation",BASE_URL:'"/"',MODE:"production",DEV:!1,PROD:!0,SSR:!1,SITE:void 0,ASSETS_PREFIX:void 0}&&"production")!=="production"?{get:z,set:I,sub:H,dev_subscribe_state:e=>(console.warn("[DEPRECATED] dev_subscribe_state is deprecated and will be removed in the next minor version. use dev_subscribe_store instead."),l.add(e),()=>{l.delete(e)}),dev_subscribe_store:e=>(S.add(e),()=>{S.delete(e)}),dev_get_mounted_atoms:()=>_.values(),dev_get_atom_state:e=>t.get(e),dev_get_mounted:e=>s.get(e),dev_restore_atoms:e=>{for(const[n,o]of e)j(n)&&(E(n,o),B(n));U()}}:{get:z,set:I,sub:H}};let k;const le=()=>(k||(k=de()),k),fe=m.createContext(void 0),K=t=>{const s=m.useContext(fe);return t?.store||s||le()},ae=t=>t instanceof Promise,Se=se.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(t.status="pending",t.then(s=>{t.status="fulfilled",t.value=s},s=>{t.status="rejected",t.reason=s}),t)});function Ee(t,s){const u=K(s),[[l,S,_],f]=m.useReducer(E=>{const b=u.get(t);return Object.is(E[0],b)&&E[1]===u&&E[2]===t?E:[b,u,t]},void 0,()=>[u.get(t),u,t]);let w=l;(S!==u||_!==t)&&(f(),w=u.get(t));const P=s?.delay;return m.useEffect(()=>{const E=u.sub(t,()=>{if(typeof P=="number"){setTimeout(f,P);return}f()});return f(),E},[u,t,P]),m.useDebugValue(w),ae(w)?Se(w):w}function pe(t,s){const u=K(s);return m.useCallback((...S)=>{if(({PUBLIC_SVC_URL:"https://relay.mee.foundation",BASE_URL:'"/"',MODE:"production",DEV:!1,PROD:!0,SSR:!1,SITE:void 0,ASSETS_PREFIX:void 0}&&"production")!=="production"&&!("write"in t))throw new Error("not writable atom");return u.set(t,...S)},[u,t])}function he(t,s){return[Ee(t,s),pe(t,s)]}const G=({title:t,onClick:s,icon:u,isSecondary:l=!1})=>p.jsxs("button",{className:N("h-9 pr-4 text-sm font-bold shadow-sm flex items-center gap-3 hover:shadow-lg",l?"bg-secondary-content":"bg-primary",u?"pl-1":"pl-4"),type:"button",onClick:s,children:[u&&p.jsx("img",{className:"w-6 h-6 pl-1",alt:"button icon",src:u}),p.jsx("p",{className:N(l?"text-primary":"text-primary-content","text-center w-full"),children:t})]}),Re=ue(!1),_e=/^[\w-.]+@([\w-]+\.)+[\w-]{2,10}$/g,Ae=()=>{const[t,s]=m.useState(null),[u,l]=he(Re),[S,_]=m.useState(void 0);m.useEffect(()=>{try{const E=localStorage.getItem("userData");if(E===null){window.location.href="/";return}const b=JSON.parse(window.atob(E));s(b),_(b?.data.email),localStorage.clear()}catch{window.location.href="/"}},[]);const f=t?.data?.name,[w,P]=m.useState(null);return p.jsx(ne,{children:p.jsxs("div",{"data-theme":"meeTheme",children:[p.jsx(oe,{}),p.jsxs("div",{className:"max-w-86 mx-auto min-h-screen px-4 py-5 text-black",children:[p.jsxs("h1",{children:["Hello, ",f,"!"]}),p.jsx("p",{className:"pb-4 pt-2",children:u?"You successfully subscribed to our newsletter.":"Would you like to subscribe to our newsletter and receive updates related to The Mee Foundation activities?"}),u||p.jsxs("div",{children:[p.jsx("input",{placeholder:"Email",className:N("border-alt-color-6 w-full border px-2 py-2 outline-none focus:border-primary",w&&"border-red-500 focus:border-red-500"),value:S,onChange:E=>{P(null),_(E.currentTarget.value)}}),p.jsx("p",{className:"text-red-500 text-sm",children:w})]}),p.jsxs("div",{className:"mx-auto flex w-32 flex-col gap-4 pt-8",children:[u||p.jsx(G,{title:"Subscribe",onClick:()=>{if(typeof S>"u"||!S.trim().match(_e)){P("Incorrect Email");return}l(!0)}}),p.jsx(G,{title:"Back",onClick:()=>{window.location.href="/"}})]})]}),p.jsx(re,{})]})})};export{Ae as SubscribePage};
