---
import Footer from './Footer.astro';
import Logo from './Logo.astro';
import TrustIcon from './TrustIcon.astro';


export interface Props {
}

const {  } = Astro.props;
const subtitles = [
	"Your privacy is respected by blocking tracking and sale of your data.",
	"You decide how and when your data is shared, stored, and used.",
	"You can easily share information on Mee-certified sites without passwords and endless form filling.",
	"You can trust that certified apps and sites  will act in your best interest."
	]
---

<article id="envision" class="envision relative flex flex-col justify-center items-center w-screen overflow-x-hidden">

	<section class="w-screen min-h-screen">
		<div class="min-h-screen">
			<div id="title" class=" title overflow-hidden fixed z-100 flex items-center justify-center h-screen w-screen pb-7">
				<h2 class="text text-base leading-5 font-bold tracking-wider uppercase text-center animate-riseIn text-black/[.6]">Mee is an app that puts you in control of your online identity</h2>
			</div>
			<div class="relative">
				<div class="bg-1 top-0" />
			{subtitles.map(subtitle => (
				<div class="section flex flex-col items-center section-0 overflow-hidden w-screen h-[100vh]">
					<div class="subtitle opacity-0 hidden fixed overflow-hidden z-100 top-1/2 w-full px-5 md:w-[732px]">
						<h2 class="text text-xl md:text-3xl font-bold animate-riseIn text-gray text-center">{subtitle}</h2>
					</div>
				</div>
			))}
			</div>
		</div>	
	</section>
	<section class="bg-2 section flex flex-col justify-center items-center top-0 w-screen h-screen">
		<div class="overflow-hidden z-100 w-full px-5 md:w-[732px] md:pb-32">
			<h2 class="text text-xl md:text-3xl font-bold animate-riseIn text-gray text-center">Mee gives you the confidence to share with trusted apps, creating a digital world driven by… </h2>
		</div>
		<div class="flex flex-row gap-18.5">
			<div class="feature trust rounded-xl relative flex flex-col justify-center items-center px-5 pt-14 pb-8 bg-white max-w-[266px]">
				<i class="absolute -top-7.5"><TrustIcon fill="#F9B689"/></i>
				<h6 class="text-xl text-black/[.8] font-extrabold uppercase">Trust</h6>
				<p class="text-base font-medium text-center text-black/[.8]">You know how Mee-certified providers will use your data.</p>
			</div>
			<div class="feature autonomy rounded-xl relative flex flex-col justify-center items-center px-5 pt-14 pb-8 bg-white max-w-[266px]">
				<i class="absolute -top-7.5"><TrustIcon fill="#C5C05C"/></i>
				<h6 class="text-xl text-black/[.8] font-extrabold uppercase">Autonomy</h6>
				<p class="text-base font-medium text-center text-black/[.8]">You your identity and data on your own devices.</p>
			</div>
			<div class="feature convenience rounded-xl relative flex flex-col justify-center items-center px-5 pt-14 pb-8 bg-white max-w-[266px]">
				<i class="absolute -top-7.5"><TrustIcon fill="#447F88"/></i>
				<h6 class="text-xl text-black/[.8] font-extrabold uppercase">Convenience</h6>
				<p class="text-base font-medium text-center text-black/[.8]">You don’t ever have to repeat yourself.</p>
			</div>
		</div>
	</section>
	<Footer type="fill"/>
</article>

<style>

.feature {
		opacity: 0;
		transform: translateX(-50%);
		animation: moveFeature 500ms linear forwards;

		
		border-radius: 12px;
		border: 1px solid transparent;
	}
	.envision {
		background: #fff;
	}
	/* Hack for border-radius + border-gradient need use background-clip. */
	.trust {
		background: linear-gradient(white, white) padding-box,
								linear-gradient(131.91deg, #F9B689 0%, #FFDF80 100%) border-box;
	}
	.autonomy {
		animation-delay: 200ms;
		background: linear-gradient(white, white) padding-box,
								linear-gradient(48.09deg, #FFDF80 0%, #C5C05C 100%) border-box;
	}
	.convenience {
		animation-delay: 400ms;
		background: linear-gradient(white, white) padding-box,
								linear-gradient(48.09deg, #C5C05C 0%, #4F868E 100%) border-box;
	}

	

	@keyframes moveFeature {
		100% {opacity: 1; transform: translateX(0);}
	}
	
	.bg-1 {
		content: '';
		position: absolute;
		width: 120vw;
		min-height: 100vh;
		height: 100%;
		border-top-left-radius: 50%;
		border-top-right-radius: 50%;
		/* padding-top: 100vh; */
		transform: translate(-10vw, 50%);
		background: linear-gradient(to top,rgba(249, 200, 137, 0.4) 50%, rgba(249, 182, 137, 0.4) 100%);
		filter: blur(100px);
		z-index: 1;
	}


	

	.bg-2 {
		width: 200vw;
		border-top-left-radius: 50%;
		border-top-right-radius: 50%;
		background: #fff;
		transform: translateY(-150px);
		z-index: 1;
	}
	
	

	.text {
		-webkit-font-smoothing: antialiased;
		font-smoothing: antialiased;  
	}

	.logo {
		animation-duration: 800ms;
	}

	.subtitle p{
		transform: translateY(100%);
		animation-delay: 800ms ;
		animation-duration: 400ms;
	}

	@keyframes riseBg {
		0% { transform: translateY(150px);}
		100% { transform: translateY(-150px);}
	}

</style>

<script>
	const envision = document.getElementById("envision");
	const welcomeSection = document.getElementById("welcomeSection");
	const sections = document.querySelectorAll('.section');

	const options: IntersectionObserverInit = {
			// root: null,
			threshold: 0.5,
			// rootMargin: "-10%"
		};
		const observer = new IntersectionObserver((entries, _) => {
			entries.forEach((entry) => {
				
				if (entry.isIntersecting) {
					console.log('intersecting', entry.target);
					entry.target.querySelector(".subtitle")?.classList.remove("opacity-0");
					entry.target.querySelector(".subtitle")?.classList.remove("hidden");
				} else {
					console.log('removed', entry.target);
					setTimeout(()=> entry.target.querySelector(".subtitle")?.classList.add("hidden"),200);
					entry.target.querySelector(".subtitle")?.classList.add("opacity-0")
				}
			})
		}, options);


		sections.forEach((section) => {
			observer.observe(section)
		});
	
</script>
